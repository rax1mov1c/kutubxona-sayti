/*! For license information please see _vh-player-js.js.LICENSE.txt */
!function(){var e={5645:function(e){"use strict";e.exports=JSON.parse('{"env":"production","url":"//yastatic.net/video-player","bucket":"video-player-static","endpoint":"s3.yandex.net","path":"/0xb9852995dfc","version":"0xb9852995dfc"}')},4727:function(){!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s="./src/entry/sandbox.ts")}({"../../node_modules/tslib/tslib.es6.js":function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return s})),n.d(t,"__decorate",(function(){return a})),n.d(t,"__param",(function(){return c})),n.d(t,"__metadata",(function(){return u})),n.d(t,"__awaiter",(function(){return d})),n.d(t,"__generator",(function(){return l})),n.d(t,"__createBinding",(function(){return h})),n.d(t,"__exportStar",(function(){return f})),n.d(t,"__values",(function(){return p})),n.d(t,"__read",(function(){return m})),n.d(t,"__spread",(function(){return _})),n.d(t,"__spreadArrays",(function(){return y})),n.d(t,"__await",(function(){return v})),n.d(t,"__asyncGenerator",(function(){return g})),n.d(t,"__asyncDelegator",(function(){return b})),n.d(t,"__asyncValues",(function(){return S})),n.d(t,"__makeTemplateObject",(function(){return E})),n.d(t,"__importStar",(function(){return x})),n.d(t,"__importDefault",(function(){return T})),n.d(t,"__classPrivateFieldGet",(function(){return w})),n.d(t,"__classPrivateFieldSet",(function(){return k}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function d(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function l(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function h(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function f(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function _(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function g(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof v?Promise.resolve(n.value.v).then(c,u):d(o[0][2],n)}catch(e){d(o[0][3],e)}var n}function c(e){a("next",e)}function u(e){a("throw",e)}function d(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:v(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function S(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}function w(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function k(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},"../../node_modules/webpack/buildin/global.js":function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},"../../tmpl/common/blocks/i-polyfill/__object-assign/i-polyfill__object-assign.js":function(e,t){!function(){if(!Object.assign){var e=function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n};try{Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:e})}catch(t){Object.assign=e}}}()},"../../tmpl/stream-react/src/lib/backoff/index.ts":function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,"Backoff",(function(){return i}));var i=function(){function e(e){void 0===e&&(e={}),r(this,"reset",(function(){this.attempts=0})),r(this,"_reconnectionDelayMin",void 0),r(this,"_reconnectionDelayMax",void 0),r(this,"_reconnectionFactor",void 0),r(this,"_reconnectionJitter",void 0),r(this,"_reconnectionMaxAttempts",void 0),r(this,"_attemptsDone",void 0),this._reconnectionDelayMin=e.reconnectionDelayMin||100,this._reconnectionDelayMax=e.reconnectionDelayMax||1e4,this._reconnectionFactor=e.reconnectionFactor||2,this._reconnectionJitter=e.reconnectionJitter>0&&e.reconnectionJitter<=1?e.reconnectionJitter:0,this._reconnectionMaxAttempts=e.reconnectionMaxAttempts||1/0,this._attemptsDone=0}return e.prototype.duration=function(){var e=this._reconnectionDelayMin*Math.pow(this._reconnectionFactor,this._attemptsDone++);if(this._reconnectionJitter){var t=Math.random(),n=Math.floor(t*this._reconnectionJitter*e);e=Math.floor(10*t)>=5?e-n:e+n}return Math.abs(Math.min(e,this._reconnectionDelayMax))},e.prototype.shouldRetry=function(){return Boolean(this._attemptsDone<this._reconnectionMaxAttempts)},e}()},"../../tmpl/stream-react/src/lib/error/index.ts":function(e,t,n){"use strict";function r(e){return e instanceof Error}function i(e){return!r(e)}function o(e){return e instanceof SyntaxError}n.r(t),n.d(t,"isError",(function(){return r})),n.d(t,"isSyntaxError",(function(){return o})),n.d(t,"isNotErrorData",(function(){return i}))},"../../tmpl/stream-react/src/lib/extractPartialFields/index.ts":function(e,t,n){"use strict";function r(e,t){return t.reduce((function(t,n){return e[n]&&(t[n]=e[n]),t}),{})}n.r(t),n.d(t,"extractPartialFields",(function(){return r}))},"../../tmpl/stream-react/src/lib/parseJSONSafe/index.ts":function(e,t,n){"use strict";function r(e){var t;try{t=JSON.parse(e)}catch(e){return e}return t}n.r(t),n.d(t,"parseJSONSafe",(function(){return r}))},"../../tmpl/stream-react/src/lib/url/index.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"addQueryToUrl",(function(){return u})),n.d(t,"makeUrl",(function(){return c})),n.d(t,"parseUrl",(function(){return a})),n.d(t,"parseSearch",(function(){return o})),n.d(t,"redirectPageToUrl",(function(){return d}));var r=/^(?:(.*?):)?\/\/([^/?#\s]+)(\/?.*)$/,i=/^(\/?[^?#\s]*)(?:\?([^#]+))?(?:#(.*))?$/;function o(e,t){return e.split("&").reduce((function(e,n){if(!n)return{};var r,i,o=n.match(/([^=]*)=(.*)/);if(o)try{r=decodeURIComponent(o[1]),i=decodeURIComponent(o[2])}catch(t){return e}else{try{r=decodeURIComponent(n)}catch(t){return e}i=""}return r in e&&t?("string"==typeof e[r]&&(e[r]=[e[r]]),e[r].push(i)):e[r]=i,e}),{})}function s(e){var t=[];if(!e)return"";for(var n in e)if(e.hasOwnProperty(n)&&void 0!==e[n]&&null!==e[n]){var r=e[n];"object"!=typeof r&&(r=[r]);for(var i=0;i<r.length;++i)t.push(encodeURIComponent(n)+(""!==r[i]?"="+encodeURIComponent(r[i]):""))}return t.length?"?"+t.join("&"):""}function a(e,t){var n,s=e.match(r);if(s?n=s[3].match(i):(s=[],n=e.match(i)),!s&&!n)throw new TypeError('Invalid url "'+e+'"');var a={scheme:s[1]||"",host:s[2]||"",path:n&&n[1]||"",search:n&&n[2]||"",hash:n&&n[3]||"",query:{}};return a.query=o(a.search,t&&t.multi),a}function c(e){var t="";return!e.scheme||!e.host&&e.path||(t+=e.scheme+"://"),e.host&&(e.scheme||(t+="//"),t+=e.host),t&&(e.path&&0!==e.path.indexOf("/")||!e.path)&&"/"!==t.charAt(t.length-1)&&(t+="/"),t+=e.path||"",t+=s(e.query),e.hash&&(t+="#"+e.hash),t}function u(e,t){return e.replace(i,(function(e,n,r,i){var a=r?o(r):{};for(var c in t)t.hasOwnProperty(c)&&(a[c]=t[c]);return n+s(a)+(i?"#"+i:"")}))}var d=function(e){Ya.streamModules.utils.redirectPageToUrl(e)}},"./src/core/index.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"EtherCms",(function(){return o}));var r=n("./src/modules/init/index.ts");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){function e(t){if(i(this,"_inited",!1),i(this,"forbidden",{}),i(this,"settings",{exp:{}}),i(this,"apiUrl","https://frontend.vh.yandex.ru/v23/"),i(this,"graphqlUrl","https://frontend.vh.yandex.ru/graphql"),i(this,"_errorLib",{logError:function(e,t){t&&console.error(t),console.log(e)}}),i(this,"_rumLib",{timeEnd:function(e,t){console.log(e,t)},getTime:function(){return Number(new Date)}}),i(this,"_sessionParams",void 0),i(this,"_baseParams",void 0),i(this,"reqparamsCms",void 0),t)return Object.assign(t,this),Object.getOwnPropertyNames(e.prototype).forEach((function(n){"constructor"!==n&&(t.constructor.prototype[n]=e.prototype[n])})),t}return e.prototype.init=function(e){this._inited||(Object(r.init)(this,e),this._inited=!0)},e}()},"./src/entry/sandbox.ts":function(e,t,n){"use strict";n.r(t),function(e){n("../../tmpl/common/blocks/i-polyfill/__object-assign/i-polyfill__object-assign.js");var r=n("./src/modules/instance/index.ts");n.d(t,"etherCmsInstance",(function(){return r.etherCmsInstance}));var i=n("./src/modules/ajax/index.ts"),o=n("./src/modules/error/index.ts"),s=n("./src/modules/vhnotify/index.ts");Object.assign(r.etherCmsInstance.constructor.prototype,{ajax:i.ajax,onError:o.onError,initXiva:s.initXiva,subscribe:s.subscribe,unsubscribe:s.unsubscribe}),e.Ya=e.Ya||{},e.Ya.streamCms=r.etherCmsInstance}.call(this,n("../../node_modules/webpack/buildin/global.js"))},"./src/modules/ajax/index.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"ajax",(function(){return d})),n.d(t,"getMetaToVhError",(function(){return l})),n.d(t,"getApiUrl",(function(){return c})),n.d(t,"sendFetchTimeMark",(function(){return u}));var r=n("../../node_modules/tslib/tslib.es6.js"),i=n("./src/modules/instance/index.ts"),o=n("./src/modules/error/index.ts"),s=n("./src/modules/load/index.ts"),a=n("./src/modules/data-error/index.ts");function c(e,t){var n=i.etherCmsInstance.apiUrl,r={serverdata:"/efir/api/appdata",timestamp:"/efir/api/timestamp",channels:"/portal/tvstream_json/channels",player:"".concat(n,"player/").concat(t,".json"),episodes:"".concat(n,"episodes.json"),mychannel:"".concat(n,"mychannel/episodes.json"),doc2doc:"".concat(n,"doc2doc"),feed:"".concat(n,"feed.json"),carousel:"".concat(n,"carousel_videohub.json"),collection:"".concat(n,"collection"),blogger:"".concat(n,"blogger"),live_feed:"".concat(n,"live_feed"),theme:"".concat(n,"theme"),search:"".concat(n,"search"),series_seasons:"".concat(n,"series_seasons.json"),series_episodes:"".concat(n,"series_episodes.json"),my_subscriptions:"".concat(n,"my_subscriptions"),filter_identities:"".concat(n,"filter_identities"),favorites:"".concat(n,"favorites"),top_carousels:"".concat(n,"top_carousels.json")};if(r[e])return r[e];Object(o.onError)({method:"getApiUrl",message:"wrong api name: "+e,source:"code",meta:{name:e}})}function u(e,t){var n="cms.fetch."+e;i.etherCmsInstance._rumLib.timeEnd(n,t)}function d(e,t){var n,d=i.etherCmsInstance._baseParams,l=["channels","serverdata","timestamp"].indexOf(e)<0,h=t&&t.content_id,f=c(e,h),p=Object(r.__assign)(Object(r.__assign)({},t),d);return f?(t&&t.from&&(p.from=t.from),"serverdata"===e&&(delete p.reqid,delete p.hash),n=i.etherCmsInstance._rumLib.getTime(),Object(s.load)({url:f,name:e,data:p,xhrFields:{withCredentials:!0}}).then((function(t){return n&&u(e,n),l&&Object(a.checkErrors)(t),t}))):Promise.reject(Object(o.onError)({message:"ajax: no url"}))}function l(e){var t={};return e&&(t.reqid=e.reqid,t.apphostReqid=e["apphost-reqid"],e["search-reqid"]&&(t.searchReqid=e["search-reqid"])),t}},"./src/modules/data-error/index.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"checkErrors",(function(){return i}));var r=n("./src/modules/instance/index.ts");function i(e){var t=e.errors,n={invalid_region:"region",no_licenses:"licenses",old_browser:"browser",future_vod_release:"future_vod"},i=["invalid_region","no_licenses","old_browser"];r.etherCmsInstance.settings.disableFutureVod||i.push("future_vod_release"),i.map((function(i){var o=t&&t[i]?t[i]:[];e.error===i&&e.content&&o.push(e.content.content_id),o.forEach((function(e){r.etherCmsInstance.forbidden[e]=n[i]}))}))}},"./src/modules/error/index.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"onError",(function(){return a})),n.d(t,"getErrorParams",(function(){return s}));var r=n("../../node_modules/tslib/tslib.es6.js"),i=n("./src/modules/instance/index.ts"),o=n("./src/modules/session/index.ts");function s(e,t){var n=Object(r.__assign)(Object(r.__assign)({},t.meta),e.meta),i=Object(o.getSessionParams)();return i&&(n.from=i.from,n.from_block=i.from_block),t.message&&t.message!==e.message&&(e.message=(e.message?e.message+"; ":"")+t.message||""),e.block=e.block||"stream-cms",e.method=e.method||"onError",e.sourceType=e.sourceType||"logic",e.meta=n,Object.assign(t,e),e}function a(e,t,n){t||(t=new Error(e.message||e.method||"onError")),e=s(e,t);var r=function(){e.message===t.message&&delete e.message,i.etherCmsInstance._errorLib.logError(e,t)};return n?setTimeout(r,0):r(),t}},"./src/modules/init/index.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"init",(function(){return s}));var r=n("../../node_modules/tslib/tslib.es6.js"),i=n("./src/modules/session/index.ts"),o=n("./src/modules/error/index.ts");function s(e,t){var n,s;if(t.errorLib&&(e._errorLib=t.errorLib),t.rumLib&&(e._rumLib=t.rumLib),n=t.disabled,s=t.isPartialServerData,t.settings){if(e.settings=t.settings,e.settings.isMorda){var a=e.settings.exp||{};a.ether_graphql=!1,a.ether_graphql_queue=!1}t.settings.apiUrl&&(e.apiUrl=e.settings.apiUrl+"/"),t.settings.graphqlUrl&&(e.graphqlUrl=e.settings.graphqlUrl)}n||s||t.settings?(e.reqparamsCms=t.reqparamsCms||{},e._sessionParams=t.sessionParams,e._baseParams=Object(r.__assign)({},e.reqparamsCms),Object(i.setSessionParams)()):Object(o.onError)({method:"_init",message:"stream-cms._init: no settings !!!"})}},"./src/modules/instance/index.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"etherCmsInstance",(function(){return o}));var r=n("./src/core/index.ts"),i="undefined"!=typeof Ya&&Ya.streamCms,o=new r.EtherCms(i||void 0)},"./src/modules/load/index.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"load",(function(){return s}));var r=n("../../node_modules/tslib/tslib.es6.js"),i=n("../../tmpl/stream-react/src/lib/url/index.ts"),o=n("./src/modules/error/index.ts");function s(e){var t,n=e.method||"GET";return new Promise((function(s,a){var c,u="GET"===n?Object(i.addQueryToUrl)(e.url,e.data||{}):e.url,d=new XMLHttpRequest,l=function(t,i){a(Object(o.onError)({message:(e.name?e.name+" ":"")+"load: "+t,method:"load",source:"vh",sourceMethod:e.name,meta:Object(r.__assign)({response:"wrong JSON"===t&&d.responseText,status:d.status},"GET"===n?e.data:{})},i,!0))};d.open(n,u,!0),e.xhrFields&&Object.assign(d,e.xhrFields),d.onload=function(){var e;if(d.status>=200&&d.status<400){if(!d.responseText)return l("empty response");try{return e=JSON.parse(d.responseText),void s(e)}catch(e){return l("wrong JSON",e)}}return l("bad status")},d.onerror=function(){return l("bad response")},"GET"!==n&&(c=e.data,t="string"==typeof c?e.data:JSON.stringify(e.data)),d.send(t||"")}))}},"./src/modules/session/index.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"setSessionParams",(function(){return a})),n.d(t,"getSessionParams",(function(){return c}));var r=n("../../node_modules/tslib/tslib.es6.js"),i=n("../../tmpl/stream-react/src/lib/extractPartialFields/index.ts"),o=n("./src/modules/instance/index.ts"),s=["reqid","service","from","from_block","locale","hash","distr_id"];function a(e){void 0===e&&(e={}),o.etherCmsInstance._sessionParams=Object(r.__assign)(Object(r.__assign)({},o.etherCmsInstance._sessionParams),e),o.etherCmsInstance._baseParams=Object(r.__assign)(Object(r.__assign)({},o.etherCmsInstance._baseParams),Object(i.extractPartialFields)(o.etherCmsInstance._sessionParams,s))}function c(){return o.etherCmsInstance._sessionParams}},"./src/modules/vhnotify/index.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"initXiva",(function(){return y})),n.d(t,"subscribe",(function(){return S})),n.d(t,"unsubscribe",(function(){return E}));var r,i=n("../../node_modules/tslib/tslib.es6.js"),o=n("../../tmpl/stream-react/src/lib/parseJSONSafe/index.ts"),s=n("../../tmpl/stream-react/src/lib/error/index.ts"),a=n("./src/modules/xiva/index.ts"),c=n("./src/modules/error/index.ts"),u={},d=[],l={service:"vhnotify",client:"ether"};function h(e){var t=e.detail;Object(c.onError)({message:"xiva closed connection, "+t.errorText,meta:{closeCode:t.closeCode,isFatal:t.isFatal}})}function f(e){return e.handler+"*"+e.id}function p(e,t){u[e]&&u[e].forEach((function(e){return e(t)}))}function m(e,t){return Object(c.onError)({message:"error on xiva, vhnotify",source:"vh",sourceMethod:e},t)}function _(e){var t,n=e.detail,r=n.message,i=n.tags,a=n.operation,c=i.filter((function(e){return e!==a}))[0],u=f({handler:a,id:c});switch(a){case"streams":if(t=Object(o.parseJSONSafe)(r),Object(s.isError)(t))return void m("streams",t);p(u,t);break;case"viewers":if(t=Object(o.parseJSONSafe)(r),Object(s.isError)(t))return void m("viewers",t);p(u,t)}}function y(e){if(e.session&&e.user){var t=Object(i.__assign)(Object(i.__assign)({},l),e);r||((r=new a.Xiva).connect(t),r.addEventListener("error",h),r.addEventListener("message",_))}else Object(c.onError)({message:"initXiva: no session or user",method:"initXiva",source:"code",sourceMethod:"xiva",meta:{session:e.session,user:e.user}})}function v(e,t){return e+":"+t.join("+")}function g(e){r||Object(c.onError)({message:"Xiva is not inited",source:"code",sourceMethod:"xiva",method:e})}function b(e){r.reconnect({service:v("vhnotify",e)})}function S(e,t){if(g("subscribe"),"function"==typeof t){var n=f(e);u[n]||(u[n]=[],d.push(n),b(d)),u[n].push(t)}}function E(e,t){g("subscribe");var n=f(e),i=u[n];i&&t&&i.splice(i.indexOf(t),1),i.length&&t||(delete u[n],d.splice(d.indexOf(n),1),d.length?b(d):r.disconnect())}},"./src/modules/xiva/index.ts":function(e,t,n){"use strict";n.r(t),n.d(t,"Xiva",(function(){return d}));var r=n("../../node_modules/tslib/tslib.es6.js"),i=n("../../tmpl/stream-react/src/lib/url/index.ts"),o=n("../../tmpl/stream-react/src/lib/backoff/index.ts"),s=n("../../tmpl/stream-react/src/lib/parseJSONSafe/index.ts"),a=n("../../tmpl/stream-react/src/lib/error/index.ts");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u={api:"wss://push.yandex.ru/v2/subscribe/websocket",reconnectParams:{reconnectionDelayMin:100,reconnectionDelayMax:1e4,reconnectionFactor:1.5,reconnectionJitter:.1,reconnectionMaxAttempts:1/0}},d=function(){function e(e,t){c(this,"_ws",void 0),c(this,"_apiUrl",void 0),c(this,"_eventer",void 0),c(this,"_sessionParams",void 0),c(this,"_retries",void 0),c(this,"_timerResubscribe",void 0),c(this,"addEventListener",void 0),c(this,"removeEventListener",void 0);var n=t&&t.reconnectParams||u.reconnectParams;this._retries=new o.Backoff(n),this._apiUrl=t&&t.api||u.api,e&&(this._sessionParams=e),this._eventer=document.createDocumentFragment(),this.addEventListener=this._eventer.addEventListener.bind(this._eventer),this.removeEventListener=this._eventer.removeEventListener.bind(this._eventer),this._onOpen=this._onOpen.bind(this),this._onClose=this._onClose.bind(this),this._onMessage=this._onMessage.bind(this),this._onError=this._onError.bind(this)}return e.prototype.connect=function(e){if(!((e=e||this._sessionParams)&&e.user&&e.service))throw new Error("no session params or no user/service on Xiva.init");this._sessionParams=e,this._connect()},e.prototype.reconnect=function(e){this._sessionParams=Object(r.__assign)(Object(r.__assign)({},this._sessionParams),e),this._connect()},e.prototype.disconnect=function(){clearTimeout(this._timerResubscribe),this._unbindeEvents(),this._ws&&(this._ws.close(1e3),this._ws=null)},e.prototype.send=function(e){this._ws.send(e)},e.prototype._connect=function(){"function"==typeof WebSocket&&(this.disconnect(),this._ws=new WebSocket(this._prepareUrl()),this._bindEvents())},e.prototype._prepareUrl=function(){return Object(i.addQueryToUrl)(this._apiUrl,this._sessionParams)},e.prototype._unbindeEvents=function(){var e=this._ws;e&&(e.removeEventListener("open",this._onOpen),e.removeEventListener("close",this._onClose),e.removeEventListener("message",this._onMessage),e.removeEventListener("error",this._onError))},e.prototype._bindEvents=function(){var e=this._ws;e.addEventListener("open",this._onOpen),e.addEventListener("close",this._onClose),e.addEventListener("message",this._onMessage),e.addEventListener("error",this._onError)},e.prototype._onOpen=function(e){this._retries.reset(),this._dispatchEvent(e)},e.prototype._onClose=function(e){var t=this,n=this._retries.shouldRetry();this._ws=null,clearTimeout(this._timerResubscribe),n||setTimeout((function(){t._connect()}),this._retries.duration()),this._dispatchEvent(e);var r,i=e.code;1e3!==i&&(r=4400===i||4401===i||4500===i?e.reason:"unknown close code",this._dispatch("xivaError",{closeCode:i,errorText:r,isFatal:n}))},e.prototype._onMessage=function(e){var t=this,n=Object(s.parseJSONSafe)(e.data);if(!Object(a.isError)(n))return"ping"===n.operation?(clearTimeout(this._timerResubscribe),void(this._timerResubscribe=setTimeout((function(){return t._ws.close(1e3)}),1e3*(n["server-interval-sec"]+2)))):void this._dispatch("message",n);this._dispatch("error",n)},e.prototype._onError=function(e){this._dispatchEvent(e)},e.prototype._dispatch=function(e,t){var n=new CustomEvent(e,{detail:t});this._eventer.dispatchEvent(n)},e.prototype._dispatchEvent=function(e){var t=new CustomEvent(e.type,e);this._eventer.dispatchEvent(t)},e}()}})},4785:function(e,t,n){"use strict";var r=n(3157),i=n(6483),o=n(6593).Z,s=n(7166),a=n(9665);function c(e){this.params=e.params,this.query=e.query,this.ids=e.ids,this.expFlags=e.expFlags,this.container=e.container,this.player=e.player,this.requestInfo=e.requestInfo||{},this.serverError=e.serverError}var u=c.prototype;u._prepareVHParams=function(){var e=Object.create(this.params.data.content),t=this.params.data.content.actual_episode;if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.stream&&(e.withCredentials=Boolean(e.stream.withCredentials)),e.loop=Boolean(e.loop);var i=this.container.offsetWidth,o=this.container.offsetHeight,s="undefined"!=typeof window?window.devicePixelRatio:1;return e.meta&&(e.meta.announce_thumbnail=r.getURL(e.meta.announce_thumbnail,i,o,s)),e.thumbnail=r.getURL(e.thumbnail,i,o,s),e.onto_poster=r.getURL(e.thumbnail,i,o,s),e.cover=r.getURL(e.cover,i,o,s),e},u._getFeatureEventHandler=function(e,t){var n=this.player;return function(){var r=[e+":"+t].concat(arguments);n.trigger.apply(n,r)}},u._getHiddenControls=function(e){if(this.query.tv)return"*";var t=[];e.auto_fields&&e.auto_fields.player_controls_hidden&&(t=e.auto_fields.player_controls_hidden);var n=[].concat(t,this.query.hidden.split(","));return Object.keys(n.reduce((function(e,t){return i.isString(t)&&(t=t.trim())&&(e[t]=!0),e}),{})).join(", ")},u._getBrandPlayButton=function(e){return Boolean(e.can_play_on_efir&&e.auto_fields&&e.auto_fields.ether_watermark_required&&!this.expFlags.hide_brand_play_button)},u._getLiveOffset=function(e){return i.isNumber(this.query.live_offset)?this.query.live_offset:e.ugc_live?15:void 0},u.isPlayerConfigRequired=function(e){return!(this.serverError||e.ugc_live&&("offline"===e.ugc_live_status||"cancelled"===e.ugc_live_status||"ready"===e.ugc_live_status&&!e.reload_on_ready))},u.getSkinConfig=function(e){var t=this._getShareConfig(e),n=this._getBrandPlayButton(e),r=this._getFeatureParams(e),i=this._getHiddenControls(e),o=this._getLogoConfig(e),s=this._getTitleSettings(),a=this._getSubscribeButton(e);return{showBrandLogo:!1,showReportButton:this.query.report,showUnmuteButtonForAll:this.expFlags.force_unmute,shareConfig:t,showBrandPlayButton:n,logoConfig:o,features:r,hiddenControls:i,showSubscribeButton:a,title:s}},u.getPlayerConfig=function(){var e=this._prepareVHParams();if(this.preparedVHParams=e,!this.isPlayerConfigRequired(e))return e;var t=this.getSourceConfig(e),n=this._getAutoplay(),r=this._getLiveOffset(e),i=this.getSkinConfig(e),o={element:"player-container"+this.ids.id,source:t,skinParams:{skinConfig:i},autoplay:n,volume:this.query.volume,muted:this.query.mute,lang:this.requestInfo.lang,preload:this.query.preload,platform:this.query.platform,togglePlaybackOnVisibilityChange:this.query.play_on_visible,useAbdBundle:this.requestInfo.use_aab_bundle,useFriendlyFrame:this.query.use_friendly_frame,flags:this.expFlags,usePlayerApiMock:this.query.test_mode,liveOffset:r,slowConnection:this.requestInfo.slow_connection||this.query.slow_connection,maxBufferLength:this.expFlags.max_buffer_length,bandwidthEstimateOffset:this.expFlags.bandwidth_estimate_offset,logUrl:this.requestInfo.use_aab_bundle?this.requestInfo.logging_url:void 0,device:{id:this.query.device_id},backgroundColor:this.query.background_color,zenPreload:this.query.zen_preload,cacheSourcesCount:this.query.cache_sources_count,restoreTabSessionPlaybackProgress:this.expFlags.restore_playback_progress,loadSkin:this.query.skin};return this.params.disableOTTPlayerLoader&&(o.disableOTTPlayerLoader=!0),o},u.getSourceConfig=function(e){this._preparePlaybackParams(e),this._prepareAdParams(e);var t=String(this._getStreamParams(e)),n=this._getStreamsConfig(e),r=this._getAdConfig(e),i=this._getVideoInfo(e),o=this._getTrackings(e),s=this._getOTTParams(e),a=this._getStartPosition(e),c=this._getAdditionalParams(e),u=this._getPreview(e),d={streams:n=n.map((function(e){return e.url+=e.url.indexOf("?")>-1?"&":"?",e.url+=t,e})),adConfig:r,videoInfo:i,trackings:o,preview:u,startPosition:a,enableRemoteProgressSaving:this.query.remote_progress_saving||this.expFlags.progress,withCredentials:this.query.with_credentials||e.withCredentials,loop:e.loop||this.query.loop,additionalParams:c,context:s,passportRetpath:this.query.retpath};return this.params.data.scriptedEvents&&(d.scriptedEvents=this.params.data.scriptedEvents),this.query.scriptedEvents&&(d.scriptedEvents=this.query.scriptedEvents,delete this.query.scriptedEvents),d},u._preparePlaybackParams=function(e){e.start_time=parseInt(e.start_time)||void 0,e.finish_time=parseInt(e.finish_time),e.finish_time=isNaN(e.finish_time)?void 0:e.finish_time-1,e.dvr=parseInt(e.dvr)||void 0},u._prepareAdParams=function(e){e.imp_id=1,e.adConfig&&!e.adConfig.category&&(e.adConfig.category=1017)},u._getStreamParams=function(e){var t={clid:495,uuid:e.uuid,yandexuid:this.ids.yandexuid,slots:this.query.slots,from:this.query.from,"test-id":this.query["test-id"],audio_only:this.query.audio_only,start:e.start_time,end:e.finish_time,dvr:e.dvr,soft_max_res_height:this.expFlags.soft_max_res_height};function n(e,t){(e=parseFloat(e))==e&&(this[t]=e)}function r(e,t){i.isUndefined(e)||(this[t]=e)}return(this.query.with_ad_insertion||this.requestInfo.with_ad_insertion)&&(t.imp_id=e.imp_id,t.video_category_id=e.adConfig.category,t.target_ref=this.ids.bundle,t.partner_id=e.adConfig.partner_id),new o(t,{uuid:{set:function(e,t){i.isString(e)&&(this[t]=e)}},audio_only:{set:function(e,t){e&&(this[t]=1)}},"test-id":{set:n},imp_id:{set:n},video_category_id:{set:n},partner_id:{set:n},yandexuid:{set:r},slots:{set:r},start:{set:r},end:{set:r},dvr:{set:r},target_ref:{set:r},soft_max_res_height:{set:n}})},u._getStreamsConfig=function(e){var t=this.query.streams?this.query.streams:e.streams;return(Array.isArray(t)?t:[]).reduce((function(e,t){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);if(!n.url)return e;var i=n.id||"default";return e.defId||(e.defId=i),n.drmConfig=n.drmConfig||n.drm_config||void 0,delete n.id,delete n.options,delete n.drm_config,i===e.defId&&e.result.push(n),e}),{result:[],defId:""}).result},u._getAdConfig=function(e){if(this.query.adConfig)return this.query.adConfig;var t=e.adConfig,n=t||{};if(t){n.partnerId=t.partner_id||t.partnerId,n.category=t.category,n.videoContentId=t.video_content_id||t.videoContentId,n.videoContentName=t.video_content_name||t.videoContentName,n.videoGenreId=t.video_genre_id,n.videoGenreName=t.video_genre_name,n.hasPreroll=i.isBoolean(this.query.has_preroll)?this.query.has_preroll:t.hasPreroll,n.distrId=this.query.distr_id||t.distr_id,n.useAdSession=i.isBoolean(this.query.use_ad_session)?this.query.use_ad_session:t.useAdSession;var r=parseInt(n.partnerId);r&&(n.partnerId=r);var o=parseInt(n.category);o&&(n.category=o),t.video_publisher_id&&(n.videoPublisherId=t.video_publisher_id),t.video_publisher_name&&(n.videoPublisherName=t.video_publisher_name)}return this.query.vmap_id&&(n.vmapId=this.query.vmap_id),this.query.vmap_scenario_id&&(n.vmapScenarioId=this.query.vmap_scenario_id),i.isNumber(this.query.preferable_width)&&i.isNumber(this.query.preferable_height)&&(n.preferableAdSize={width:this.query.preferable_width,height:this.query.preferable_height}),n},u._getVideoInfo=function(e){var t=e.adConfig||{},n={videoContentId:e.content_id,videoContentName:e.title,videoPublisherId:t.video_publisher_id||"",videoPublisherName:t.video_publisher_name||""};return n.videoGenreId=String(t.video_genre_id||""),n.videoGenreName=String(e.genres||t.video_genre_name||""),Object.keys(n).reduce((function(e,t){var r=n[t];return r&&(e[t]=r),e}),{})},u._getTrackings=function(e){var t=[];e.trackingEvents&&(t=t.concat(e.trackingEvents)),e.stream&&e.stream.trackings&&e.stream.trackings.trackingEvents&&(t=t.concat(e.stream.trackings.trackingEvents));var n=this._getYaVideoTrackings(e);return n&&(t=t.concat(n).filter(Boolean)),{trackingEvents:t}},u._getSubscribeButton=function(){return{type:this.query.subscribe_button}},u._getEfirLink=function(e){return"https://"+(e.auto_fields&&e.auto_fields.sport_content?"yandexsport.ru/":"yandex.ru/")+"efir?stream_id="+e.content_id+"&from_block={{from_block}}_"+this.query.from},u._getShareConfig=function(e){if(this.query.share&&e.can_play_on_efir)return e.shareConfig?e.shareConfig:{link:this._getEfirLink(e)}},u._getPreview=function(e){return this.query.preview_src?this.query.preview_src:this.query.preview&&!this.query.streams?e.thumbnail:""},u._getFeatureParams=function(e){var t={};return e.skippableFragments&&e.skippableFragments.length&&this.query.skippable_fragments&&(t.SkippableFragments={skippableFragments:e.skippableFragments,autoSkipTimeout:5,buttonTitles:e.skippableFragmentsButtonTitles||{},controlsShowDuration:5}),t},u._getLogoConfig=function(e){return e.logoConfig?e.logoConfig:i.isObject(e.watermark)&&i.isString(e.watermark.src)?e.watermark:void 0},u._getTitleSettings=function(){if(this.query.meta===a.META_VIEW_MODE.none)return null;var e={name:this.query.m_title,description:this.query.m_desc};switch(this.query.meta){case a.META_VIEW_MODE.always:e.isVisible=!0;break;case a.META_VIEW_MODE.start:case a.META_VIEW_MODE.restriction_age:e.isVisible=!0,e.duration=this.query.m_duration;break;case a.META_VIEW_MODE.ui:e.isVisible=!0,e.visibleWithSkinOnly=!0}return e},u._getOTTParams=function(e){var t=e.ottParams;return t?(t.from=this.query.from,t.contentTypeID&&!t.contentTypeId&&(t.contentTypeId=t.contentTypeID),"cover"in e&&(t.cover=e.cover,t.thumbnailLogos=e.thumbnail_logos),t.container={context:this.query.platform||"",init:this._ottTriggerEvent.call(this,"placeholder:init"),mod:this.query.mod,paymentWidget:this._ottTriggerEvent.call(this,"placeholder:pay")},t):null},u._ottTriggerEvent=function(e){var t=this;return function(n){n.event===e&&t.player.trigger(n.event,[n])}},u._getStartPosition=function(e){return i.isNumber(this.query.t)?this.query.t:i.isNumber(e.progress)&&i.isNumber(e.duration)&&e.progress/e.duration>.95?0:this.expFlags.progress&&i.isNumber(e.progress)?e.progress:void 0},u._getYaVideoTrackings=function(e){if(!i.isObject(e))return null;var t={from:this.ids.from,from_block:this.ids.fromBlock,reqid:this.ids.reqid,yandexuid:this.ids.yandexuid,content_id:this.ids.contentId,channel_id:e.channel_id,stream_block:this.ids.streamBlock,duration:e.duration};return e.ottParams&&(t.licence=e.ottParams.monetizationModel,t.svod=e.ottParams.subscriptionType),s.getConfig(t)},u._getAdditionalParams=function(e){var t=e.additionalParams||{};if(this.ids.frontendVhReqid&&(t.frontend_vh_reqid=this.ids.frontendVhReqid),this.ids.reqid&&(t.reqid=this.ids.reqid),(e.puid||this.query.puid)&&(t.puid=e.puid||this.query.puid),e.content_id&&(t.content_id=e.content_id),this.ids.from&&(t.from=this.ids.from),this.ids.fromBlock&&(t.from_block=this.ids.fromBlock),this.ids.slots&&(t.slots=this.ids.slots),this.ids.streamBlock&&(t.stream_block=this.ids.streamBlock),e.channel_id&&(t.channel_id=e.channel_id),!Array.isArray(this.query["brand-safety-categories"])||e.adTags&&e.adTags["brand-safety-categories"]||(t["brand-safety-categories"]=this._prepareCategory("brand-safety-categories")),e.adTags)for(var n in e.adTags)e.adTags.hasOwnProperty(n)&&(t[n]=this._prepareCategory(n,e.adTags[n]));return t.sandboxVersion=this.ids.sandboxVersion,t},u._prepareCategory=function(e,t){var n=Array.isArray(this.query[e]),r=Array.isArray(t),i=null;return n||r?(i=n?r?this.query[e].concat(t):this.query[e]:t,"brand-safety-categories"===e?"["+i.join(",")+"]":i.join("\n")):null},u._getAutoplay=function(){var e=navigator&&navigator.connection&&navigator.connection.saveData,t=this.requestInfo.slow_connection||this.query.slow_connection;return!(this.expFlags.disable_autoplay_slow_connection&&this.expFlags.disable_autoplay_save_data&&t&&e)&&!(this.expFlags.disable_autoplay_slow_connection&&!this.expFlags.disable_autoplay_save_data&&t)&&!(!this.expFlags.disable_autoplay_slow_connection&&this.expFlags.disable_autoplay_save_data&&e)&&(i.isBoolean(this.query.allow_muted)?{allowMuted:this.query.allow_muted}:this.query.autoplay)},e.exports=c},6593:function(e,t,n){"use strict";var r=n(6483),i=function(){function e(t,n,i){var o,s={},a={};if(r.isObject(n))for(var c in n)if(n.hasOwnProperty(c)){var u=n[c];r.isObject(u)?(r.isUndefined(u.value)||(this[c]=u.value),r.isFunction(u.set)&&(s[c]=u.set),u.unsafe&&(a[c]=!0)):r.isUndefined(u)||(this[c]=u)}if(t){var d=r.isObject(t)?t:e.parse(t);for(var c in d)if(d.hasOwnProperty(c)){var l=this[c],h=s[c];s.hasOwnProperty(c)&&r.isFunction(h)?h.call(this,d[c],c):this[c]=d[c],this[c]!==l&&a[c]&&((o=o||{})[c]=this[c])}}o&&r.isFunction(i)&&i(o,this)}return e.parse=function(t,n,i){var o={};if(!t||!r.isString(t))return o;var s=t;"?"!==s[0]&&"#"!==s[0]||(s=s.slice(1));for(var a=decodeURIComponent,c=s.split(n||"&"),u=0;u<c.length;u++){var d=c[u].indexOf("=");-1!==d?o[a(c[u].slice(0,d))]=e.parseJSON(a(c[u].slice(d+1))):i&&(o[a(c[u])]=!0)}return o},e.parseJSON=function(e){try{return JSON.parse(e)}catch(t){return e}},e.prototype.toString=function(e,t,n){void 0===e&&(e="&"),void 0===t&&(t=!1),void 0===n&&(n=[]);var i,o=encodeURIComponent,s=this,a=Object.keys(s).filter((function(e){return!r.isUndefined(s[e])})).map((function(e){return i=s[e],r.isObject(i)&&(i=JSON.stringify(i)),n.indexOf(e)>-1?e+"="+i:o(e)+"="+o(i)})).join(e);return t&&(a+=e),a},e.prototype.appendTo=function(e){var t=this.toString();return t?(e+=e.indexOf("?")>-1?"&":"?",e+=t):e},e}();t.Z=i},6483:function(e,t){"use strict";t.__esModule=!0,t.isObject=t.isFunction=t.isString=t.isNumber=t.isBoolean=t.isUndefined=t.ENV=void 0,t.ENV={PRODUCTION:"production",TESTING:"testing",DEVELOPMENT:"development"},t.isUndefined=function(e){return void 0===e},t.isBoolean=function(e){return"boolean"==typeof e},t.isNumber=function(e){return"number"==typeof e&&e==e},t.isString=function(e){return"string"==typeof e},t.isFunction=function(e){return"function"==typeof e},t.isObject=function(e){return Boolean(e)&&"object"==typeof e}},3157:function(e,t,n){"use strict";var r=n(6483).isString,i=[{width:240,height:135,sizeString:"240x135"},{width:320,height:180,sizeString:"320x180"},{width:480,height:270,sizeString:"480x270"},{width:640,height:360,sizeString:"640x360"},{width:936,height:524,sizeString:"936x524"},{width:1920,height:1080,sizeString:"1920x1080"}],o=["get-ott","get-vh"],s=function(e){return(e=e.replace(/https?:\/\//i,"").replace(/\/\//i,"")).split("/")[1]||null};e.exports.THUMBNAIL_SIZE=i,e.exports.NAMESPACES=o,e.exports.getURL=function(e,t,n,a){if(r(e)){if(!t||!n)return e;if(a=(a||0)<1.5?1:2,-1===o.indexOf(s(e)))return e;var c=e,u=t<=n?t:n,d=t<=n?"width":"height",l=i.reduce((function(e,t){return!e&&u*a<=t[d]?t:e}),void 0);return l&&(c=e.replace("orig",l.sizeString)),c}},e.exports._getNamespace=s},7166:function(e,t,n){"use strict";var r=n(6593).Z,i="undefined"!=typeof window&&"http:"===location.protocol?"http:":"https:",o=["init","error","adStart","adEnd","start","play","pause","end","seek"],s=["rnd","fullscreen","mute","duration","timestamp","user_ts","watchedTime","vsid","error_code","position_from"],a="",c="";function u(e){return new r(e).toString("/",!0,s)}function d(e,t){var n={content_id:t.content_id,stream_block:t.stream_block,channel_id:t.channel_id,path:"player-events."+e};return"error"===e&&(n.error_code="{{error-code}}"),"seek"===e&&(n.position_from="{{old-position}}"),function(e){if(a&&e.reqid===c)return a;var t={reqid:c=e.reqid,yandexuid:e.yandexuid,select_event:"click",cid:73037,pid:197,dtype:"stred",source:e.from,from_block:e.from_block};return e.licence&&(t.licence=e.licence),e.svod&&(t.svod=e.svod),a=i+"//yandex.ru/clck/jclck/"+u(t)}(t)+u({rnd:"{{random}}",fullscreen:"{{fullscreen}}",mute:"{{muted}}",duration:"{{duration}}",timestamp:"{{timestamp}}",user_ts:"{{vts}}",watchedTime:"{{fts}}",vsid:"{{vsid}}"})+u(n)+"*"}e.exports._getDeepWatchDelay=function(e){return e<=180?.57*e:e<=1200?72+.17*e:e<=3600?252+.02*e:216+.03*e},e.exports.getConfig=function(e){var t={};return t.heartbeat=[[d("heartbeat",e),{delay:3e4}],[d("deep_watch",e),{delay:1e3*this._getDeepWatchDelay(e.duration),callsCount:1}]],o.forEach((function(n){t[n]=[d(n,e)]})),t}},4107:function(e){"use strict";e.exports.get=function(e){var t=new RegExp(e+"=([^;]+)","i"),n=document.cookie.match(t);return n&&n[1]?decodeURIComponent(n[1]):""}},9665:function(e,t,n){"use strict";var r=n(3520),i=n(9333),o=i.isFunction,s=i.isNumber,a=i.isUndefined,c=i.isObject,u={none:0,always:1,start:2,ui:3,restriction_age:4},d={plain:0,colourful:1,with_subscribe_info:2,with_subscribe_label:3},l=["desktop","touch","pad","app","tv","tvapp"],h=["default","live","paid","avod","alive"];function f(e){return-1!==h.indexOf(e)}function p(e){return e.reqid&&c(e.counters)&&!e.counters.reqid&&(e.counters.reqid=e.reqid),e.counters&&e.counters.reqid&&!e.reqid&&(e.reqid=e.counters.reqid),(e.tv||e.nativeui||e.test_mode)&&(e.recommendations=""),e}function m(e,t){this[t]=Boolean(e)}function _(e,t){this[t]=void 0!==e?Boolean(e):void 0}function y(e,t){!0===e&&(this[t]=e)}function v(e,t){e&&(this[t]=String(e))}function g(e,t){s(e)&&(this[t]=e)}function b(e,t){var n=Number(e);this[t]=s(n)?n:0}var S=!1;function E(e,t){!S&&Array.isArray(e)&&(S=!0,this[t]=e)}function x(){return{from:{value:"other",set:v},slots:null,distr_id:null,audio_only:!1,tv:{value:!1,set:m},loop:{value:!1,set:m},preload:{value:!1,set:m},report:{value:!0,set:m},preview:{value:!0,set:m},preview_src:{value:"",set:v},nativeui:{value:!1,set:m},use_friendly_frame:{value:!0,set:m},branding_intro:{value:!1,set:m},restore_playback_progress:{value:!1,set:m},remote_progress_saving:{value:!1,set:m},progress:{value:!0,set:m},start_position_confirmation:{value:!1,set:m},force_unmute:{value:!0,set:m},stream_cms:{value:!0,set:m},beta:{value:!1,set:y},event_prefix:{value:"",set:v},from_block:{value:"other",set:v},hidden:{value:"",set:v},device_id:{value:"",set:v},autoplay:{value:!0,set:function(e,t){0===e&&(this[t]=!1)}},allow_muted:{set:m},mute:{value:!1,set:_},volume:{set:function(e,t){s(e)&&e>=0&&e<=100&&(this[t]=e)}},play_on_visible:{set:function(e,t){s(e)?e>0&&e<=1&&(this[t]={threshold:e}):a(e)||"undefined"===e||(this[t]=Boolean(e))}},adConfig:{set:function(e,t){c(e)&&(this[t]=e)},unsafe:!0},streams:{set:function(e,t){Array.isArray(e)&&(this[t]=e)}},vmap_id:{set:b,unsafe:!0},vmap_scenario_id:{set:b,unsafe:!0},meta:{value:u.none,set:function(e,t){var n=u[String(e)];s(n)&&(this[t]=n)}},subscribe_button:{value:void 0,set:function(e,t){e=String(e),s(d[e])&&(this[t]=e)}},m_duration:{value:3e3,set:function(e,t){s(e)&&e>=0&&(this[t]=1e3*e)}},m_title:{value:null,set:v},m_desc:{value:null,set:v},recommendations:{value:"doc2doc",set:function(e,t){this[t]="off"!==e?e:""}},recommendations_count:{value:25,set:function(e,t){s(e)&&e>=0&&(this[t]=e)}},recommendations_should_make_set_source:{value:null,set:m},recommendations_permanent_titles_visibility:{value:!0,set:m},recommendations_only_fullscreen:{value:!1,set:m},recommendations_show_on_credits:{value:!1,set:m},hide_brand_play_button:{value:!1,set:m},live_offset:{set:function(e,t){s(e)&&e>=0&&(this[t]=e)}},recommendations_params:{value:{},set:function(e,t){c(e)&&(this[t]=e)}},platform:{set:function(e,t){l.indexOf(e)>-1&&(this[t]=e)}},mod:{value:"",set:v},t:{set:g},skippable_fragments:{value:!0,set:m},preferable_width:{set:g},preferable_height:{set:g},release_timeout:{value:0,set:g},retpath:{set:v},promo_config:{value:{},set:function(e,t){c(e)&&(this[t]=e)}},ya_station:{value:!0,set:m},share:{value:!0,set:m},has_preroll:{set:m,unsafe:!0},disable_update:{value:!1,set:m},velocity_metrics_sampled:{value:!0,set:m},test_mode:{value:!1,set:m},test_data:{value:"default",set:function(e,t){f(e)&&(this[t]=e)}},background_color:{set:v},zen_preload:{set:m},cache_sources_count:{set:b},scriptedEvents:{set:E}}}e.exports.META_VIEW_MODE=u,e.exports.PLATFORM=l,e.exports.setAsBoolean=m,e.exports.setAsNotRequiredBoolean=_,e.exports.setIsTrue=y,e.exports.setAsString=v,e.exports.setIsNumber=g,e.exports.setAsNumber=b,e.exports._getParamsDescriptor=x,e.exports._postGetQuery=p,e.exports.getQuery=function(e,t){if(!o(t))throw new Error("VHQuery: missing method for handling unsafe params.");return p(new r(e,x(),t.bind(this)))},e.exports.isValidPresetName=f},9608:function(e,t,n){"use strict";var r=n(9333),i=n(3520).default;e.exports.X=function(e,t){return function(n,o){if(!r.isFunction(o))throw new Error("VHQuery: missing method for handling unsafe params.");var s=new i(n,e(),o.bind(this));return t(s)}}},6517:function(e,t,n){"use strict";var r=n(3520),i=n(9333),o=n(9665),s=n(9608).X;for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e.exports[a]=o[a]);e.exports._getParamsDescriptor=function(){var e=o._getParamsDescriptor();return e.slow_connection={value:!1,set:o.setAsBoolean},e.with_credentials={value:!1,set:o.setIsTrue},e.with_ad_insertion={value:!1,set:o.setIsTrue},e.api_host={value:"",set:o.setAsString},e.tld={value:"",set:o.setAsString},e["brand-safety-categories"]={value:null,set:function(e,t){e=r.parseJSON(e),Array.isArray(e)?this[t]=e:i.isNumber(e)?this[t]=[e]:i.isString(e)&&e&&(this[t]=e.split(","))}},e.use_ad_session={set:o.setAsBoolean},e.disable_unsafe_log={value:!1,set:o.setAsBoolean},e.skin={set:function(e,t){i.isFunction(e)&&(this[t]=e),e||(this[t]=Boolean(e))}},e},e.exports.getQuery=s(e.exports._getParamsDescriptor,e.exports._postGetQuery)},5831:function(e,t,n){"use strict";var r=n(9665),i=n(9608).X;for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e.exports[o]=r[o]);e.exports._getParamsDescriptor=function(){return r._getParamsDescriptor()},e.exports.getQuery=i(e.exports._getParamsDescriptor,e.exports._postGetQuery)},3520:function(e,t,n){"use strict";t.__esModule=!0;var r=n(9333),i=function(){function e(t,n,i){var o,s={},a={};if(r.isObject(n))for(var c in n)if(n.hasOwnProperty(c)){var u=n[c];r.isObject(u)?(r.isUndefined(u.value)||(this[c]=u.value),r.isFunction(u.set)&&(s[c]=u.set),u.unsafe&&(a[c]=!0)):r.isUndefined(u)||(this[c]=u)}if(t){var d=r.isObject(t)?t:e.parse(t);for(var c in d)if(d.hasOwnProperty(c)){var l=this[c],h=s[c];s.hasOwnProperty(c)&&r.isFunction(h)?h.call(this,d[c],c):this[c]=d[c],this[c]!==l&&a[c]&&((o=o||{})[c]=this[c])}}o&&r.isFunction(i)&&i(o,this)}return e.parse=function(t,n,i){var o={};if(!t||!r.isString(t))return o;var s=t;"?"!==s[0]&&"#"!==s[0]||(s=s.slice(1));for(var a=decodeURIComponent,c=s.split(n||"&"),u=0;u<c.length;u++){var d=c[u].indexOf("=");-1!==d?o[a(c[u].slice(0,d))]=e.parseJSON(a(c[u].slice(d+1))):i&&(o[a(c[u])]=!0)}return o},e.parseJSON=function(e){try{return JSON.parse(e)}catch(t){return e}},e.prototype.toString=function(e,t,n){void 0===e&&(e="&"),void 0===t&&(t=!1),void 0===n&&(n=[]);var i,o=encodeURIComponent,s=this,a=Object.keys(s).filter((function(e){return!r.isUndefined(s[e])})).map((function(e){return i=s[e],r.isObject(i)&&(i=JSON.stringify(i)),n.indexOf(e)>-1?e+"="+i:o(e)+"="+o(i)})).join(e);return t&&(a+=e),a},e.prototype.appendTo=function(e){var t=this.toString();return t?(e+=e.indexOf("?")>-1?"&":"?",e+=t):e},e}();t.default=i},9333:function(e,t){"use strict";t.__esModule=!0,t.isObject=t.isFunction=t.isString=t.isNumber=t.isBoolean=t.isUndefined=t.ENV=void 0,t.ENV={PRODUCTION:"production",TESTING:"testing",DEVELOPMENT:"development"},t.isUndefined=function(e){return void 0===e},t.isBoolean=function(e){return"boolean"==typeof e},t.isNumber=function(e){return"number"==typeof e&&e==e},t.isString=function(e){return"string"==typeof e},t.isFunction=function(e){return"function"==typeof e},t.isObject=function(e){return Boolean(e)&&"object"==typeof e}},2783:function(e,t,n){"use strict";var r=n(1887),i=r.isObject,o=r.isString,s=r.isUndefined,a=r.isFunction;function c(e,t,n){var r,o,u,d,l={},h={};if(i(t))for(o in t)t.hasOwnProperty(o)&&(r=t[o],i(r)?(s(r.value)||(this[o]=r.value),a(r.set)&&(l[o]=r.set),r.unsafe&&(h[o]=!0)):s(r)||(this[o]=r));if(e)for(o in i(e)||(e=c.parse(e)),e)e.hasOwnProperty(o)&&(u=this[o],l.hasOwnProperty(o)?l[o].call(this,e[o],o):this[o]=e[o],this[o]!==u&&h[o]&&((d=d||{})[o]=this[o]));d&&a(n)&&n(d,this)}var u=c.prototype;u.toString=function(e,t,n){var r,o=encodeURIComponent,a=this;e=e||"&",n=n||[];var c=Object.keys(a).filter((function(e){return!s(a[e])})).map((function(e){return r=a[e],i(r)&&(r=JSON.stringify(r)),n.indexOf(e)>-1?e+"="+r:o(e)+"="+o(r)})).join(e);return t&&(c+=e),c},u.appendTo=function(e){var t=this.toString();return t?(e+=e.indexOf("?")>-1?"&":"?",e+=t):e},c.parse=function(e,t,n){var r={};if(!e||!o(e))return r;"?"!==e[0]&&"#"!==e[0]||(e=e.slice(1));var i,s,a,u,d=decodeURIComponent,l=e.split(t||"&");for(u=0;u<l.length;u++)-1!==(i=l[u].indexOf("="))?(s=d(l[u].slice(0,i)),a=d(l[u].slice(i+1)),a=c.parseJSON(a),r[s]=a):n&&(r[s=d(l[u])]=!0);return r},c.parseJSON=function(e){try{return JSON.parse(e)}catch(t){return e}},e.exports=c},1887:function(e){"use strict";function t(e){return"function"==typeof e}function n(e){return Boolean(e)&&"object"==typeof e}e.exports.ENV={PRODUCTION:"production",TESTING:"testing",DEVELOPMENT:"development"},e.exports.async=function(e,t){return setTimeout(e.bind(this),t||0)},e.exports.isUndefined=function(e){return void 0===e},e.exports.isBoolean=function(e){return"boolean"==typeof e},e.exports.isNumber=function(e){return"number"==typeof e&&e==e},e.exports.isString=function(e){return"string"==typeof e},e.exports.isFunction=t,e.exports.isObject=n,e.exports.safeCall=function(e){if(t(e)){var n=Array.prototype.slice.call(arguments,1);return e.apply(this,n)}},e.exports.mergeObjects=function e(t,r){if(n(t)||n(r)){if(Array.isArray(t)||Array.isArray(r))return[].concat(t,r);if(!n(t))return r;if(!n(r))return t;var i,o={};for(i in t)t.hasOwnProperty(i)&&(o[i]=t[i]);for(i in r)r.hasOwnProperty(i)&&(o[i]=e(o[i],r[i]));return o}}},7593:function(e,t,n){"use strict";var r=n(1887).isString,i=[{width:240,height:135,sizeString:"240x135"},{width:320,height:180,sizeString:"320x180"},{width:480,height:270,sizeString:"480x270"},{width:640,height:360,sizeString:"640x360"},{width:936,height:524,sizeString:"936x524"},{width:1920,height:1080,sizeString:"1920x1080"}],o=["get-ott","get-vh"],s=function(e){return(e=e.replace(/https?:\/\//i,"").replace(/\/\//i,"")).split("/")[1]||null};e.exports.THUMBNAIL_SIZE=i,e.exports.NAMESPACES=o,e.exports.getURL=function(e,t,n,a){if(r(e)){if(!t||!n)return e;if(a=(a||0)<1.5?1:2,-1===o.indexOf(s(e)))return e;var c=e,u=t<=n?t:n,d=t<=n?"width":"height",l=i.reduce((function(e,t){return!e&&u*a<=t[d]?t:e}),void 0);return l&&(c=e.replace("orig",l.sizeString)),c}},e.exports._getNamespace=s},827:function(e,t,n){"use strict";var r=n(2783),i="undefined"!=typeof window&&"http:"===location.protocol?"http:":"https:",o=["init","error","adStart","adEnd","start","play","pause","end","seek"],s=["rnd","fullscreen","mute","duration","timestamp","user_ts","watchedTime","vsid","error_code","position_from"],a="",c="";function u(e){return new r(e).toString("/",!0,s)}function d(e,t){var n={content_id:t.content_id,stream_block:t.stream_block,channel_id:t.channel_id,path:"player-events."+e};return"error"===e&&(n.error_code="{{error-code}}"),"seek"===e&&(n.position_from="{{old-position}}"),function(e){if(a&&e.reqid===c)return a;var t={reqid:c=e.reqid,yandexuid:e.yandexuid,select_event:"click",cid:73037,pid:197,dtype:"stred",source:e.from,from_block:e.from_block};return e.licence&&(t.licence=e.licence),e.svod&&(t.svod=e.svod),a=i+"//yandex.ru/clck/jclck/"+u(t)}(t)+u({rnd:"{{random}}",fullscreen:"{{fullscreen}}",mute:"{{muted}}",duration:"{{duration}}",timestamp:"{{timestamp}}",user_ts:"{{vts}}",watchedTime:"{{fts}}",vsid:"{{vsid}}"})+u(n)+"*"}e.exports._getDeepWatchDelay=function(e){return e<=180?.57*e:e<=1200?72+.17*e:e<=3600?252+.02*e:216+.03*e},e.exports.getConfig=function(e){var t={};return t.heartbeat=[[d("heartbeat",e),{delay:3e4}],[d("deep_watch",e),{delay:1e3*this._getDeepWatchDelay(e.duration),callsCount:1}]],o.forEach((function(n){t[n]=[d(n,e)]})),t}},1795:function(e,t,n){"use strict";n.r(t)},3699:function(e,t,n){"use strict";n.r(t)},8274:function(e,t,n){"use strict";n.r(t)},2425:function(e,t,n){"use strict";n.r(t)},2655:function(){!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){void 0===e&&(e=window),"Ya"in e||(e.Ya={}),"OTT"in e.Ya||(e.Ya.OTT={}),"PlayerLoader"in e.Ya.OTT||(e.Ya.OTT.PlayerLoader={})}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(2)),a=o(n(3)),c=(u.prototype.init=function(e){var t=(e.source||{}).context;if(!t)return this.useBasePlayer(e);var n=t.contentTypeId,r=t.licenses,i=(void 0===r?[]:r)[0];if(i&&!("active"in i))return this.usePlaceholder(e);if(20===n||21===n)return this.useWrapper(e);var o="production"===e.envName?"production":"testing",a=window.Ya.OTT.buildTrackings(e.source.context,{env:o});return e.source.trackings=s.default(a,e.source.trackings),this.useBasePlayer(e,!0)},u.prototype.usePlaceholder=function(e){var t=e.source,n=t.context,o=n.container,s=void 0===o?{}:o,c=n.licenses[0],u=i(n,["container","licenses"]),d=t.preview;e.element="string"==typeof e.element?document.getElementById(e.element):e.element;var l=this.getPlaceholderUrl();return(this.placeholderExists(s)?Promise.resolve():a.default(l,document.head)).then((function(){return window.Ya.OTT.Placeholder.main(r(r(r({container:s,thumbnail:d},u),c),{config:e}))})).then((function(t){return t.render(e.element)}))},u.prototype.useBasePlayer=function(e,t){void 0===t&&(t=!1);var n=e.version,r=e.useBetaStatic,i=this.getPlayerBundle(n,r);return(this.baseApiExists()?Promise.resolve():a.default(i,document.head)).then((function(){return window.Ya.playerApi.init(e)})).then((function(e){return{api:e,withWrapper:!1,withTrackings:t}}))},u.prototype.useWrapper=function(e){var t=this.getWrapperUrl();return(this.wrapperExists()?Promise.resolve():a.default(t,document.head)).then((function(){return window.Ya.OTT.Player.init(e)})).then((function(e){return{api:e,withWrapper:!0,withTrackings:!0}}))},u.prototype.baseApiExists=function(){return!!window.Ya&&!!window.Ya.playerApi},u.prototype.wrapperExists=function(){return!(!window.Ya||!window.Ya.OTT||!window.Ya.OTT.Player)},u.prototype.placeholderExists=function(e){return(void 0===e?{}:e).context,!!(window.Ya&&window.Ya.OTT&&window.Ya.OTT.Placeholder)&&!!window.Ya.OTT.Placeholder.main},u.prototype.getWrapperUrl=function(){return"https://yastatic.net/s3/kinopoisk-frontend/ott/player-wrapper/"+u.WRAPPER_VERSION+"/ott-player-wrapper.js"},u.prototype.getPlaceholderUrl=function(){return"https://yastatic.net/s3/kinopoisk-frontend/ott/player-placeholder/"+u.PLACEHOLDER_VERSION+"/ott-player-placeholder.js"},u.prototype.getPlayerBundle=function(e,t){return("http:"===location.protocol?"http://":"https://")+(t?"betastatic.yastatic.net":"yastatic.net")+(e?"/yandex-video-player-iframe-api-bundles/"+e+"/js/player-api-loader.js":"/yandex-video-player-iframe-api/js/player-api-loader.js")},u.WRAPPER_VERSION="3.13.0",u.PLACEHOLDER_VERSION="1.0.1",u);function u(){}t.default=c},function(e,t,n){"use strict";function r(e){return i.apply(void 0,e.map((function(e){return{trackingEvents:e}}))).trackingEvents}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0]?e[0].trackingEvents:{};Array.isArray(n)&&(n=r(n));for(var i=1;i<e.length;i++)!function(t){var i=e[t]?e[t].trackingEvents:{};Array.isArray(i)&&(i=r(i)),Object.keys(i).forEach((function(e){var t=i[e];Array.isArray(t)&&(e in n?Array.isArray(n[e])&&(n[e]=n[e].concat(t)):n[e]=t)}))}(i);return{trackingEvents:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return new Promise((function(n,r){var i=document.createElement("script");i.type="text/javascript",i.src=e,i.crossOrigin="anonymous",i.onload=n,i.onerror=r,t.appendChild(i)}))}},function(e,t,n){"use strict";n.r(t);var r="__VAL__",i=["yandexuid","position","serviceName","reqid","path","sid","uuid","kpId","kpTrailerId","contentTypeId","monetizationModel","subscriptionType","puid","page","domain","vars","testIds","eventId","subProfileId","buildTimestamp","pathId","deviceId","appVersion","platformOs","platformVersion","platformVendor","platformModel","platformVendorDeviceId","platformName","psid","fromBlock","fromBlockPosition","fromBlockItemPosition","fromBlockAction","fromBlockMLSessionId","fromBlockStartPage","fromBlockEndPage","fromBlockExternalLink","isLive"],o=["setSource","init","error","adStart","adEnd","heartbeat","watchedTime","viewed"],s={film:{default:o,kp:o},trailer:{default:o},channel:{default:o},episode:{default:o},"vod-broadcast-episode":{default:o},"music-clip":{default:o},"short-video":{default:o},"ott-trailer":{default:o}},a={1:"channel-family",2:"channel",3:"episode",4:"vod-library",5:"vod-episode",6:"tv-series",7:"tv-season",8:"black-window",9:"out-of-tv-channel",10:"type-folder",11:"zen-namespace",12:"zen-library",13:"zen-episode",14:"yandex-disribution-library",15:"yandex-disribution-episode",16:"emergency-black-window",17:"cv-black-window",18:"yandex-market-library",19:"yandex-market-episode",20:"ott-movie",21:"ott-episode",22:"kd-feed-episode",24:"sport-episode",25:"announce",30:"ntv-vod-library",31:"ntv-vod-movie",32:"ntv-vod-series",33:"ntv-vod-series-season",34:"ntv-vod-series-season-episode",35:"ott-multipart",36:"ott-part",37:"ott-trailer",38:"ott-collection",39:"ott-collection-item",40:"high-light",41:"user-episode",42:"vod-news",43:"vod-broadcast",44:"vod-news-episode",45:"vod-broadcast-episode",46:"snapshot-tv-episode",47:"kp-trailer",48:"ya-news",49:"self-service-bw-window",50:"main-black-window",51:"music-clip",82:"ott_linked_video",83:"ott_music_karaoke",84:"ott_linked_video_parent",85:"ott_music_karaoke_parent",86:"ott-vod-library",87:"ott_linked_trailer",88:"ott_linked_music_clip",122:"ott-video-episode"},c="content_duration_",u=[["1","content_start"],["10000",c+"10"],["20000",c+"20"],["30000",c+"30"],["40000",c+"40"],["50000",c+"50"],["60000",c+"60"],["120000",c+"120"]],d="VIDEO_",l=[["25",d+"25"],["50",d+"50"],["75",d+"75"],["90",d+"90"],["99",d+"END"]];t.default=function(e,t){var n;"contentTypeID"in(n=e)&&(n.contentTypeId=n.contentTypeID),e=function(e){for(var t=0;t<i.length;t++){var n=i[t];void 0===e[n]&&(e[n]="domain"===n?document.location.hostname:"buildTimestamp"===n?Date.now():"-")}return e}(e=n);var o,c,d,h,f,p,m=(c={testing:{counterId:45961911,kpCounterId:48924764,vpCounterId:45151398,spCounterId:51357310},production:{counterId:45913512,kpCounterId:48924740,vpCounterId:31713861,spCounterId:51357310}})[o=t.env]?c[o]:c.testing,_=(h={testing:{ottTrackingsBackend:"https://tracking-testing.ott.yandex.net/v1/",metrikaBackend:"https://mc.yandex.ru/watch/",redirlogBackend:"https://yandex.ru/clck/jclck/"},production:{ottTrackingsBackend:"https://tracking.ott.yandex.net/v1/",metrikaBackend:"https://mc.yandex.ru/watch/",redirlogBackend:"https://yandex.ru/clck/jclck/"}})[d=t.env]?h[d]:h.testing,y={},v=e.serviceName,g=(f=e.contentTypeId)in(p={47:"trailer",20:"film",21:"film",51:"music-clip",87:"channel",88:"channel",122:"short-video",37:"ott-trailer",3:"episode",45:"vod-broadcast-episode"})?p[String(f)]:"film";return(v in s[g]?s[g][v]:s[g].default).forEach((function(e){y[e]=function(e,t,n){var r,i,o,s,a,c,d=[];"trailer"===t?(r="{{metrikaBackend}}{{vpCounterId}}?page-ref=yandex.ru&page-url=goal://{{domain}}/","init"===e?d.push('{{metrikaBackend}}{{vpCounterId}}?page-ref=yandex.ru&site-info={"kp_trailers":{"host":{"{{serviceName}}":{"{{kpId}}":{"{{uuid}}":"{{kpTrailerId}}"}}}}}&page-url=goal://{{domain}}/TRAILER_START'):"adStart"===e?d.push(r+"TRAILER_AD_START"):"adEnd"===e?d.push(r+"TRAILER_AD_END"):"viewed"===e&&d.push([r+"TRAILER_50",{percent:50}],[r+"TRAILER_90",{percent:90}])):(i='{{metrikaBackend}}<<COUNTER_NAME>>?page-ref=yandex.ru&site-info={"{{serviceName}}":{"{{fromBlock}}":{"<<EVENT_NAME>>":{"{{uuid}}":{"{{position}}":"{{monetizationModel}}"}}}}}',"setSource"!==e&&"init"!==e||(a=(s=i.replace("<<EVENT_NAME>>","video_start")).replace("<<COUNTER_NAME>>","{{counterId}}"),d.push(a+"&page-url=goal://{{domain}}/VIDEO_START"),"init"===e&&"kp"===n&&(o=s.replace("<<COUNTER_NAME>>","{{kpCounterId}}"),d.push(o+"&page-url=goal://{{domain}}/VIDEO_START"))),"adStart"!==e&&"adEnd"!==e||(a=(s=i.replace("<<EVENT_NAME>>",h="adStart"===e?"VIDEO_AD_START":"VIDEO_AD_END")).replace("<<COUNTER_NAME>>","{{counterId}}"),d.push(a),"kp"===n&&(c=s.replace("<<COUNTER_NAME>>","{{kpCounterId}}"),d.push(c))),"watchedTime"===e&&u.forEach((function(e){var t={offset:Number(e[0])},r=i.replace("<<EVENT_NAME>>",e[1]),o=r.replace("<<COUNTER_NAME>>","{{counterId}}");d.push([o,t]),"kp"===n&&d.push([r.replace("<<COUNTER_NAME>>","{{kpCounterId}}"),t]),"ya-sport"===n&&"120000"===e[0]&&d.push([r.replace("<<COUNTER_NAME>>","{{spCounterId}}")+"&page-url=goal://"+n+"/VIDEO_STREAM_2MIN",t])})),"viewed"===e&&l.forEach((function(e){var t={percent:Number(e[0])},r=(i+"&page-url=goal://{{domain}}/<<EVENT_NAME>>").replace(/<<EVENT_NAME>>/g,e[1]),o=r.replace("<<COUNTER_NAME>>","{{counterId}}");d.push([o,t]),"kp"===n&&d.push([r.replace("<<COUNTER_NAME>>","{{kpCounterId}}"),t])})));var h,f='{{ottTrackingsBackend}}watch?data={"position":"{{position}}","fromBlock":"{{fromBlock}}","serviceName":"{{serviceName}}","uuid":"{{uuid}}","puid":"{{puid}}","sid":"{{sid}}","vSid":"{{vsid}}","yaUID":"{{yandexuid}}","monetizationModel":"{{monetizationModel}}","contentTypeName":"{{contentTypeName}}","device-type":"{{device-type}}","device-type-tns":"{{device-type-tns}}","subscriptionType":"{{subscriptionType}}","page":"{{page}}","testIds":"{{testIds}}","eventId":"{{eventId}}","subProfileId":"{{subProfileId}}","deviceId":"{{deviceId}}","appVersion":"{{appVersion}}","platformOs":"{{platformOs}}","platformVersion":"{{platformVersion}}","platformVendor":"{{platformVendor}}","platformModel":"{{platformModel}}","platformVendorDeviceId":"{{platformVendorDeviceId}}","platformName":"{{platformName}}","psid":"{{psid}}","buildTimestamp":"{{buildTimestamp}}","pathId":"{{pathId}}","fromBlockPosition":"{{fromBlockPosition}}","fromBlockItemPosition":"{{fromBlockItemPosition}}","fromBlockAction":"{{fromBlockAction}}","fromBlockMLSessionId":"{{fromBlockMLSessionId}}","fromBlockStartPage":"{{fromBlockStartPage}}","fromBlockEndPage":"{{fromBlockEndPage}}","fromBlockExternalLink":"{{fromBlockExternalLink}}","isLive":"{{isLive}}"';if("setSource"!==e&&"init"!==e||d.push(f+',"eventType":"video_start","eventCount":"-","audio-track-lang":"{{audio-track-lang}}","audio-track-name":"{{audio-track-name}}","text-track-lang":"{{text-track-lang}}","text-track-name":"{{text-track-name}}"}'),"error"===e&&d.push(f+',"errorCode":"{{error-code}}","eventType":"player_error","eventCount":"-"}'),"adStart"!==e&&"adEnd"!==e||(h="adStart"===e?"VIDEO_AD_START":"VIDEO_AD_END",d.push(f+',"eventType":"'+h+'","eventCount":"-"}')),"heartbeat"===e){var p=void 0;switch(t){case"channel":case"short-video":case"ott-trailer":case"trailer":p=1e4;break;case"music-clip":p=3e4;break;default:p=6e4}d.push([f+',"timestamp":"{{timestamp}}","vts":"{{vts}}","fts":"{{fts}}","fullscreen":"{{fullscreen}}","eventType":"heartbeat","eventCount":"'+p+'","audio-track-name":"{{audio-track-name}}","audio-track-lang":"{{audio-track-lang}}","text-track-name":"{{text-track-name}}","text-track-lang":"{{text-track-lang}}","mute":"{{muted}}"}',{delay:p,offset:p}])}return"watchedTime"===e&&u.forEach((function(e){var t={offset:Number(e[0])};d.push([f+',"eventType":"'+e[1]+'","eventCount":"'+e[0]+'","audio-track-lang":"{{audio-track-lang}}","audio-track-name":"{{audio-track-name}}","text-track-lang":"{{text-track-lang}}","text-track-name":"{{text-track-name}}"}',t])})),"viewed"===e&&l.forEach((function(e){var t={percent:Number(e[0])};d.push([f+',"eventType":"'+e[1]+'","eventCount":"'+("99"==e[0]?"100":e[0])+'"}',t])})),d}(e,g,v)})),e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e[0],r=1;r<e.length;r++){var i=e[r];if("object"==typeof i)for(var o in i)n[o]=i[o]}return n}(e,m,_,{contentTypeName:a[e.contentTypeId]||"unknown"}),{trackingEvents:JSON.parse(function(e,t,n){void 0===t&&(t={});var i={}.macros,o=void 0===i?"{{"+r+"}}":i,s={};Object.keys(t).forEach((function(e){var n=o.replace(r,e);s[n]=t[e]}));var a=new RegExp("("+Object.keys(s).join("|")+")","ig");return("string"==typeof e?e:JSON.stringify(e)).replace(a,(function(e){return e in s?encodeURI(s[e]):e}))}(y,e))}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(4)),o=r(n(0)),s=r(n(1));o.default(),window.Ya.OTT.buildTrackings=i.default,window.Ya.OTT.PlayerLoader={init:function(e){return(new s.default).init(e)}}}])},1107:function(e,t,n){!function(){"use strict";function e(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))}var t=setTimeout;function r(e){return Boolean(e&&void 0!==e.length)}function i(){}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function s(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,o._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void c(t.promise,e)}a(t.promise,r)}else(1===e._state?a:c)(t.promise,e._value)}))):e._deferreds.push(t)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void u(e);if("function"==typeof n)return void l((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,u(e)}catch(t){c(e,t)}var r,i}function c(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&o._immediateFn((function(){e._handled||o._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)s(e,e._deferreds[t]);e._deferreds=null}function d(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function l(e,t){var n=!1;try{e((function(e){n||(n=!0,a(t,e))}),(function(e){n||(n=!0,c(t,e))}))}catch(e){if(n)return;n=!0,c(t,e)}}o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(i);return s(this,new d(e,t,n)),n},o.prototype.finally=e,o.all=function(e){return new o((function(t,n){if(!r(e))return n(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);var o=i.length;function s(e,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var a=r.then;if("function"==typeof a)return void a.call(r,(function(t){s(e,t)}),n)}i[e]=r,0==--o&&t(i)}catch(e){n(e)}}for(var a=0;a<i.length;a++)s(a,i[a])}))},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o((function(t){t(e)}))},o.reject=function(e){return new o((function(t,n){n(e)}))},o.race=function(e){return new o((function(t,n){if(!r(e))return n(new TypeError("Promise.race accepts an array"));for(var i=0,s=e.length;i<s;i++)o.resolve(e[i]).then(t,n)}))},o._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){t(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var h=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("unable to locate global object")}();"Promise"in h?h.Promise.prototype.finally||(h.Promise.prototype.finally=e):h.Promise=o}()},5622:function(e,t,n){n(7923),Sandbox.Cookies=n(4107)},98:function(){Sandbox.static((function(e){var t=e.Sandbox,n=t.ErrorHandler=t.ErrorHandler||{};n.createVarsString=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&(e[n]||0===e[n])&&t.push(n+"="+encodeURIComponent(e[n]).replace(/\*/g,"%2A"));return t.join(",")},n.normalizeError=function(e){var n=t.isObject(e.meta)?e.meta:{};try{n.query=decodeURIComponent(t.getLocation().search),n.hash=decodeURIComponent(t.getLocation().hash)}catch(e){}return{env:t.getEnv(),page:t.StaticLinks.SANDBOX_NAME,version:t.StaticLinks.VERSION,level:e.level||"error",reqid:e.reqid||"empty",yandexuid:e.yandexuid,service:e.service,file:e.filename||e.fileName,line:e.lineno||e.lineNumber,col:e.colno||e.colNumber,stack:e.error&&e.error.stack||e.stack||"",message:e.message,additional:n,path:"690.2361",slots:e.slots||""}},n.sendCounter=function(e){var r=["//yandex.ru/clck/jclck","dtype=stred","path="+e.path,"reqid="+e.reqid,"slots="+e.slots,"vars="+n.createVarsString({143:"28.1434","-env":e.env,"-yandexuid":e.yandexuid,"-service":e.service,"-version":e.version,"-page":e.page,"-level":e.level,"-msg":e.message,"-url":e.file,"-line":e.line,"-col":e.col,"-stack":e.stack,"-additional":JSON.stringify(e.additional),"-ua":navigator.userAgent,"-project":"video-player"}),"*"+t.getLocation().href].join("/");n.reportError(r)},n.reportError=function(e){try{-1===navigator.userAgent.indexOf("UCBrowser")&&navigator.sendBeacon&&navigator.sendBeacon(e," ")||(document.createElement("img").src=e)}catch(e){}},n.filterError=function(e){var t=e.stack||e.error&&e.error.stack;return[/\/video-player\/[^\/]*\/?bundles-common\//,/\/video-player\/[^\/]*\/?pages-common\//].some((function(e){return e.test(t)}))},n.handleError=function(e){if(n.filterError(e)){var t=n.normalizeError(e);n.sendCounter(t)}},e.addEventListener("error",n.handleError)}))},6070:function(e,t,n){n(7923),n(98)},1993:function(){!function(e){var t=e.Sandbox;if(t.isES5=function(){"use strict";var t=Boolean(Date&&Date.prototype&&Date.prototype.toISOString),n=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame,r=e.MutationObserver||e.WebKitMutationObserver,i=document.visibilityState||document.mozVisibilityState||document.msVisibilityState||document.webkitVisibilityState;return Boolean(!this&&Object.create&&Array.isArray&&Function.prototype.bind&&t&&n&&r&&i)}(),t.getDeprecationError=function(){return'<div class="es5-support"><div class="es5-support__container"><div class="es5-support__header">${textHeader}</div><div class="es5-support__paragraph">${textParagraph}</div></div></div>'.replace("${textHeader}","Ваш браузер устарел").replace("${textParagraph}","Он не поддерживает современные веб-стандарты, и поэтому в нём не будет работать плеер. Вы можете обновить свой браузер или установить другой — более современный.")},!t.isES5){var n=function(){};t.static=n,t.init=function(e){return t._getContainer(e).innerHTML=t.getDeprecationError(),this},t.decl=n}}(window)},229:function(e,t,n){n(7923),n(1795),n(1993)},9243:function(e,t,n){n(7923),Sandbox.Query=n(2783)},7923:function(e,t,n){!function(e){var t=e.Sandbox=e.Sandbox||function(t){this.init?this.init(t):e.console&&e.console.error&&e.console.error("Sandbox was just declared but init is not defined yet")};t.static=function(n,r,i){var o=function(){try{return JSON.parse(localStorage.getItem("debugSandbox"))}catch(e){return!1}}();r&&!o?t.tryCatch(n,i):n.call(e.Sandbox,e,document)},t.getEnv=function(){return t.StaticLinks&&t.StaticLinks.BUCKET&&t.StaticLinks.BUCKET.env?t.StaticLinks.BUCKET.env:t.ENV.PRODUCTION},t.getLocation=function(){return e.location},t._getContainer=function(e){var n;return e&&e.container instanceof HTMLElement&&(n=e.container),e&&t.isString(e.container)&&(n=document.querySelector(e.container)),n||(n=document.body),n},t.tryCatch=function(n,r){var i=t.isFunction(r)?r:t.ErrorHandler.handleError,o=t.isFunction(n);try{o&&n.call(e.Sandbox,e,document)}catch(e){i(e)}};var r=n(1887);for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}(window),n(9997),n(6070)},7641:function(e,t,n){n(7923),n(229),n(6070),n(9243),n(1418),n(8878)},1418:function(){Sandbox.static((function(e,t,n){var r=e.Sandbox,i=r.prototype;function o(){var e,t;for(t=r.initHandlers.length-1;t>-1;t--)(e=r.initHandlers[t]).calls=e.calls||{},e.calls[this.id]||(e.calls[this.id]=!0,e.call(this))}r.isUndefined(r._id)&&(r._id=0),r.ALLOWED_METHODS=["play","pause","seek","seekForward","seekBackward","setVolume","mute","unmute","setQuality","getAudioTrack","getAudioTracks","setAudioTrack","sendReportLog","playInrollAd","updateSource","setFullscreen"],r.INIT_TIME=(new Date).getTime(),r.initHandlers=[],r.instances=[],r._isDomReady=!1,i.callMethod=function(e){if(Sandbox.isObject(e)&&Sandbox.isString(e.method)&&0===e.method.indexOf(this.EVENT_PREFIX)){var t,i=e.method.substring(this.EVENT_PREFIX.length);if(r.ALLOWED_METHODS.indexOf(i)<0)this._returnMethodResult(i,e.id,n,"Method forbidden");else if(r.isFunction(this[i])){try{t=this[i].call(this,e)}catch(t){return void this._returnMethodResult(i,e.id,n,t.message)}if(Sandbox.isObject(t)&&Sandbox.isFunction(t.then)&&Sandbox.isFunction(t.catch))return t.then(function(t){this._returnMethodResult(i,e.id,t)}.bind(this)),void t.catch(function(t){t=Sandbox.isObject(t)?t.message:t,this._returnMethodResult(i,e.id,n,t)}.bind(this));this._returnMethodResult(i,e.id,t)}else this._returnMethodResult(i,e.id,n,"Method was not implemented")}},i._returnMethodResult=function(e,t,n,r){var i=e+":return",o={};t&&(o.id=t),Sandbox.isUndefined(n)||(o.result=n),r&&(o.error=r),this.trigger(i,o)},i.__props__={EVENT_PREFIX:"sandbox:"},i._isInIframe=function(){return e.top!==e},i.init=function(t){var i;return r.clone({source:this.__props__,destination:this}),r.isObject(t)?this.params=t:(i=[e.location.search.slice(1),e.location.hash.slice(1)].filter(Boolean).join("&"),this.params=new Sandbox.Query(i,this.getDefaultParams())),this.useIframe=this._isInIframe(),r.isObject(this.params.counters)&&(this.counters=this.params.counters,this.params.counters=n),this.container=Sandbox._getContainer(this.params),this.id=r._id++,o.call(this),this.on(this.callMethod),r.instances.push(this),this},r.init=function(e){return r._isDomReady||(r._isDomReady=!0),new r(e)},r.decl=function(e,t){var s,a;for(s in Sandbox.isFunction(t)&&t.call(e,e),e)if(e.hasOwnProperty(s)){if(a=e[s],"init"===s&&r.isFunction(a)){r.initHandlers.push(a);continue}if(!r.isFunction(a)){i.__props__[s]=a;continue}i[s]=a}r._isDomReady&&r.instances.forEach((function(e){r.clone({source:i.__props__,destination:e,mergeFunction:function(e,t){return e!==n?e:t}}),o.call(e)}))},i.on=function t(n){function i(e){var t=e.data||{},n=r.instances;if(r.isString(t))try{t=JSON.parse(t)}catch(e){}n.forEach((function(e){e.handlers.forEach((function(n){n.call(e,t)}))}))}this.handlers=this.handlers||[],this.handlers.push(n),t.listen||(t.listen=!0,e.addEventListener?e.addEventListener("message",i):e.attachEvent("onmessage",i))},i.trigger=function(t,n){this.rememberEvent(t,n);var r=JSON.parse(JSON.stringify(n||{}));r.event=this.EVENT_PREFIX+t,r=JSON.stringify(r),e.parent.postMessage(r,"*")},i.rememberEvent=function(e,t){this.eventsStory=this.eventsStory||[],this.eventsStory.push([e,t]),this.eventsStory.length>100&&this.eventsStory.shift()},i.getDefaultParams=function(){return{}},r.appendIFrameParams=function(e,t){t&&e&&(e.src=new Sandbox.Query(t).appendTo(e.src))},r.clear=function(e){var t=r.instances.indexOf(e);-1!==t&&r.instances.splice(t,1)},r.clone=function e(t){var n=t.source,r=t.destination,i=t.mergeFunction||function(e,t){return t};if(Array.isArray(n)){r=r||[];for(var o=0;o<n.length;o++)r[o]=i(r[o],e({source:n[o],mergeFunction:i}));return r}if(Sandbox.isObject(n)){for(var s in r=r||{},n)n.hasOwnProperty(s)&&(r[s]=i(r[s],e({source:n[s],mergeFunction:i})));return r}return n}}))},9997:function(e,t,n){n(1700)},1700:function(e,t,n){var r;(r=window.Sandbox.StaticLinks={}).SANDBOX_NAME="vh-player-js",r.VERSION="0xb9852995dfc",r.BUCKET=Object(n(5645)),r.BUCKET.url=("http:"===location.protocol?"http:":"https:")+r.BUCKET.url},3840:function(){var e;Sandbox.decl({PLAYER_EVENTS_SUPPORTED:!0,REPLACE_ENDED_EVENT:!1,YANDEX_DOMAINS:["yandex.ru","yandex.com","yandex.net","yandex.com.tr","yandex.com.ge","yandex.com.am","yandex.co.il","yandex.ua","yandex.by","yandex.kz","yandex.uz","yandex.az","yandex.kg","yandex.lv","yandex.lt","yandex.md","yandex.tj","yandex.tm","yandex.fr","yandex.ee","yastatic.net","yandex.st","yandex-team.ru","yandex-team.com","yandex-team.com.ua","yandex-team.net.ua","yandex-team.com.tr","ya.ru","chef.yandex","yadi.sk","kinopoisk.ru","kinopoisk.ua","kinopoisk.by","kinopoisk.tel","iframe-toloka.com"],UGC_LIVE:{STATUS:{offline:"offline",ready:"ready",onair:"onair",finished:"finished",cancelled:"cancelled"},TEXT:{cancelled:"Трансляция отменена",offline:"Трансляция ещё не началась"}},MAX_RETRIES_COUNT:1,documentWasAlwaysActive:!0,_isPlayerDead:!0,init:function(){var e,t;this._vhPlayerInit(this),Sandbox.isUndefined(document.hidden)?Sandbox.isUndefined(document.webkitHidden)||(e="webkitHidden",t="webkitvisibilitychange"):(e="hidden",t="visibilitychange");var n=this;e&&t&&(this.documentWasAlwaysActive=!document[e],document.addEventListener(t,(function(){n.documentWasAlwaysActive&&(n.documentWasAlwaysActive=!1)})))},_vhPlayerInit:function(e){if(Sandbox.isObject(this.params)){var t,n=Sandbox.isObject(this.params.queryConfig)?this.params.queryConfig:this._getLocationSearch();if(this.query=Sandbox.VHQuery.getQuery(n,this._logUnsafeQueryParams.bind(this)),this.counters=this.query.counters,this.EVENT_PREFIX=this.query.event_prefix,this.query.test_mode){var r=this.query.test_data,i=Sandbox.presets&&Sandbox.presets[r];t=i?Promise.resolve(i):new Sandbox.VH.Provider(r,{apiHost:"playerweb-stands.s3.yandex.net"}).loadTest("mediabox-test-presets")}else t=Promise.resolve(this.params.data);t=t.then(function(e){this.params.data=e,this.data=e.content,this.userData=e.user_data,this.serverError=e.error,this.requestInfo=e.request_info||{},this.expFlags=Sandbox.ExpFlags.parse(this.requestInfo.flags,this.query.mb_flags),this._validateExpFlags(this.expFlags),this.query.release_timeout&&(this.data.release_date=Math.floor(Date.now()/1e3+this.query.release_timeout)),this.player=new Sandbox.YaPlayer(this.expFlags.version,this.query.beta),this.player.on(this._playerEventAdapters,this),this.player.on(this._ottPlaceHolderEventAdapters,this),this.player.isAd=!1,this.ids=this._getIds(),this._videoDuration=Number.MAX_VALUE,this.retriesCount=0,this.defaultSkin=Sandbox.isUndefined(this.query.skin),this.isOnAir=!1,this.xivaSubscribed=!1,this.viewersNumberUgcLive=null,this.streamCms=this.query.stream_cms?Ya.streamCms:void 0,this.query.test_mode||(this.vhVelocityMetrics=new Sandbox.VHVelocityMetrics),this.streamCms&&this.streamCms.init({settings:{},sessionParams:{reqid:this.ids.reqid,service:this.query.service,from:this.query.from},errorLib:{logError:this._logError.bind(this)}}),this._initContainer()}.bind(this)),this.creatingPromise=t.then((function(){return e.initPlayer()}))}else this.creatingPromise=Promise.reject(new Error("Invalid sandbox params"))},getBundles:(e=Sandbox.prototype.getBundles,function(){var t=e&&e.call(this);return this.serverError||(t=Array.isArray(t)?t:[],this.query.recommendations&&"service"!==this.query.recommendations&&t.push({name:"ya-recommendations",exceptCSS:!0})),t}),trigger:function(e){return function(t,n){return n=n||{},this.player.isReady()&&(n.isMuted=this.player.getState().muted,Sandbox.isUndefined(n.time)&&(n.time=this.player.getState().currentTime)),e.call(this,t,n)}}(Sandbox.prototype.trigger),initPlayer:function(e){e&&(this.params=e,this.data=e.data.content,this.serverError=e.data.error),e&&e.queryConfig&&(this.query=Sandbox.VHQuery.getQuery(e.queryConfig,this._logUnsafeQueryParams.bind(this)),this.counters=this.query.counters),this.data.ottParams&&Sandbox.isNumber(this.data.restriction_age)&&(this.query.meta=Sandbox.VHQuery.META_VIEW_MODE.restriction_age,this.query.m_duration=8e3,this.query.m_title=this.data.restriction_age+"+"),this.vhConfig=new Sandbox.VHConfig(this);var t=this.vhConfig.getPlayerConfig(),n=this._getAnnounce(),r=this._getAnnounceRelease();if(this.data.release_date=parseInt(this.data.release_date,10),this.serverError)return this._showAccessError(this.serverError,t.thumbnail),Promise.resolve();if(this.data.ugc_live){if(this.isOnAir)return Promise.resolve();if(this.viewersNumberUgcLive=Sandbox.isNumber(this.data.viewers)?this.data.viewers:this.viewersNumberUgcLive,this.xivaSubscribed||this._subscribeXiva(t.thumbnail),this.isOnAir=this.data.ugc_live_status===this.UGC_LIVE.STATUS.onair,this.data.ugc_live_status===this.UGC_LIVE.STATUS.cancelled)return this._showUGCAnnounce(t.thumbnail,this.UGC_LIVE.TEXT.cancelled),Promise.resolve();if(this.data.ugc_live_status===this.UGC_LIVE.STATUS.offline||this.data.ugc_live_status===this.UGC_LIVE.STATUS.ready&&!this.data.reload_on_ready)return this._showUGCAnnounce(t.thumbnail,this.UGC_LIVE.TEXT.offline),Promise.resolve();if(!this.data.streams)return this._logError({message:"UGC-live: no streams",level:"error"}),this._showAccessError(Sandbox.VHError.ACCESS_ERROR_LABELS.unexpected,t.thumbnail),Promise.resolve()}return Sandbox.isObject(this.counters)&&(this.counters.licence=t.source.context&&Sandbox.isString(t.source.context.monetizationModel)?t.source.context.monetizationModel:"",this.counters.svod=t.source.context&&Sandbox.isString(t.source.context.subscriptionType)?t.source.context.subscriptionType:""),r&&r.isFutureDate(this.data.release_date)?(r.setBackground(this.data.thumbnail,"rgba(41, 43, 58, .6)").setTime(this.data.release_date).setLabel(this.data.title).setVideoId(this.data.can_play_on_efir?this.data.content_id:"").onStart(this.initPlayer,this).show(),Promise.resolve()):(t.source.update=this._getVHData.bind(this),this.player.init(t).then((function(){n&&n.hide()})))},_subscribeXiva:function(e){this.streamCms&&(this.streamCms.initXiva({session:this.ids.reqid,user:this.ids.yandexuid||"anonim"}),this.streamCms.subscribe({handler:"streams",id:this.data.xiva_id},this._onMessageStreams.bind(this,e)),this.streamCms.subscribe({handler:"viewers",id:this.data.xiva_id},this._onMessageViewers.bind(this)),this.xivaSubscribed=!0)},_onMessageStreams:function(e,t){if(t&&t.content&&(this.player.trigger("onLiveStatusChanged",[t.content.ugc_live_status]),this.ids.ugcLiveStatus=t.content.ugc_live_status,!this.isOnAir))if(t.content.ugc_live_status!==this.UGC_LIVE.STATUS.cancelled){var n=this;t.content.ugc_live_status===this.UGC_LIVE.STATUS.onair&&r(t),t.content.ugc_live_status===this.UGC_LIVE.STATUS.ready&&this.data.reload_on_ready&&new Sandbox.VH.Provider(this.data.content_id,{apiHost:this.query.api_host}).load("player",this.query).then((function(e){r(e)}))}else this._showUGCAnnounce(e,this.UGC_LIVE.TEXT.cancelled);function r(e){n.player.isReady()&&n.destroyPlayer();var t=n._getAnnounce();t&&t.hide(),n.initPlayer({data:e})}},_onMessageViewers:function(e){e&&e.viewers&&(this.viewersNumberUgcLive=e.viewers,this.player.trigger("onViewersNumberChanged",[e.viewers]),this.trigger("viewersNumberChanged",e.viewers))},destroyPlayer:function(){return this._hasPlayerStarted=!1,this._isPlayerDead=!0,this.xivaSubscribed&&(this.streamCms.unsubscribe({handler:"streams",id:this.data.xiva_id}),this.streamCms.unsubscribe({handler:"viewers",id:this.data.xiva_id}),this.xivaSubscribed=!1),this.player.destroy()},updatePlayer:function(e){e&&(this.data=e.data.content,this.userData=e.data.user_data,this.serverError=e.data.error);var t=this.vhConfig.getPlayerConfig();return this.serverError?(this._showAccessError(this.serverError,t.thumbnail),this.destroyPlayer(),Promise.resolve()):(Sandbox.isObject(this.counters)&&(this.counters.licence=t.source.context&&Sandbox.isString(t.source.context.monetizationModel)?t.source.context.monetizationModel:"",this.counters.svod=t.source.context&&Sandbox.isString(t.source.context.subscriptionType)?t.source.context.subscriptionType:""),t.autoplay=!0,this.player.update(t))},updateSource:function(e){var t=e.id,n=e.params,r=new Sandbox.VH.Provider(t),i=this;r.load("player",n).then((function(e){var t,r={data:e,queryConfig:n};!i.player||i.serverError?t=i.creatingPromise=i.initPlayer(r):i.player.isReady()?t=i.setSourcePlayer(r).then((function(){i.trigger("inited")})):(i.player.destroy(),t=i.creatingPromise=i.initPlayer(r)),t.catch((function(){if(i.serverError){var t=i.vhConfig.getPlayerConfig();i.announce=void 0,i._showAccessError(i.serverError,t.thumbnail)}i.onError("Can not set source for player",e)}))})).catch((function(){i.onError("Can not load source for player",e)}))},_prepareVHData:function(e){this._hasPlayerStarted=!1,this.params=e,this.data=this.params.data.content,this.serverError=this.params.data.error;var t=e.queryConfig;return t&&(this.query=Sandbox.VHQuery.getQuery(t,this._logUnsafeQueryParams.bind(this))),this.data.ottParams&&Sandbox.isNumber(this.data.restriction_age)&&(this.query.meta=Sandbox.VHQuery.META_VIEW_MODE.restriction_age,this.query.m_duration=8e3,this.query.m_title=this.data.restriction_age+"+"),this.vhConfig=new Sandbox.VHConfig(this),this.vhConfig._prepareVHParams()},_prepareSourceConfig:function(e){if(this.serverError)return this._showAccessError(this.serverError,e.thumbnail),void this.pause();var t=this._getAnnounce();t&&t.hide();var n=this.vhConfig.getSourceConfig(e);return n.update=this._getVHData.bind(this),n},setSourcePlayer:function(e){var t=this._prepareVHData(e),n=this._prepareSourceConfig(t);if(!n)return Promise.reject();this.setSourcePromise=this.player.setSource(n),this.defaultSkin&&(this.player.skin?this.player.skin.reconfigure(this.vhConfig.getSkinConfig(t)):this.player.on("SkinReady",function(){this.player.skin.reconfigure(this.vhConfig.getSkinConfig(t))}.bind(this)));var r=this;return r.query&&Sandbox.isObject(r.query.counters)&&(this.setSourcePromise=this.setSourcePromise.then((function(){r.counters=r.query.counters,r.initCounters(),Sandbox.Timer.reset()}))),this.query.autoplay&&(this.setSourcePromise=this.setSourcePromise.then((function(){r.player.play()}))),this.setSourcePromise},_getVHData:function(){if(!(this.retriesCount>=this.MAX_RETRIES_COUNT||this.query.disable_update)){var e=new Sandbox.VH.Provider(this.ids.contentId,{apiHost:this.query.api_host}).load("player",this.query),t=this;return e=e.then((function(e){var n=t._prepareVHData({data:e});return t._prepareSourceConfig(n)})),this.retriesCount++,e}},_playerEventAdapters:{onReady:function(e){this._player_api=e,this.query.test_mode||(this.vhVelocityMetrics.setLogMethod(this._player_api.logDelta.bind(this._player_api)),this.vhVelocityMetrics.send("readyPlayerAPI",this.query.velocity_metrics_sampled)),this.player._isPlayerReady=!0,this._isPlayerDead=!1,this.trigger("inited")},onStateChange:function(e){switch(e){case Sandbox.YaPlayer.PLAYING_STATE.play:var t=this._hasPlayerStarted?"resumed":"started",n=this.player.getState(),r=Sandbox.isObject(n)?n.duration:void 0;if(this.trigger(t,{duration:r}),this.query.meta===Sandbox.VHQuery.META_VIEW_MODE.restriction_age&&this.player.skin&&this.defaultSkin&&(this._previousState===Sandbox.YaPlayer.PLAYING_STATE.pause||!this._previousState)){var i=this.vhConfig._getTitleSettings();this.player.skin.configure({title:i}),clearTimeout(this._setTitleTimeout),this._setTitleTimeout=setTimeout(function(){this.player.skin.configure({title:{isVisible:!1}})}.bind(this),this.query.m_duration)}this._hasPlayerStarted=!0;break;case Sandbox.YaPlayer.PLAYING_STATE.pause:this.trigger("paused");break;case Sandbox.YaPlayer.PLAYING_STATE.end:this.onEnded(),this.trigger(this.REPLACE_ENDED_EVENT?"paused":"ended")}this._previousState=e},onAdStateChange:function(e){switch(e.state){case Sandbox.YaPlayer.AD_STATE.PLAYING:this.trigger("adShown");break;case Sandbox.YaPlayer.AD_STATE.NOT_PLAYING:this.trigger("adEnd")}},onAdPodStart:function(e){this.trigger("adPodStart",{adConfig:e&&e.adConfig,adType:e&&e.type})},BeforeAdPodStart:function(e){var t=e&&e.adPlaybackController;this.trigger("beforeAdPodStart",{assets:t&&t.getCurrentViewerAssets()})},onCurrentTimeChange:function(e,t,n){this.player.isReady()&&this.trigger("timeupdate",{time:e,utcTime:t,watchedTime:n,duration:this.player.getState().duration})},onVolumeChange:function(e){this.player.isReady()&&this.trigger("volumechange",{volume:e/100,muted:this.player.getState().muted})},onDurationChange:function(e){Sandbox.isNumber(e)&&e>0&&this.trigger("durationchange",{duration:e}),this._videoDuration=e},onVideoTracksChange:function(){this.setQuality({quality:this.query.maxQuality})},onError:function(e){(e=e||{}).isFatal&&(this.onError("Player API shut down after errors",{errorCode:e.details&&e.details.errorCode?e.details.errorCode:e.code,messageCode:e.details?e.details.messageCode:"",message:e.message,playerSrc:e.details?e.details.src:""}),this.trigger("error",{code:e.code})),e.isAccessError&&(this._logError({message:"Data error",meta:{errorCode:e.code,message:e.message},level:"warning"}),this.trigger("error",{code:e.code,message:e.message}))},onResourcesIdle:function(){this.trigger("resourcesIdle"),this.query.test_mode||this.vhVelocityMetrics.send("startedOrIdle",this.query.velocity_metrics_sampled)},onContentImpression:function(){this.query.test_mode||this.vhVelocityMetrics.send("startedOrIdle",this.query.velocity_metrics_sampled),this.trigger("contentImpression"),this.retriesCount=0},onUserReady:function(e){!this.query.test_mode&&this.documentWasAlwaysActive&&this.vhVelocityMetrics.send("userReady",this.query.velocity_metrics_sampled,e.type)},onPosterReady:function(){!this.query.test_mode&&this.documentWasAlwaysActive&&this.vhVelocityMetrics.send("posterReady",this.query.velocity_metrics_sampled)},onDestroy:function(){this._cleanPlayerContainer()},onVideoSizeChange:function(e){if(e&&0!==e.videoWidth&&0!==e.videoHeight){var t=this.player.getState(),n=t?t.adState:void 0,r={videoHeight:e.videoHeight,videoWidth:e.videoWidth,isAd:!!Sandbox.isObject(n)&&n.state===Sandbox.YaPlayer.AD_STATE.PLAYING};this.trigger("sizeChange",r)}},SkinReady:function(){this.defaultSkin&&(this.player.skin.updateExternalPlayerConfig(this.data.yastation_cast_cfg),this.query.meta!==Sandbox.VHQuery.META_VIEW_MODE.start&&this.query.meta!==Sandbox.VHQuery.META_VIEW_MODE.restriction_age||(this._setTitleTimeout=setTimeout(function(){this.player.skin.configure({title:{isVisible:!1}})}.bind(this),this.query.m_duration)),this.player.subscribeToSkinEvents(this._skinEventAdapters,this))}},_skinEventAdapters:{SubscribeButtonClick:function(){this.trigger("svodSubscribe"),this.setFullscreen(!1)},Seek:function(e){this.trigger("rewound",{time:e.newPosition,previousTime:e.oldPosition})}},_ottPlaceHolderEventAdapters:{"placeholder:init":function(e){this.trigger("placeholder:init",e)},"placeholder:pay":function(e){this.trigger("placeholder:pay",e)}},setAudioTrack:function(e){Sandbox.isString(e)&&this.player.setAudioTrack(e),Sandbox.isObject(e)&&this.player.setAudioTrack(e.value)},seek:function(e){Sandbox.isNumber(e)&&this.player.seek(e),Sandbox.isObject(e)&&this.player.seek(e.time)},seekForward:function(e){if(this.player.isReady()){var t=this.player.getState().currentTime,n=e&&e.interval||10;this.player.seek(t+n)}},seekBackward:function(e){if(this.player.isReady()){var t=this.player.getState().currentTime,n=e&&e.interval||10;this.player.seek(t-n)}},setVolume:function(e){if(Sandbox.isNumber(e)&&this.player.setVolume(e),Sandbox.isObject(e)){var t=e.volume>=0&&e.volume<=1?100*e.volume:e.volume;this.player.setVolume(t)}},mute:function(){this.setMuted(!0)},unmute:function(){this.setMuted(!1)},setQuality:function(e){var t={small:"240p",medium:"360p",large:"480p",hd720:"720p",hd1080:"1080p"}[e.quality]||e.quality,n=this.player.getState(),r=(n?n.videoTracks:[]).filter((function(e){return e.name===t}))[0];r&&r.value&&this.player.setVideoTrack(r.value)},setFullscreen:function(e){if(this.defaultSkin){var t=this;this.player.skin?n():this.player.on("SkinReady",n)}function n(){(Sandbox.isObject(e)?e.fullscreen:e)?t.player.skin.requestFullscreen():t.player.skin.exitFullscreen()}},getAudioTrack:function(){if(this.player.isReady())return this.player.getState().audioTrack},getAudioTracks:function(){if(this.player.isReady())return this.player.getState().audioTracks},getAdState:function(){if(this.player.isReady())return this.player.getState().adState},getDuration:function(){if(this.player.isReady())return this.player.getState().duration},getVersion:function(){if(this.player.isReady())return this.player.getState().version},getMuted:function(){if(this.player.isReady())return this.player.getState().muted},getVolume:function(){if(this.player.isReady())return 100*this.player.getState().volume},setHiddenControls:function(e){if(this.defaultSkin&&this.player&&Sandbox.isString(e)){var t=this;this.player.skin?n():this.player.on("SkinReady",n)}function n(){t.player.skin.configure({hiddenControls:e})}},insertInto:function(e){var t=Sandbox._getContainer({container:e});if(t===this.container)return Promise.resolve();if(t===document.body)throw new Error("А container for moving the player was not found");t.innerHTML="";for(var n=this._getInnerContainer(),r=this.createContainer("inner-container"),i="player-container"+this.id,o=Boolean(this.player.player)&&this.player.state!==Sandbox.YaPlayer.STATE.DESTROY&&this.player.state!==Sandbox.YaPlayer.STATE.DESTROYED,s=0;s<n.childNodes.length;s++)o&&n.childNodes[s].id===i||(r.appendChild(n.childNodes[s]),s--);t.appendChild(r);var a=this.container;return this.container=t,o?this.player.insertInto(r).then((function(){a.innerHTML=""})):(a.innerHTML="",Promise.resolve())},getViewersNumber:function(){return Sandbox.isNumber(this.viewersNumberUgcLive)?this.viewersNumberUgcLive:null},getUGCLiveStatus:function(){return this.ids.ugcLiveStatus},createContainer:function(e){var t=document.createElement("div");return t.id=e+this.id,this.params.disableStyles?(t.style.width="100%",t.style.height="100%"):t.className=e,t},onEnded:function(){},onError:function(e,t){this._isPlayerDead=!0,this._logError({message:e,meta:t,level:"error"})},_logError:function(e){var t=new Error(e.message);t.yandexuid=this.ids.yandexuid,t.reqid=this.ids.reqid,t.service=this.ids.from,t.level=e.level,t.slots=this.ids.slots,t.meta=e.meta||{},t.meta.vsid=this.ids.vsid,t.meta.puid=this.ids.puid,t.meta.contentId=this.ids.contentId,t.meta.fromBlock=this.ids.fromBlock,t.meta.streamBlock=this.ids.streamBlock,t.meta.isPlayerBeta=this.ids.isPlayerBeta,t.meta.v2=this.ids.v2,t.meta.playerVersion=this.ids.playerVersion,t.meta.ottWrapperEnabled=this.player.withOttWrapper,t.meta.ottTrackingsEnabled=this.player.withOttTrackings,Sandbox.ErrorHandler.handleError(t)},_getLocationSearch:function(){return location.search},_getAncestorOrigins:function(){return window.location.ancestorOrigins},_getLocationProtocol:function(){return window.location.protocol},_getDocumentReferrer:function(){return document.referrer},_logUnsafeQueryParams:function(e,t){t&&t.disable_unsafe_log||setTimeout(this._logError.bind(this,{message:"Service uses unsafe params",meta:{host:this._getDomain(),unsafeParams:e},level:"warning"}),1e3)},_validateExpFlags:function(e){e.version=e["videoplayer-version"]||this.query.version,e.progress=Sandbox.isBoolean(e.progress)?e.progress:this.query.progress,e.start_position_confirmation=Sandbox.isBoolean(e.start_position_confirmation)?e.start_position_confirmation:this.query.start_position_confirmation,e.force_unmute=Sandbox.isBoolean(e.force_unmute)?e.force_unmute:this.query.force_unmute,e.restore_playback_progress=Sandbox.isBoolean(e.restore_playback_progress)?e.restore_playback_progress:this.query.restore_playback_progress,e.hide_brand_play_button=Sandbox.isBoolean(e.hide_brand_play_button)?e.hide_brand_play_button:this.query.hide_brand_play_button},_getIds:function(){var e=this,t={yandexuid:Sandbox.Cookies.get("yandexuid"),reqid:this.query.reqid,from:this.query.from,isPlayerBeta:this.query.beta,v2:this.player.v2,id:this.id,bundle:this.player.bundle,sandboxVersion:Sandbox.StaticLinks.VERSION,ugcLiveStatus:this.data.ugc_live_status,slots:this.requestInfo.slots,frontendVhReqid:this.params.data["apphost-reqid"]||this.userData&&this.userData.req_id};return!t.reqid&&this.counters&&(t.reqid=this.counters.reqid),!t.reqid&&this.userData&&(t.reqid=this.userData.req_id),t.reqid||(t.reqid=""),Object.defineProperties(t,{playerVersion:{enumerable:!0,get:function(){var t=e.player.getState();if(t)return t.version}},contentId:{enumerable:!0,get:function(){return e.data.actual_episode?e.data.actual_episode.content_id:e.data.content_id}},vsid:{enumerable:!0,get:function(){var t=e.player.getState();if(t)return t.vsid}},puid:{enumerable:!0,get:function(){return e.data.actual_episode?e.data.actual_episode.puid:e.data.puid}},fromBlock:{enumerable:!0,get:function(){return e.query.from_block}},streamBlock:{enumerable:!0,get:function(){return e.query.stream_block||e.data.streamBlock}}}),t},_getInnerContainer:function(){return this.container.querySelector("#inner-container"+this.id)},_getAnnounceContainer:function(){return document.getElementById("announce-container"+this.id)},_getPlayerContainer:function(){return document.getElementById("player-container"+this.id)},_cleanPlayerContainer:function(){var e=this._getPlayerContainer();null!==e&&(e.innerHTML="")},_cleanInnerContainer:function(){var e=this._getInnerContainer();null!==e&&(e.innerHTML="")},_initContainer:function(){this.params.disableStyles?this.container.innerHTML='<div id="inner-container'+this.id+'"style="width: 100%; height: 100%;"><div id="player-container'+this.id+'"style="width: 100%; height: 100%;"></div><div id="announce-container'+this.id+'"></div></div>':(this.container.innerHTML='<div id="inner-container'+this.id+'"class="inner-container"><div id="player-container'+this.id+'"class="player-container"></div><div id="announce-container'+this.id+'"class="announce-container"></div></div>',this.container===document.body&&(document.documentElement.style.backgroundColor="#000",document.body.style.backgroundColor="#000"))},_getTopUrl:function(){var e=this._getAncestorOrigins();return e&&e.length?e[e.length-1]:this._getDocumentReferrer()||""},_getDomain:function(){return this._getTopUrl().replace(/https?:\/\//i,"").split(/[/?#]/)[0]},_isYandex:function(){if(!this.useIframe)return!0;var e=this._getDomain();return!!e&&this.YANDEX_DOMAINS.some((function(t){var n="."+t;return t===e||e.substring(e.length-n.length,e.length)===n}))},_showAccessError:function(e,t){var n=Sandbox.VHError.ACCESS_ERROR_LABELS[e]||Sandbox.VHError.ACCESS_ERROR_LABELS.unexpected,r=(e={isAccessError:!0,code:n.code,message:n.message},this._getAnnounce());r&&r.setTime(!1).setLabel(e.message).toggleLiveButton(!1).setBackground(t).show(),this._playerEventAdapters.onError.call(this,e)},_showUGCAnnounce:function(e,t){var n=this._getAnnounce();return n&&n.setLabel(t).toggleLiveButton(!1).setBackground(e).show(),n},_getAnnounce:function(){if(Sandbox.Announce){var e=this._getAnnounceContainer();if(null!==e)return this.announce||(this.announce=new Sandbox.Announce(e)),this.announce}},_getAnnounceRelease:function(){if(Sandbox.AnnounceRelease){var e=this._getPlayerContainer();if(null!==e)return this.announceRelease||(this.announceRelease=new Sandbox.AnnounceRelease(e)),this.announceRelease}}},(function(e){if(Sandbox.YaPlayer&&Array.isArray(Sandbox.YaPlayer.METHODS)){var t=["setAudioTrack","seek","setVolume","setQuality","insertInto"];Sandbox.YaPlayer.METHODS.forEach((function(n){t.indexOf(n)>-1||(e[n]=function(){return this.player[n].apply(this.player,arguments)})}))}}))},6305:function(e,t,n){n(7641),n(1415),n(236),n(6070),n(5622),n(2098),n(1256),n(3699),n(3840),n(8305),n(5817),n(6992),n(8525),n(5693),n(9437),n(4964)},3906:function(){Sandbox.static((function(e,t){var n=e.Ya=e.Ya||{},r=n.VH=n.VH||{},i=e.Sandbox=e.Sandbox||{};i.presets={};var o=r.Error=function(e,t){Error.call(this,e.message),this.message=e.message,e.apiUrl&&(this.apiUrl=e.apiUrl),this.documentation="https://wiki.yandex-team.ru/video/sandbox/error-vh-player-js/",Error.captureStackTrace?Error.captureStackTrace(this,r.init):this.stack=(new Error).stack,t&&(this.level=t.level,this.service=t.service,this.meta={},this.meta.reason=t.reason)};o.prototype=Object.create(Error.prototype);var s=(r.PlayerJS=function(e,n,r){if((e=Sandbox._getContainer({container:e}))===t.body)throw new o(new Error("Container was not found"));this._container=e,this._sandboxInstance=null,this._contentId=null,this._promise=null,n&&(this.update(n,r),this._contentId=n)}).prototype;s._vhReject=function(e){var t=new o(new Error(e));return i.ErrorHandler.handleError(t),Promise.reject(t)},s.update=function(e,t){if(!e||!i.isString(e)&&!i.isObject(e))return this._promise=this._vhReject("Incorrect data format"),this._promise;Sandbox.isObject(performance)&&Sandbox.isFunction(performance.now)&&(this._initJSAPI=performance.now());var n,r=this._augmentVHQueryConfig(t);if(r&&r.test_mode){var s=i.VHQuery.isValidPresetName(r.test_data)?r.test_data:"default";return i.isObject(i.presets[s])?this._update(i.presets[s],r):(n=new i.VH.Provider(s,{apiHost:"playerweb-stands.s3.yandex.net"}),this._promise=n.loadTest("mediabox-test-presets").then(function(e){return i.presets[s]=e,this._update(e,r)}.bind(this)),this._promise)}if(i.isString(e)){if(this._dataSource=Sandbox.VHVelocityMetrics.DATA_SOURCES.contentId,n=this._promise,e===this._contentId&&n)return n;n=new i.VH.Provider(e,{apiHost:Sandbox.isObject(r)?r.api_host:void 0,tld:Sandbox.isObject(r)?r.tld:void 0}),this._contentId=e;var a=this;return this._promise=n.load("player",r).then((function(e){return a._update(e,r)})).catch((function(e){var t=new o(e,{service:r&&r.from?r.from:"other"}),n=Sandbox.isNumber(e.responseCode)?a._getErrorLabel(e.responseCode):"";return e&&n?(a._sandboxInstance=i.init({data:{error:n,content:{}},container:a._container}),Promise.reject(t)):(i.ErrorHandler.handleError(t),Promise.reject(t))})),this._promise}if(Sandbox.isObject(e)){this._dataSource=Sandbox.VHVelocityMetrics.DATA_SOURCES.dataObject;var c=this.validateData(e);if(c){var u=new o(new Error(c),{service:r&&r.from?r.from:"other"});return this._promise=Promise.reject(u),this._promise}return this._contentId===e.content.content_id?(this._promise=Promise.resolve(this._sandboxInstance),this._promise):(this._contentId=e.content.content_id,this._promise=this._update(e,r),this._promise)}},s._update=function(e,t){var n={data:e,container:this._container,queryConfig:t},r=this,s=this._sandboxInstance;return s&&s.creatingPromise&&!s._isPlayerDead?s.creatingPromise.then((function(){return s.setSourcePlayer(n).then((function(){return s}))})):new Promise((function(e,a){var c=setTimeout((function(){a(new o(new Error("Player loading error")))}),15e3);return s=i.init(n),r._sandboxInstance=s,s.creatingPromise.then((function(){t&&!t.test_mode&&(r._sandboxInstance.vhVelocityMetrics.initSandbox=r._initJSAPI,r._sandboxInstance.vhVelocityMetrics.dataSource=r._dataSource),clearTimeout(c),s._isPlayerReady?e(s):s.player.on("onReady",(function(){e(s)}))})).catch((function(e){clearTimeout(c),a(e)}))}))},s.validateData=function(e){var t="";return i.isObject(e.content)?i.isString(e.content.content_id)?i.isObject(e.user_data)?i.isObject(e.request_info)?Array.isArray(e.content.streams)||e.error||e.content.ugc_live||(t="data.content.streams"):t='"request_info"':t='"user_data"':t="content.content_id":t='"content"',t?"Invalid data format: missing a required field "+t:""},s.insertInto=function(e){var t=this;if(t._sandboxInstance)return t._sandboxInstance.insertInto(e).then((function(){t._container=e}));var n=new o(new Error("VH.PlayerJS: Failed to move player"));return Sandbox.ErrorHandler.handleError(n),Promise.reject(n)},s.getViewersNumber=function(){var e=this;return this._promise.then((function(){return e._sandboxInstance.getViewersNumber()})).catch((function(e){var t=new o(new Error("VH.PlayerJS: Failed to get the number of users"),{reason:e});return Sandbox.ErrorHandler.handleError(t),Promise.reject(t)}))},s.getUGCLiveStatus=function(){var e=this;return this._promise.then((function(){return e._sandboxInstance.getUGCLiveStatus()})).catch((function(e){var t=new o(new Error("VH.PlayerJS: Failed to get status of ugc live"),{reason:e});return Sandbox.ErrorHandler.handleError(t),Promise.reject(t)}))},s.on=function(e){this._promise.then(function(){this._sandboxInstance.player.on(e)}.bind(this)).catch((function(e){var t=new o(new Error("VH.PlayerJS: Failed to subscribe to player and sandbox events"),{level:"warning",reason:e});Sandbox.ErrorHandler.handleError(t)}))},s.destroy=function(){var e=this;return this._promise.then((function(){return e._sandboxInstance.destroyPlayer().then((function(){i.clear(e._sandboxInstance),e._sandboxInstance.container.innerHTML="",e._sandboxInstance=null}))})).catch((function(t){e._sandboxInstance._cleanInnerContainer()}))},s._getErrorLabel=function(e){var t=Sandbox.VHError.ACCESS_ERROR_LABELS;for(var n in t)if(e===t[n].code)return n;return""},s._augmentVHQueryConfig=function(e){var t=e||{};if(!("adsdk-container-width"in t)||!("adsdk-container-height"in t)){var n=this._container.getBoundingClientRect();t["adsdk-container-width"]=n.width,t["adsdk-container-height"]=n.height}return t},r._loadCSS=function(){var e=Sandbox.StaticLinks.BUCKET,n=e.url;e.version&&(n+="/"+e.version+"/"),n+="pages-common/vh-player-js/_vh-player-js.css";var r=t.createElement("link");r.rel="stylesheet",r.href=n,t.getElementsByTagName("head")[0].appendChild(r)},r._loadCSS()}),!0)},8742:function(e,t,n){n(6305),n(7978),n(4009)},9952:function(){Sandbox.static((function(e,t,n){var r=e.Sandbox,i=r.AnnounceRelease=function(e){i.GUID=i.GUID||0,i.GUID++;var n="announce-release"+i.GUID;this._container=e,this._container.insertAdjacentHTML("beforeEnd",'<div id="'+n+'"></div>'),this._store=new r.Bender(t.getElementById(n),{hidden:!0,small:!1,background:"",shadowColor:"",title:"",subTitle:"Мы можем напомнить, чтобы вы не забыли его посмотреть",release:{month:null,day:null,time:null},link:{text:"Подписаться в Яндекс Эфире",videoId:""}}),this._store.toString=this.template},o=i.prototype;o.template=function(){if(this.hidden)return"";var e='style="display: none;"',t='style="display: inline;"',n='style="display: block;"',r={announceClasses:"",announceStyle:"",contentStyle:"",badgeStyle:e,monthContent:"",dayContent:"",titleStyle:e,titleContent:"",timeStyle:e,timeContent:"",subTitleStyle:e,subTitleContent:"",buttonAttrs:e,buttonContent:""};if(this.background&&(r.announceStyle='style="background-image: url(${url});"'.replace("${url}",this.escape(this.background))),this.shadowColor&&(r.contentStyle='style="background-color: ${color};"'.replace("${color}",this.escape(this.shadowColor))),this.title&&(r.titleStyle=t,r.titleContent=this.escape(this.title)),this.subTitle&&(r.subTitleContent=this.subTitle),this.release.month&&this.release.day&&(r.badgeStyle=n,r.monthContent=this.release.month,r.dayContent=this.release.day),this.release.time&&(r.timeStyle=t,r.timeContent=this.release.time),this.link.videoId){var i="https://yandex.ru/efir/?stream_id="+this.link.videoId+"&from=efir&from_block=videohub";r.buttonAttrs="",r.buttonAttrs+=' href="${url}"'.replace("${url}",i),r.buttonAttrs+=' target="_blank"',r.buttonAttrs+=" "+n,r.subTitleStyle=n}return this.link.text&&(r.buttonContent=this.link.text),this.small&&(r.announceClasses="announce-release_small",r.badgeStyle=e,r.timeStyle=n,r.subTitleStyle=e,r.buttonAttrs=e),Object.keys(r).reduce((function(e,t){return e.replace("${"+t+"}",r[t])}),'<div class="announce-release ${announceClasses}" ${announceStyle}><div class="announce-release__content" ${contentStyle}><div class="announce-release__badge" ${badgeStyle}><div class="announce-release__month">${monthContent}</div><div class="announce-release__day">${dayContent}</div></div><div class="announce-release__text"><div class="announce-release__title" ${titleStyle}>${titleContent}</div><span class="announce-release__time" ${timeStyle}> ${timeContent}</span><div class="announce-release__sub-title" ${subTitleStyle}>${subTitleContent}</div></div><a class="announce-release__button" ${buttonAttrs}><span class="announce-release__button-text">${buttonContent}</span></a></div></div>')},o.isFutureDate=function(e){return!!e&&e>Math.floor(Date.now()/1e3)},o.setBackground=function(e,t){return this._store.background=e,this._store.shadowColor=t,this},o.setLabel=function(e){return this._store.title=e,this},o.setTime=function(e){return this._time=r.isNumber(e)&&e>0?e:0,this},o.setVideoId=function(e){return this._store.link.videoId=e,this},o.onStart=function(e,t){return this._onStartCallback=e.bind(t),this},o.update=function(){if(this._store.hidden)return this;if(this._diff=this._time-Math.floor(Date.now()/1e3),this._diff<1)return this._onStartCallback&&(this._onStartCallback(),this._store.hidden=!0),this;this._store.release.time=this._diff<3600?i._formatDiff(this._diff):i._formatTime(this._time);var e=new Date(1e3*this._time);this._store.release.month=e.toLocaleString("ru",{month:"short"}).replace(".",""),this._store.release.day=e.getDate(),this._store.small=this._isSmall();var t=this._diff<7200?1e3*this._diff/2:36e5;return setTimeout(this.update.bind(this),t),this},o.show=function(){return this._store.hidden=!1,this.update(),this},o.hide=function(){return this._store.hidden=!0,this},o._isSmall=function(){return this._container.clientWidth<450||this._container.clientHeight<300},i._formatDiff=function(e){var t=Math.floor(e/60),n=Math.floor(t/10),r=t%10;if(e<0)return"уже идёт";if(t<1)return"сейчас начнётся";var i="через "+t;return 1===r&&1!==n?i+" минуту":r>1&&r<5&&1!==n?i+" минуты":i+" минут"},i._formatTime=function(e){var t=new Date(1e3*e),n=new Date,r=n.getFullYear(),i=n.getMonth(),o=n.getDate();if(new Date(r,i,o+3)<t)return t.toLocaleString("ru",{month:"long",day:"numeric",hour:"numeric",minute:"numeric"}).replace(",","");var s=t.getHours(),a=t.getMinutes();return s<10&&(s="0"+s),a<10&&(a="0"+a),new Date(r,i,o+2)<t?"послезавтра в "+s+":"+a:new Date(r,i,o+1)<t?"завтра в "+s+":"+a:"сегодня в "+s+":"+a}}))},8525:function(e,t,n){n(7923),n(948),n(8274),n(9952)},9189:function(){Sandbox.static((function(e,t,n){var r=e.Sandbox.Announce=function(e){return this._toLiveHandlers=[],this._domElem||(e.insertAdjacentHTML("beforeEnd",r._createHTML()),this._domElem=e.querySelector(".announce"),this._timeElem=this._domElem.querySelector(".announce__time"),this._labelElem=this._domElem.querySelector(".announce__label"),this._buttonElem=this._domElem.querySelector(".announce__button"),this._contentElem=this._domElem.querySelector(".announce__content"),this._buttonElem&&this._buttonElem.addEventListener("click",this._onButtonClick.bind(this))),this},i=r.prototype;i.setBackground=function(e,t){if(!this._domElem||e===this._background)return this;var r=this;return this._preloadImage(e,(function(){r._domElem.style.backgroundImage='url("'+e+'")',r._contentElem.style.backgroundColor=t||"",r._background=e}),(function(){r._domElem.style="",r._contentElem.style="",r._background=n})),this},i.setLabel=function(e){return this._labelElem&&e!==this._label?(this._labelElem.style.display=e?"inline":"none",this._labelElem.textContent=e,this._label=e,this):this},i.setTime=function(e){if(!this._timeElem)return this;if(this._timeElem.style.display=e?"inline":"none",e){var t=e-Math.floor((new Date).getTime()/1e3),n=t<3600?r._formatDiff(t):r._formatTime(e);n!==this._formattedTime&&(this._timeElem.textContent=n,this._formattedTime=n)}return this},i.toggleLiveButton=function(e){return this._buttonElem&&(this._buttonElem.style.display=e?"block":"none"),this},i.show=function(){return this._domElem&&this._domElem.classList.remove("announce_hidden"),this},i.hide=function(){return this._domElem&&this._domElem.classList.add("announce_hidden"),this},i.onLiveButtonClick=function(e,t){return"function"==typeof e&&this._toLiveHandlers.push({callback:e,context:t||this}),this},r._createHTML=function(){return'<div class="announce announce_hidden"><div class="announce__content"><div class="announce__text"><span class="announce__label" style="display: none;"></span><span class="announce__time" style="display: none;"></span></div><button class="announce__button" style="display: none;"><span class="announce__button-text">Прямой эфир</span></button></div></div>'},r._preloadedImages={},i._preloadImage=function(e,t,n){if(e)if("boolean"!=typeof r._preloadedImages[e]){var i=new Image;t&&(i.onload=function(){r._preloadedImages[e]=!0,t&&t()}),n&&(i.onerror=function(){r._preloadedImages[e]=!1,n&&n()}),i.src=e,function n(o){if("boolean"!=typeof r._preloadedImages[e]&&!(o<=0))return i.complete&&0!==i.naturalHeight?(r._preloadedImages[e]=!0,void(t&&t())):void setTimeout(n.bind(this,o-1),500)}(6)}else r._preloadedImages[e]?t&&t():n&&n();else n&&n()},r._formatDiff=function(e){var t=Math.floor(e/60),n=Math.floor(t/10),r=t%10;if(e<0)return"уже идёт";if(t<1)return"сейчас начнётся";var i="начнётся через "+t;return 1===r&&1!==n?i+" минуту":r>1&&r<5&&1!==n?i+" минуты":i+" минут"},r._formatTime=function(e){var t=new Date(1e3*e),n=new Date,r=n.getFullYear(),i=n.getMonth(),o=n.getDate();if(new Date(r,i,o+3)<t)return"начнётся "+t.toLocaleString();var s=t.getHours(),a=t.getMinutes();return s<10&&(s="0"+s),a<10&&(a="0"+a),new Date(r,i,o+2)<t?"начнётся послезавтра в "+s+":"+a:new Date(r,i,o+1)<t?"начнётся завтра в "+s+":"+a:"начнётся сегодня в "+s+":"+a},i._onButtonClick=function(){for(var e,t=this._toLiveHandlers.length,n=0;n<t;n++)(e=this._toLiveHandlers[n]).callback.call(e.context)}}))},6992:function(e,t,n){n(7923),n(2425),n(9189)},9524:function(){Sandbox.static((function(e){var t=e.Sandbox,n=t.Bender=function(e,t){this.__container=e,this._createState(this,t)},r=n.prototype;r._createState=function(e,n){var r=this,i={};for(var o in n)n.hasOwnProperty(o)&&function(e){if(t.isObject(n[e])&&!Array.isArray(n[e])){var o={};return r._createState(o,n[e]),void(i[e]={get:function(){return o}})}i[e]={get:function(){return n[e]},set:function(t){t!==n[e]&&(n[e]=t,r.render())}}}(o);Object.defineProperties(e,i)},r.render=function e(t){t?(e.planned&&(clearTimeout(e.planned),e.planned=!1),this.__container.innerHTML=this.toString()):e.planned||(e.planned=setTimeout(function(){e.call(this,!0),e.planned=!1}.bind(this),50))},r.escape=function(e){return e.replace(n.ESCAPE.REGEXP,(function(e){return n.ESCAPE.MAP[e]}))},n.ESCAPE={REGEXP:/[<>`'"]/g,MAP:{"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","`":"&#x60;"}}}))},948:function(e,t,n){n(7923),n(9524)},1168:function(){Sandbox.decl({init:function(){setTimeout(this._loadBundles.bind(this),1e3)},getBundles:function(){return[{name:"player-async",exceptCSS:!0}]},_loadBundles:function(){var e=Sandbox.StaticLinks.BUCKET,t=e.url;e.version&&(t+="/"+e.version),t+="/bundles-common";for(var n,r=document.querySelector("head"),i=this.getBundles(),o=0;o<i.length;o++){if("string"==typeof i[o])n={name:i[o],exceptCSS:!1,exceptJS:!1};else{if(!i[o]||"object"!=typeof i[o])continue;n=i[o]}n.exceptCSS||this._loadBundleStyle(r,t+"/"+n.name+"/_"+n.name+".css"),n.exceptJS||this._loadBundleScript(r,t+"/"+n.name+"/_"+n.name+".js")}},_loadBundleStyle:function(e,t){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=t,Sandbox.loadResource(e,n)},_loadBundleScript:function(e,t){var n=document.createElement("script");n.src=t,n.type="text/javascript",n.async="async",Sandbox.loadResource(e,n)}}),Sandbox.SCRIPT_STATE={LOADING:1,SUCCESS:2,ERROR:3},Sandbox._loadedScripts={},Sandbox.loadResource=function(e,t,n,r){var i=t.src||t.href;i in Sandbox._loadedScripts?Sandbox._loadedScripts[i].status===Sandbox.SCRIPT_STATE.SUCCESS?Sandbox.isFunction(n)&&n():Sandbox._loadedScripts[i].status===Sandbox.SCRIPT_STATE.ERROR?Sandbox.isFunction(r)&&r():(Sandbox.isFunction(n)&&Sandbox._loadedScripts[i].onload.push(n),Sandbox.isFunction(r)&&Sandbox._loadedScripts[i].onerror.push(r)):(t.onload=function(){var e=Sandbox._loadedScripts[i];if(e){e.status=Sandbox.SCRIPT_STATE.SUCCESS;for(var t=0;t<e.onload.length;t++)e.onload[t]();e.onload=[],e.onerror=[]}},t.onerror=function(){var e=Sandbox._loadedScripts[i];if(e){e.status=Sandbox.SCRIPT_STATE.ERROR;for(var t=0;t<e.onerror.length;t++)e.onerror[t]();e.onload=[],e.onerror=[]}},Sandbox._loadedScripts[i]={status:Sandbox.SCRIPT_STATE.LOADING,onload:[],onerror:[]},Sandbox.isFunction(n)&&Sandbox._loadedScripts[i].onload.push(n),Sandbox.isFunction(r)&&Sandbox._loadedScripts[i].onerror.push(r),e.appendChild(t))}},8878:function(e,t,n){n(9997),n(1168)},4009:function(e,t,n){n(4727)},1136:function(e,t,n){Sandbox.static((function(e){var t=e.Sandbox,r=t.ExpFlags={},i=n(9665);r.parse=function(e){var n=r.getDefault(),i=Array.prototype.filter.call(arguments,Boolean).join(";"),o=t.Query.parse(i,";",!0);return new t.Query(o,n)},r.getDefault=function(){return{"videoplayer-version":void 0,version:void 0,force_unmute:{value:void 0,set:i.setAsBoolean},restore_playback_progress:{value:void 0,set:i.setAsBoolean},use_friendly_frame:{value:void 0,set:i.setAsBoolean},progress:{value:void 0,set:i.setAsBoolean},start_position_confirmation:{value:void 0,set:i.setAsBoolean},hide_brand_play_button:{value:void 0,set:i.setAsBoolean},recommendations_redirect_to_efir:{value:void 0,set:i.setAsBoolean},disable_autoplay_slow_connection:{value:!1,set:i.setAsBoolean},disable_autoplay_save_data:{value:!1,set:i.setAsBoolean},max_buffer_length:{value:void 0,set:i.setIsNumber},bandwidth_estimate_offset:{value:void 0,set:i.setIsNumber},soft_max_res_height:{value:void 0,set:i.setIsNumber},poll_id:{value:void 0,set:i.setAsString},poll_timeout:{value:21600,set:i.setIsNumber},poll_show_before_midroll:{value:!1,set:i.setAsBoolean}}}}))},5693:function(e,t,n){n(9665),n(9243),n(1136)},7306:function(e,t,n){n(5817),n(2655)},5817:function(e,t,n){n(1107)},1256:function(e,t,n){n(6149)},6149:function(){!function(e){var t=(e.VH=e.VH||{}).Provider=function(e,t){this._contentId=e,this._tld=this._getTld(t),this._withCredentials=!0,t&&(this._apiHost=t.apiHost)};t.PROTOCOL="http:"===location.protocol?"http:":"https:",t.DEFAULT_TLD="ru",t.DEFAULT_API_HOST="frontend.vh.yandex";var n=t.prototype;n.load=function(e,t){var n=this._getUrl(e,t);return this._getRequest(n)},n.loadTest=function(e){var t=this._getBackendUrl()+"/"+e+"/"+this._contentId+".json";return this._withCredentials=!1,this._getRequest(t)},n._getRequest=function(e){return new Promise(function(t,n){var r=this;function i(t,r){var i=new Error("VH.Provider: "+t);i.apiUrl=e,i.responseCode=r,n(i)}var o=new XMLHttpRequest;o.open("GET",e,!0),o.withCredentials=this._withCredentials,o.onload=function(){o.status>=200&&o.status<400&&r._parseJSON(o.responseText,t,i),i("Invalid response data",o.status)},o.onerror=i.bind(this,"No data was received. Check the request"),o.send()}.bind(this))},n._parseJSON=function(e,t,n){try{t(JSON.parse(e))}catch(e){n("Data parsing error")}},n._getUrl=function(t,n){if(e.isString(t)){var r=this._getBackendUrl()+"/"+t;return(r+="player"===t?"/"+this._contentId+".json":"")+(n?"?"+new e.Query(n).toString():"")}},n._getBackendUrl=function(){return this._apiHost?t.PROTOCOL+"//"+this._apiHost:t.PROTOCOL+"//"+t.DEFAULT_API_HOST+"."+this._tld},n._getTld=function(n){if(n&&e.isString(n.tld))return n.tld;var r,i=e.getLocation();return i&&e.isString(i.hostname)&&(r=i.hostname.split(".").pop()),r||t.DEFAULT_TLD}}(window.Sandbox)},1415:function(e,t,n){n(7923),Sandbox.static((function(e){e.Sandbox.Thumb=n(7593)}))},2098:function(e,t,n){n(7923),Sandbox.static((function(){window.Sandbox.VHConfig=n(4785)}))},9437:function(e,t,n){n(2301)},2301:function(){Sandbox.static((function(){var e=window.Sandbox;(e.VHError=e.VHError||{}).ACCESS_ERROR_LABELS={no_licenses:{message:"Нет доступных лицензий",code:151},invalid_region:{message:"Трансляция недоступна в вашем регионе",code:153},old_browser:{message:"Ваш браузер не поддерживает проигрывание защищённого видео. Попробуйте открыть ссылку в другом браузере.",code:5},future_vod_release:{message:"Контент будет доступен",code:100},unexpected:{message:"Мы знаем о проблеме и работаем над её решением. Попробуйте обновить страницу через некоторое время.",code:100},unsupported_browser:{message:"Ваш браузер не поддерживает технологии, которые используются для быстрой и удобной загрузки видео. Установите последнюю версию браузера.",code:412},not_found:{message:"Видео по вашей ссылке не существует",code:404}}}))},9723:function(e,t,n){n(7923),Sandbox.static((function(e){Sandbox.VHQuery=n(6517)}))},7978:function(e,t,n){n(7923),Sandbox.static((function(e){Sandbox.VHQuery=n(5831)}))},8305:function(e,t,n){n(7923),Sandbox.static((function(){Sandbox.YaVideoTrackings=n(827)}))},4964:function(e,t,n){n(2911)},2911:function(){Sandbox.static((function(e){var t=e.Sandbox,n=t.VHVelocityMetrics=function(){this.isPerformanceNowAvailable=Boolean(t.isObject(performance)&&t.isFunction(performance.now)),this.sandboxName=t.StaticLinks.SANDBOX_NAME,this.metrics={},this.logMethod=null,"vh-player"===this.sandboxName&&(this.initSandbox=0,this.dataSource=n.DATA_SOURCES.dataObject)};n.DATA_SOURCES={contentId:"content-id",dataObject:"data-object"},n.METRICS_NAMES={readyPlayerAPI:"ready",startedOrIdle:"start-idle",userReady:"user-ready",posterReady:"poster-ready"};var r=n.prototype;r._setMetric=function(e,t,n){this.metrics[e]||this.isPerformanceNowAvailable&&(this.metrics[e]={value:performance.now(),sendSampled:t,details:n,sent:!1})},r.setLogMethod=function(e){if(t.isFunction(e)){this.logMethod=e;var n=this;for(var r in this.metrics)Object.prototype.hasOwnProperty.call(this.metrics,r)&&function(e,t){setTimeout((function(){n.send(e,t.sendSampled,t.details)}))}(r,this.metrics[r])}},r.send=function(e,r,i){if(this._setMetric(e,r,i),t.isFunction(this.logMethod)&&t.isString(e)&&t.isObject(this.metrics[e])&&!this.metrics[e].sent){var o=this.sandboxName+"."+this.dataSource+".";o+=t.isString(i)?n.METRICS_NAMES[e]+"."+i:n.METRICS_NAMES[e];var s={initSubpage:!0,sampled:r};t.isNumber(this.metrics[e].value)&&t.isNumber(this.initSandbox)&&(this.logMethod(o,this.metrics[e].value-this.initSandbox,s),this.metrics[e].sent=!0)}}}))},236:function(e,t,n){n(7923),n(5817),n(2011),n(7641),n(7306)},2011:function(){Sandbox.static((function(e,t,n){var r=e.Ya=e.Ya||{},i=e.Sandbox,o=i.YaPlayer=function(t,r){this.version=t||n,this.v2=!0,this.bundle=this._getPlayerBundle(r),this.state=o.STATE.UNAVAILABLE,this.withOttTrackings=!1,this.withOttWrapper=!1;var s=this;function a(){s.state=o.STATE.DESTROYED,s.trigger("PlayerApiAvailable")}i.isObject(e.Ya)&&i.isObject(e.Ya.playerApi)&&i.isFunction(e.Ya.playerApi.init)?a():this._loadScript(this.bundle,a,(function(){s.trigger("onError",[{message:"Player unavailable",isFatal:!0}])}))};o.METHODS=[],o._proxy=function(e,t,n){return o.METHODS=o.METHODS||[],o.METHODS.push(e),function(){if(!this.isReady())return t;if(n)try{var r=[e].concat(Array.prototype.slice.call(arguments));return this._callThroughDecorators.apply(this,r)}catch(e){return t}return i.isFunction(this.player[e])?this.player[e].apply(this.player,arguments):t}};var s=o.prototype;s.isReady=function(){return!(!this.player||!this._isPlayerReady||this.state!==o.STATE.INITED&&this.state!==o.STATE.SWITCH&&this.state!==o.STATE.SWITCHED)},s.isPlaying=function(){return this.isReady()&&this.player.getState()===o.PLAYING_STATE.PLAYING},s.on=function(e,t,n){var r=this;return i.isObject(e)?(n=t,Object.keys(e).forEach((function(t){r.on(t,e[t],n)})),this):(i.isString(e)&&i.isFunction(t)&&(this._handlers=this._handlers||{},this._handlers[e]=this._handlers[e]||[],this._handlers[e].push({cb:t,ctx:i.isObject(n)?n:this})),this)},s.subscribeToSkinEvents=function(e,t,n){var r=this;return i.isObject(e)?(n=t,Object.keys(e).forEach((function(t){r.subscribeToSkinEvents(t,e[t],n)})),this):(i.isString(e)&&i.isFunction(t)&&r.skin.on(e,t.bind(n)),this)},s.init=function(e){return this._executeQueue([function(){return this.state===o.STATE.INIT||this.state===o.STATE.INITED||this.state===o.STATE.SWITCH||this.state===o.STATE.SWITCHED||this.state!==o.STATE.UNAVAILABLE&&this.state!==o.STATE.DESTROY&&(this.state=o.STATE.INIT,e=this._prepareConfig(e),this._init(e))}])},s.destroy=function(){return this._executeQueue([function(){return this.state===o.STATE.DESTROY||this.state===o.STATE.DESTROYED||this.state===o.STATE.UNAVAILABLE||this.state!==o.STATE.INIT&&this.state!==o.STATE.SWITCH&&(this.state=o.STATE.DESTROY,this.player?this.player.destroy():void 0)},function(){return this.state=o.STATE.DESTROYED,this.trigger("onDestroy"),!0}])},s.update=function(e){return this._executeQueue([this.destroy,this.init.bind(this,e),function e(){return e.timeout=500,this.state===o.STATE.INITED&&!!this.player&&(1===this.player.currentPlayingState||e.count>3||void this.player.play())}])},s.setSource=function(e){return this.state===o.STATE.SWITCH&&(this.state=o.STATE.INITED),this._executeQueue([function e(){if(e.timeout=500,!(e.count>100))return this.isReady();e.failed=!0},function(){var t=this;t.state=o.STATE.SWITCH;var n=t.player.setSource(e);return(n=n.then((function(){t.state=o.STATE.SWITCHED}))).catch((function(){t.state=o.STATE.SWITCHED}))}])},s.play=o._proxy("play"),s.pause=o._proxy("pause"),s.seek=o._proxy("seek"),s.setVolume=o._proxy("setVolume"),s.setMuted=o._proxy("setMuted"),s.setVideoTrack=o._proxy("setVideoTrack"),s.setAudioTrack=o._proxy("setAudioTrack"),s.setTextTrack=o._proxy("setTextTrack"),s.insertInto=o._proxy("insertInto",Promise.resolve()),s.openReportWindow=o._proxy("openReportWindow"),s.requestDebugInfo=o._proxy("requestDebugInfo"),s.sendReportLog=o._proxy("sendReportLog",new Error("API unavailable")),s.setVideoStyle=o._proxy("setVideoStyle"),s.setNativeAdControlsVisibility=o._proxy("setNativeAdControlsVisibility"),s.setPlaybackRate=o._proxy("setPlaybackRate"),s.skipAdPod=o._proxy("skipAdPod"),s.setFeed=o._proxy("setFeed"),s.playInrollAd=o._proxy("playInrollAd",new Error("API unavailable"),!0),s.getState=o._proxy("getState"),s._getPlayerBundle=function(e){return("http:"===location.protocol?"http://":"https://")+(e?"betastatic.yastatic.net":"yastatic.net")+(this.version?"/yandex-video-player-iframe-api-bundles/"+this.version+"/js/player-api-loader.js":"/yandex-video-player-iframe-api/js/player-api-loader.js")},s._loadScript=function(e,n,r){var o=t.createElement("script");o.src=e,i.loadResource(t.head,o,n,r)},s.trigger=function(e,t){if(this._handlers&&this._handlers[e]){var n,r=this._handlers[e];t=t||[];for(var i=0;i<r.length;i++)(n=r[i]).cb.apply(n.ctx,t)}},s._getEnvName=function(){return i.getEnv()===i.ENV.PRODUCTION?i.ENV.PRODUCTION:i.ENV.TESTING},s._callThroughDecorators=function(e){for(var t=Array.prototype.slice.call(arguments,1),n=this.player;n&&!i.isFunction(n[e]);)n=n.instance||n.api;return n[e].apply(n,t)},s._prepareConfig=function(e){return e.version=this.version,e.envName=this._getEnvName(),e},s._init=function(e){var t,n=this;return this.player=null,this.skin=null,this.withOttWrapper=!1,this.withOttTrackings=!1,e.disableOTTPlayerLoader?(delete e.disableOTTPlayerLoader,t=r.playerApi.init(e).then((function(e){n.player=e}))):t=r.OTT.PlayerLoader.init(e).then((function(e){n.player=e.api,n.withOttWrapper=e.withWrapper,n.withOttTrackings=e.withTrackings})),(t=t.then((function(){n.player&&i.isFunction(n.player.on)&&n.player.on("SkinReady",(function(){n.skin=n.player.skin})),n.state=o.STATE.INITED,n._bindEvents(),n.trigger("PlayerApiAvailable"),n.trigger("onSourceChange",e.source)}))).catch((function(e){if(n.state=o.STATE.DESTROYED,e)return Promise.reject(new Error(e.message))}))},s._bindEvents=function(){var e=this;e.player&&Object.keys(o.EVENTS_TO_V1).forEach((function(t){e.player.on(t,(function(){var n=o.EVENTS_TO_V1[t],r=Array.prototype.slice.call(arguments);r=i.isFunction(n.map)?n.map.apply(e.player,r):r,r=Array.isArray(r)?r:[r],e.trigger.call(e,n.name,r)}))}))},s._executeQueue=function(e,t){return e.forEach((function(e){e.count=0})),new Promise(this._startCurrentStage.bind(this,e,t||0))},s._startCurrentStage=function(e,t,n,r){e[t].count=(e[t].count||0)+1;var o=e[t].call(this);o&&(t++,i.isFunction(o.then)&&i.isFunction(o.catch))?this._startStageOnPromise(o,e,t,n,r):this._startStageOnTimeout(e,t,n,r)},s._startStageOnPromise=function(e,t,n,r,i){var o=this;e.then((function(){n>=t.length?r(o):o._startCurrentStage(t,n,r,i)})).catch(i)},s._startStageOnTimeout=function(e,t,n,r){t>=e.length?n(this):e[t].failed?r(e[t].name+" failed"):setTimeout(this._startCurrentStage.bind(this,e,t,n,r),e[t].timeout||0)},o.STATE={UNAVAILABLE:0,INIT:1,INITED:2,SWITCH:5,SWITCHED:6,DESTROY:3,DESTROYED:4},o.PLAYING_STATE={play:1,pause:2,buffering:3,end:0},o.AD_STATE={PLAYING:1,NOT_PLAYING:2},o.EVENTS=["onReady","onStateChange","onAdStateChange","onVideoTrackChange","onVideoTracksChange","onAudioTrackChange","onAudioTracksChange","onTextTrackChange","onTextTracksChange","onSeek","onError","onCurrentTimeChange","onDurationChange","onFullScreenChange","onVolumeChange","onUserAction","onDVRChange","onSourceChange","onContentImpression","onResourcesIdle","onAdPodStart","onVideoSizeChange","onSubscribeButtonClick","onUserReady","onPosterReady"],o.EVENTS_TO_V1={Ready:{name:"onReady"},ResourcesIdle:{name:"onResourcesIdle"},ContentImpression:{name:"onContentImpression"},SourceChange:{name:"onSourceChange"},PlaybackRateChange:{name:"PlaybackRateChange"},AdPodStart:{name:"AdPodStart"},AdPodCloseStateChange:{name:"AdPodCloseStateChange"},UserReady:{name:"onUserReady"},PosterReady:{name:"onPosterReady"},AdPodCurrentTimeChange:{name:"AdPodCurrentTimeChange"},AdPodTimeToSkipChange:{name:"AdPodTimeToSkipChange"},AdVolumeAvailabilityStateChange:{name:"AdVolumeAvailabilityStateChange"},AdSkippableStateChange:{name:"AdSkippableStateChange"},PlaybackRateRangeChange:{name:"PlaybackRateRangeChange"},NextAdRemainingTimeChange:{name:"NextAdRemainingTimeChange"},BeforeAdPodStart:{name:"BeforeAdPodStart"},PlayingStateChange:{name:"onStateChange",map:function(e){return o.PLAYING_STATE[e.playingState]}},CurrentTimeChange:{name:"onCurrentTimeChange",map:function(e){var t=this.getState(),r=i.isObject(t)?t.watchedTime:n;return[e.currentTime,0,r]}},DurationChange:{name:"onDurationChange",map:function(e){return e.duration}},MutedChange:{name:"onVolumeChange",map:function(e){var t=this.getState();return e&&!e.muted?100*(t?t.volume:0):0}},FullscreenStateChange:{name:"onFullScreenChange",map:function(e){return e.isFullscreen}},VideoTracksChange:{name:"onVideoTracksChange",map:function(e){return[e.videoTracks]}},VideoTrackChange:{name:"onVideoTrackChange",map:function(e){return e.videoTrack}},AudioTracksChange:{name:"onAudioTracksChange",map:function(e){return[e.audioTracks]}},AudioTrackChange:{name:"onAudioTrackChange",map:function(e){return e.audioTrack}},TextTracksChange:{name:"onTextTracksChange",map:function(e){return[e.textTracks]}},TextTrackChange:{name:"onTextTrackChange",map:function(e){return e.textTrack}},AdStateChange:{name:"onAdStateChange",map:function(e){return e.adState}},Error:{name:"onError",map:function(e){return e.error}},SkinReady:{name:"SkinReady"}}}))}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(8742),n(9723),n(1256),n(3906)}();