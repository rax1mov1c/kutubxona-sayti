window.jQuery&&window.jQuery.fn.bem&&window.bemhtml&&(BEM.DOM.decl({block:"card",modName:"type",modVal:"series"},{_onCardExpandChange:function(i,e){this.findBlockOn("episode-control","series-navigator-control").setMod("limited",!e)},_hideNextEpisodeButton:function(){this.setMod(this.elem("next-episode-button"),"hidden",!0)},_showLastEpisodeButton:function(){this.delMod(this.elem("last-episode-button"),"hidden")},_onNextEpisodeButtonClick:function(){this.blockInside("series-navigator").selectNextEpisode()},_onLastEpisodeButtonClick:function(){this.blockInside("series-navigator").selectLastEpisode()}},{live:function(){this.__base.apply(this,arguments),this.liveInitOnBlockInsideEvent("expand:change","card-expandable",function(i,e){this._onCardExpandChange(i,e)}),this.liveInitOnChannelEvent("series-navigator","hide-next-episode",function(){this._hideNextEpisodeButton()}),this.liveInitOnChannelEvent("series-navigator","show-last-episode",function(){this._showLastEpisodeButton()}),this.liveBindTo("next-episode-button","pointerclick",function(){this._onNextEpisodeButtonClick()}),this.liveBindTo("last-episode-button","pointerclick",function(){this._onLastEpisodeButtonClick()})}}),BEM.DOM.decl({block:"card",modName:"expandable",modVal:!0},{_toggleExpandable:function(){var i=this.blockInside("card-expandable");i&&i.toggle()}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("badge-title badge-preview","pointerclick",function(){this._toggleExpandable()})}}),BEM.DOM.decl("card-expandable",{onSetMod:{js:{inited:function(){BEM.blocks["b-page"].on("resize",this._onResize,this)}},expanded:function(i,e){this.trigger("expand:change",e),this._updateMaxHeight(!e)}},destruct:function(){BEM.blocks["b-page"].un("resize",this._onResize,this),this.__base.apply(this,arguments)},toggle:function(){this.toggleMod("expanded",!0),this._sendCounter(this.getMod("expanded")?"expand":"collapse")},isExpanded:function(){return this.hasMod("expanded",!0)},_sendCounter:function(i){var e=this.params.counters&&this.params.counters[i];e&&w(null,e)},_updateMaxHeight:function(i){var e=this.elem("inner");e.css("max-height",i?0:e[0].scrollHeight),BEM.channel("card-expandable").trigger("height:change")},_onResize:function(){this.isExpanded()&&this._updateMaxHeight()},_onTransitionEnd:function(i){if("max-height"===i.originalEvent.propertyName){var e=this.blockInside({block:"card-description"});e&&e.setMod("full-height",this.hasMod("expanded"))}}},{live:function(){return this.liveBindTo("control","pointerclick",function(){this.toggle()}),this.liveInitOnBlockInsideEvent("height:change","card-description",function(){this._updateMaxHeight()}),this.liveBindTo(BEM.blocks["i-ua"].getTransitionEndEvent(),function(i){var e=this.blockInside({block:"carousel",modName:"controls",modVal:!0});e&&e.setScrollMod(),this._onTransitionEnd(i)}),!1}}),BEM.DOM.decl("card-description",{_onDescriptionClick:$.noop,_onReadMoreClick:$.noop,_expandDescription:function(){this.params.hasFullDescription&&this.setMod("description-expanded",!0),this.trigger("height:change")}},{live:function(){this.liveBindTo("description","pointerclick",function(){this._onDescriptionClick()}),this.liveBindTo("read-more","pointerclick",function(){this._onReadMoreClick()}),this.liveBindTo(BEM.blocks["i-ua"].getTransitionEndEvent(),function(){var i=this.blockInside("carousel");i&&i.setScrollMod()})}}),BEM.DOM.decl("card-description",{_onReadMoreClick:function(){this._expandDescription()}}),"undefined"!=typeof BEM&&BEM.I18N&&(BEM.I18N.decl("card",{"Последняя серия":"Последняя серия","Следующая серия":"Следующая серия"},{lang:"ru"}),BEM.I18N.decl("card-badge",{"Обсудить":"Обсудить"},{lang:"ru"}),BEM.I18N.decl("card-description",{"Кадры":"Кадры","Читать ещё":"Читать ещё"},{lang:"ru"}),BEM.I18N.lang("ru")));