if(window.jQuery&&window.bemhtml){!function(t){var e=function(){return"_"}.toString().indexOf("_")>-1,i=function(){},n=Object.create||function(t){var e=function(){};return e.prototype=t,new e},o=Object.keys,s=t.extend,r=Array.isArray,a=t.isFunction,c=!0,l={toString:""};for(var h in l)l.hasOwnProperty(h)&&(c=!1);var u=c?["toString","valueOf"]:null;function d(i,n,s){for(var r,l,h=function(t){var e=o(t);if(c)for(var i,n=0;i=u[n++];)t.hasOwnProperty(i)&&e.push(i);return e}(s),d=0,p=h.length;d<p;)"__self"!==(r=h[d++])&&(l=s[r],a(l)&&(!e||l.toString().indexOf(".__base")>-1)?n[r]=function(e,o){var s=function(){var t=this.__base;this.__base=s.__base;var e=o.apply(this,arguments);return this.__base=t,e};return s.__base=i[e]||("__constructor"===e?n.__self.__parent:t.noop),s}(r,l):n[r]=l)}function p(e,i){for(var n,o=1;n=e[o++];)i?a(n)?t.inheritSelf(i,n.prototype,n):t.inheritSelf(i,n):i=a(n)?t.inherit(e[0],n.prototype,n):t.inherit(e[0],n);return i||e[0]}t.inherit=function(){var t=arguments,e=r(t[0]),o=e||a(t[0]),c=o?e?p(t[0]):t[0]:i,l=t[o?1:0]||{},h=t[o?2:1],u=l.__constructor||o&&c.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:o?function(){return c.apply(this,arguments)}:function(){};if(!o)return u.prototype=l,u.prototype.__self=u.prototype.constructor=u,s(u,h);s(u,c),u.__parent=c;var f=c.prototype,m=u.prototype=n(f);return m.__self=m.constructor=u,l&&d(f,m,l),h&&d(c,u,h),u},t.inheritSelf=function(){var t=arguments,e=r(t[0])?p(t[0],t[0][0]):t[0],i=t[1],n=t[2],o=e.prototype;return i&&d(o,o,i),n&&d(e,e,n),e},t.inherit.self=t.inheritSelf}(jQuery),function(t){var e=0,i="__"+Number(new Date),n=function(){return"uniq"+ ++e};t.identify=function(t,e){if(!t)return n();var o="uniqueID"in t?"uniqueID":i;return e||o in t?t[o]:t[o]=n()}}(jQuery),function(t){var e="__"+Number(new Date)+"storage",i=function(e,i){return t.identify(e)+(i?t.identify(i):"")},n={buildEventName:function(t){return t},on:function(n,o,s,r,a){if("string"==typeof n){t.isFunction(o)&&(r=s,s=o,o=void 0);for(var c,l=i(s,r),h=this[e]||(this[e]={}),u=n.split(" "),d=0;n=u[d++];)if(!(l in(c=h[n=this.buildEventName(n)]||(h[n]={ids:{},list:{}})).ids)){var p=c.list,f={fn:s,data:o,ctx:r,special:a};p.last?(p.last.next=f,f.prev=p.last):p.first=f,c.ids[l]=p.last=f}}else{var m=this;t.each(n,function(t,e){m.on(t,e,o,a)})}return this},onFirst:function(t,e,i,n){return this.on(t,e,i,n,{one:!0})},un:function(n,o,s){if("string"==typeof n||void 0===n){var r=this[e];if(r)if(n){for(var a,c=n.split(" "),l=0;n=c[l++];)if(a=r[n=this.buildEventName(n)])if(o){var h=i(o,s),u=a.ids;if(h in u){var d=a.list,p=u[h],f=p.prev,m=p.next;f?f.next=m:p===d.first&&(d.first=m),m?m.prev=f:p===d.last&&(d.last=f),delete u[h]}}else delete this[e][n]}else delete this[e]}else{var _=this;s=o,t.each(n,function(t,e){_.un(t,e,s)})}return this},trigger:function(i,n){var o=this[e],s="string"==typeof i,r=s?i:i.type,a=this.buildEventName(r);if(s||(i.type=a,i.target||(i.target=this)),o&&(o=o[a])){var c,l=o.list.first;for(l&&s&&((i=t.Event(a)).target=this);l;)i.data=l.data,void 0!==(c=l.fn.call(l.ctx||this,i,n))&&(i.result=c,!1===c&&(i.preventDefault(),i.stopPropagation())),l.special&&l.special.one&&this.un(r,l.fn,l.ctx),l=l.next}return this}};t.observable=t.inherit(n,n)}(jQuery),function(){var t=Array.prototype.slice;Function.prototype.bind||(Function.prototype.bind=function(e){var i=this,n=t.call(arguments,1);return function(){return i.apply(e,n.concat(t.call(arguments)))}})}(),function(t,e){var i=[],n=t.inherit,o=t.isFunction,s=Function.prototype.call.bind(Object.prototype.hasOwnProperty),r={},a={};function c(t,e,i){return(t?"__elem_"+t:"")+"__mod"+(e?"_"+e:"")+(i?"_"+i:"")}function l(t,e,i){var n,r,a;if(o(t))e[c(i,"*","*")]=t;else for(n in t)if(s(t,n))if(a=t[n],o(a))e[c(i,n,"*")]=a;else for(r in a)s(a,r)&&(e[c(i,n,r)]=a[r])}function h(t){var e;if(t.onSetMod&&(l(t.onSetMod,t),delete t.onSetMod),t.onElemSetMod){for(e in t.onElemSetMod)s(t.onElemSetMod,e)&&l(t.onElemSetMod[e],t,e);delete t.onElemSetMod}}this.BEM=n(t.observable,{__constructor:function(t,e,i){var n=this;n._modCache=t||{},n._processingMods={},n._params=e,n.params=null,!1!==i?n._init():n.afterCurrentEvent(function(){n._init()})},_init:function(){return this._initing||this.hasMod("js","inited")||(this._initing=!0,this.params||(this.params=t.extend(this.getDefaultParams(),this._params),delete this._params),this.setMod("js","inited"),delete this._initing,this.hasMod("js","inited")&&this.trigger("init")),this},changeThis:function(t,e){return t.bind(e||this)},afterCurrentEvent:function(t,e){this.__self.afterCurrentEvent(t.bind(e||this))},on:function(e,i,n,o){return"object"==typeof e&&(t.isFunction(i)||t.isFunction(n))&&(e=this.__self._buildModEventName(e)),this.__base.apply(this,arguments)},un:function(e,i,n){return"object"==typeof e&&t.isFunction(i)&&(e=this.__self._buildModEventName(e)),this.__base.apply(this,arguments)},trigger:function(e,i){var n=!0;return"object"!=typeof e||e instanceof t.Event||(n="js"===e.modName||this.hasMod("js"),e=this.__self._buildModEventName(e)),n&&(this.__base(e=this.buildEvent(e),i),this._trigger(e,i)),this},_trigger:function(t,e){this.__self.trigger(t,e)},buildEvent:function(e){return"string"==typeof e&&(e=t.Event(e)),e.block=this,e},hasMod:function(t,e,i){var n=arguments.length,o=!1;1==n?(i="",e=t,t=void 0,o=!0):2==n&&("string"==typeof t?(i=e,e=t,t=void 0):(i="",o=!0));var s=this.getMod(t,e)===i;return o?!s:s},getMod:function(t,e){var i=typeof t;if("string"===i||"undefined"===i){e=t||e;var n=this._modCache;return e in n?n[e]:n[e]=this._extractModVal(e)}return this._getElemMod(e,t)},_getElemMod:function(t,e,i){return this._extractModVal(t,e,i)},getMods:function(t){var e=t&&"string"!=typeof t,i=this._modCache,n=[].slice.call(arguments,e?1:0);return n.length?n.reduce(function(t,e){return e in i&&(t[e]=i[e]),t},{}):i},setMod:function(e,i,n){void 0===n&&("string"==typeof e?(n=void 0===i||i,i=e,e=void 0):n=!0);var o=this;if(!e||e[0]){!1===n||null===n?n="":!0!==n&&(n=n.toString());var s=(e&&e[0]?t.identify(e[0]):"")+"_"+i;if(this._processingMods[s])return o;var r,a=e?o._getElemMod(i,e,r=o.__self._extractElemNameFrom(e)):o.getMod(i);if(a===n)return o;this._processingMods[s]=!0;var c=!0,l=[i,n,a];e&&l.unshift(e),[["*","*"],[i,"*"],[i,n]].forEach(function(t){c=!1!==o._callModFn(r,t[0],t[1],l)&&c}),!e&&c&&(o._modCache[i]=n),c&&o._afterSetMod(i,n,a,e,r),delete this._processingMods[s]}return o},_afterSetMod:function(t,e,i,n,o){var s={modName:t,modVal:e,oldModVal:i};n&&(s.elem=n),this.trigger({modName:t,modVal:"*",elem:o},s).trigger({modName:t,modVal:e,elem:o},s)},toggleMod:function(t,e,i,n,o){"string"==typeof t&&(o=n,n=i,i=e,e=t,t=void 0),void 0===n?n="":"boolean"==typeof n&&(o=n,n="");var s=this.getMod(t,e);return(s==i||s==n)&&this.setMod(t,e,"boolean"==typeof o?o?i:n:this.hasMod(t,e,i)?n:i),this},delMod:function(t,e){return e||(e=t,t=void 0),this.setMod(t,e,"")},_callModFn:function(t,e,i,n){var o=c(t,e,i);return this[o]?this[o].apply(this,n):void 0},_extractModVal:function(t,e){return""},channel:function(t,e){return this.__self.channel(t,e)},getDefaultParams:function(){return{}},del:function(t){var e=[].slice.call(arguments);return"string"==typeof t&&e.unshift(this),this.__self.del.apply(this.__self,e),this},destruct:function(){var t={modName:"js",modVal:"",oldModVal:"inited"};this.trigger({modName:t.modName,modVal:t.modVal},t)}},t.extend(this.BEM,{_name:"i-bem",blocks:r,decl:function(e,i,s){"string"==typeof e?e={block:e}:e.name&&(e.block=e.name),h(i||(i={}));var a,c,l=r[e.baseBlock||e.block]||this;if(e.modName){var u=(a=e.modName,(c=e.modVal)?Array.isArray(c)?function(t){for(var e=0,i=c.length;e<i;)if(t.hasMod(a,c[e++]))return!0;return!1}:function(t){return t.hasMod(a,c)}:function(t){return t.hasMod(a)});t.each(i,function(t,e){o(e)&&(i[t]=function(){var n;if(u(this))n=e;else{var o=l.prototype[t];o&&o!==i[t]&&(n=this.__base)}return n?n.apply(this,arguments):void 0})})}if(s&&"boolean"==typeof s.live){var d=s.live;s.live=function(){return d}}var p,f=l;return e.baseMix&&(f=[f],e.baseMix.forEach(function(t){f.push(r[t])})),e.block==l._name?(p=n.self(f,i,s))._processLive(!0):((p=r[e.block]=n(f,i,s))._name=e.block,delete p._liveInitable),p},declMix:function(t,e,i){return h(e||(e={})),t=r[t]=n(e,i)},_processLive:function(t){return!1},create:function(t,e){return"string"==typeof t&&(t={block:t}),new r[t.block](t.mods,e)},getName:function(){return this._name},on:function(e,i,n,o){return"object"==typeof e&&(t.isFunction(i)||t.isFunction(n))&&(e=this._buildModEventName(e)),this.__base.apply(this,arguments)},un:function(e,i,n){return"object"==typeof e&&t.isFunction(i)&&(e=this._buildModEventName(e)),this.__base.apply(this,arguments)},_buildModEventName:function(t){var e="_"+t.modName+"_"+(!1===t.modVal?"":t.modVal);return t.elem&&(e="__"+t.elem+e),e},_extractElemNameFrom:function(t){},afterCurrentEvent:function(t,e){1==i.push({fn:t,ctx:e})&&setTimeout(this._runAfterCurrentEventFns,0)},_runAfterCurrentEventFns:function(){var t=i.length;t&&i.splice(0,t).forEach(function(t){t.fn.call(t.ctx||this)},this)},changeThis:function(t,e){return t.bind(e||this)},del:function(t){var e="string"==typeof t,i=e?0:1,n=arguments.length;for(e&&(t=this);i<n;)delete t[arguments[i++]];return this},channel:function(e,i){if("boolean"==typeof e&&(i=e,e=void 0),e||(e="default"),!i)return a[e]||(a[e]=new t.observable);a[e]&&(a[e].un(),delete a[e])}}))}(jQuery),function(t,e,i){var n,o="_",s="__";function r(t){var e=typeof t;return"string"===e||"number"===e||"boolean"===e}function a(t,e,i){null!=e&&!1!==e&&(i.push(o,t),!0!==e&&i.push(o,e))}function c(t,e,i,n){n.push(t),a(e,i,n)}function l(t,e,i,o,r){c(t,n,n,r),r.push(s,e),a(i,o,r)}t.INTERNAL={NAME_PATTERN:"[a-zA-Z0-9-]+",MOD_DELIM:o,ELEM_DELIM:s,buildModPostfix:function(t,e,i){var n=i||[];return a(t,e,n),i?n:n.join("")},buildClass:function(t,e,i,o,s){if(r(i)?r(o)||(s=o,o=i,i=e,e=n):void 0!==i?(s=i,i=n):e&&"string"!=typeof e&&(s=e,e=n),!e&&void 0===i&&!s)return t;var a=s||[];return e?l(t,e,i,o,a):c(t,i,o,a),s?a:a.join("")},buildClasses:function(t,i,n,o){i&&"string"!=typeof i&&(o=n,n=i,i=void 0);var s=o||[];return i?l(t,i,void 0,void 0,s):c(t,void 0,void 0,s),n&&e.each(n,function(e,n){n&&(s.push(" "),i?l(t,i,e,n,s):c(t,e,n,s))}),o?s:s.join("")}}}(BEM,jQuery),function(t,e,i){var n=e(window),o=e(document),s={},r={},a={},c={},l={},h=t.blocks,u=t.INTERNAL,d=u.NAME_PATTERN,p=u.MOD_DELIM,f=u.ELEM_DELIM,m=RegExp("[^"+p+"]"+p+"("+d+")(?:"+p+"("+d+"))?$"),_=u.buildModPostfix,g=u.buildClass,b=Array.prototype.slice,v=Array.prototype.reverse;function y(t,n,o,a,c){"boolean"==typeof o&&(c=a,a=o,o=i);var l=n[0];if(!l||l.dataset===i||"react"!==l.dataset.lego){var u=(o=M(o||k(l)[t],l,t)).uniqId;if(r[u])return r[u]._init();s[u]=s[u]?s[u].add(n):n;var d=l.parentNode;d&&11!==d.nodeType||e.unique(s[u]);var p=h[t]||S.decl(t,{},{live:!0});if(!(p._liveInitable=Boolean(p._processLive()))||a||!1===o.live){a&&n.addClass("i-bem");var f=new p(s[u],o,Boolean(a));return delete s[u],c&&c.apply(f,b.call(arguments,4)),f}}}function M(t,i,n,o){(t||(t={})).uniqId||(t.uniqId=(t.id?n+"-id-"+t.id:e.identify())+(o||e.identify()));var s=e.identify(i),r=a[s]||(a[s]={});return r[n]||(r[n]=t),t}function E(t,e,i){var n=t.find(e);return i?n:n.add(t.filter(e))}function k(t){var i=e.identify(t);return a[i]||(a[i]=B(t))}function B(t){var e,i=t.getAttribute("data-bem");return i?JSON.parse(i):e?e():{}}function w(t){delete a[e.identify(t)]}function C(t,e){1===t.domElem.length?t.destruct(!0):t.domElem=t.domElem.not(e)}e.fn.bem=function(t,e){return y(t,this,e,!0)};var S=t.DOM=t.decl("i-bem__dom",{__constructor:function(t,i,n){this.domElem=t,this._eventNameCache={},this._elemCache={},this._blockInsideCache={},r[this._uniqId=i.uniqId||e.identify(this)]=this,this._needSpecialUnbind=!1,this.__base(null,i,n)},findBlocksInside:function(t,e){return this._findBlocks("find",t,e)},findBlockInside:function(t,e){var i=this._buildBlockCacheKey(t,e),n=this._findBlocks("find",t,e,!0);return this._blockInsideCache[i]=n,n},blockInside:function(t,e){var i=this._buildBlockCacheKey(t,e),n=this._blockInsideCache[i];return n||(n=this.findBlockInside(t,e)),n},dropBlockInsideCache:function(t,e){t||e?this._blockInsideCache[this._buildBlockCacheKey(t,e)]=null:this._blockInsideCache={}},_buildBlockCacheKey:function(t,e){e||(e=t,t="");var i="string"==typeof e?e:g(e.block,e.modName,e.modVal);return("string"==typeof t?t:t.__bemElemName)+":"+i},findBlocksOutside:function(t,e){return this._findBlocks("parents",t,e)},findBlockOutside:function(t,e){return this._findBlocks("closest",t,e)[0]||null},findBlocksOn:function(t,e){return this._findBlocks("",t,e)},findBlockOn:function(t,e){return this._findBlocks("",t,e,!0)},_findBlocks:function(t,n,o,s){if(!this.domElem)return s?null:[];o||(o=n,n=i);var r=n?"string"==typeof n?this.findElem(n):n:this.domElem,a="string"==typeof o,c=a?o:o.block||o.blockName,l="."+(a?c:g(c,o.modName,o.modVal));if(s&&"find"===t){var h=r.filter(l)[0]||r.find(l)[0];return h?y(c,e(h),!0):null}s&&(l+=":first");var u=r.filter(l);if(t&&(u=u.add(r[t](l))),s)return u[0]?y(c,u.eq(0),!0):null;var d=[],p={};return e.each(u,function(t,i){var n=y(c,e(i),!0);p[n._uniqId]||(p[n._uniqId]=!0,d.push(n))}),d},bindToDomElem:function(t,n,o,s){e.isFunction(o)&&(s=o,o=i);var r=this,a=function(t){return(t.data||(t.data={})).domElem=e(this),s.apply(r,arguments)};return s?t.bind(r._buildEventName(n),o,(a.guid=s.guid=s.guid||e.guid++,a)):e.each(n,function(e,i){r.bindToDomElem(t,e,o,i)}),r},bindToDoc:function(t,e,i){return this._needSpecialUnbind=!0,this.bindToDomElem(o,t,e,i)},bindToWin:function(t,o,s){return e.isFunction(o)&&(s=o,o=i),this._needSpecialUnbind=!0,this.bindToDomElem(n,t,o,s)},bindTo:function(t,i,n,o){switch(arguments.length){case 3:e.isFunction(n)&&(o=n,"object"==typeof i&&(n=i,i=t,t=this.domElem));break;case 2:e.isFunction(i)?(o=i,i=t,t=this.domElem):"string"==typeof t||t instanceof e||(n=i,i=t,t=this.domElem);break;case 1:i=t,t=this.domElem}return"string"==typeof t&&(t=this.elem(t)),this.bindToDomElem(t,i,n,o)},unbindFromDomElem:function(t,e,i){return t.unbind(this._buildEventName(e),i),this},unbindFromDoc:function(t,e){return this.unbindFromDomElem(o,t,e)},unbindFromWin:function(t,e){return this.unbindFromDomElem(n,t,e)},unbindFrom:function(t,i,n){var o=arguments.length;return 1===o?(i=t,t=this.domElem):2===o&&e.isFunction(i)?(n=i,i=t,t=this.domElem):"string"==typeof t&&(t=this.elem(t)),this.unbindFromDomElem(t,i,n)},_buildEventName:function(t){var e=this;return t.indexOf(" ")>1?t.split(" ").map(function(t){return e._buildOneEventName(t)}).join(" "):e._buildOneEventName(t)},_buildOneEventName:function(t){var e=this._eventNameCache;if(t in e)return e[t];var i="."+this._uniqId;if(-1===t.indexOf("."))return e[t]=t+i,e[t];var n=".bem_"+this.__self._name;return e[t]=t.split(".").map(function(t,e){return 0===e?t+n:n+"_"+t}).join("")+i,e[t]},_trigger:function(t,e){this.__base.apply(this,arguments),this._ctxTrigger(t,e)},_ctxTrigger:function(t,i){var n=this,o=c[n.__self._buildCtxEventName(t.type)],s={};o&&n.domElem.each(function(){for(var r=this,a=o.counter;r&&a;){var c=e.identify(r,!0);if(c){if(s[c])break;var l=o.ctxs[c];l&&(e.each(l,function(e,o){o.fn.call(o.ctx||n,t,i)}),a--),s[c]=!0}r=r.parentNode}})},getMods:function(t){var e=t&&"string"!=typeof t,n=this._modCache,o=[].slice.call(arguments,e?1:0),s=this._extractMods(o,e?t:i);return e||(o.length?o.forEach(function(t){n[t]=s[t]}):n=s),s},setMod:function(t,i,n){if(t&&void 0!==n&&t.length>1){var o=this;return t.each(function(){var s=e(this);s.__bemElemName=t.__bemElemName,o.setMod(s,i,n)}),o}return this.__base(t,i,n)},_extractModVal:function(t,e,i){var n,o=(e||this.domElem)[0];return o&&(n=o.getAttribute("class").match(this.__self._buildModValRE(t,i||e))),n?n[2]||!0:""},_extractMods:function(t,e){var i={},n=!t.length,o=0;return((e||this.domElem).eq(0).attr("class").match(this.__self._buildModValRE("("+(n?d:t.join("|"))+")",e,"g"))||[]).forEach(function(t){var e=t.match(m);i[e[1]]=e[2]||!0,++o}),o<t.length&&t.forEach(function(t){t in i||(i[t]="")}),i},_afterSetMod:function(t,i,n,o,s){if(this._isDestructing)return this.__base.apply(this,arguments);var r=this.__self,a=r._buildModClassPrefix(t,s),c=r._buildModValRE(t,s,"g"),l=""===i||!1===i;(o||this.domElem).each(function(){var t=e(this),o=t.attr("class"),s=a;!0!==i&&(s+=p+i),(!0===n?c.test(o):(" "+o).indexOf(" "+a+p)>-1)?t.attr("class",o.replace(c,l?"":"$1"+s)):l||t.addClass(s)}),s&&this.dropElemCache(s,t,n).dropElemCache(s,t,i),this.__base.apply(this,arguments)},findElem:function(t,e,i,n){arguments.length%2?(n=i,i=e,e=t,t=this.domElem):"string"==typeof t&&(t=this.findElem(t)),e=e.split(" ");var o=this.__self.getName(),s=_(i,n),r=[],a=e.map(function(t){return r.push("."+g(o,t,i,n)),t+s}),c=1===a.length,l=E(t,r.join(","));return t===this.domElem&&r.forEach(function(t,i){(this._elemCache[a[i]]=c?l:l.filter(t)).__bemElemName=e[i]},this),l},_elem:function(t,e,i){return this._elemCache[t+_(e,i)]||this.findElem(t,e,i)},elem:function(t,i,n){if(2===arguments.length&&(n=!0),i&&"string"!=typeof i)return i.__bemElemName=t,i;if(t.indexOf(" ")<0)return this._elem(t,i,n);var o=e([]);return t.split(" ").forEach(function(t){o=o.add(this._elem(t,i,n))},this),o},dropElemCache:function(t,e,i){if(t){var n=_(e,i);t.indexOf(" ")<0?delete this._elemCache[t+n]:t.split(" ").forEach(function(t){delete this._elemCache[t+n]},this)}else this._elemCache={};return this},elemParams:function(t){var e;return"string"==typeof t?(e=t,t=this.elem(t)):e=this.__self._extractElemNameFrom(t),B(t[0])[g(this.__self.getName(),e)]||{}},elemify:function(t,i){return(t=e(t)).__bemElemName=i,t},containsDomElem:function(t){var e=!1;return this.domElem.each(function(){return!(e=t.parents().andSelf().index(this)>-1)}),e},buildSelector:function(t,e,i){return this.__self.buildSelector(t,e,i)},destruct:function(t){var i=this.__self;this._isDestructing||(this._isDestructing=!0,this._needSpecialUnbind&&i.doc.add(i.win).unbind("."+this._uniqId),this.dropElemCache().domElem.each(function(t,i){var n=k(i);e.each(n,function(t,e){var n=r[e.uniqId];n?n._isDestructing||C(n,i):delete s[e.uniqId]}),w(i)}),t||this.domElem.remove(),this.__base(),delete r[this.un()._uniqId],delete this.domElem,delete this._elemCache)}},{scope:null,doc:o,win:n,html:e(document.documentElement),_processLive:function(t){var e=this._liveInitable;if("live"in this&&void 0===e^t){e=!1!==this.live();var i=this.getName(),n=this.live;this.live=function(){return this.getName()===i?e:n.apply(this,arguments)}}return e},init:function(t,i,n){!t||e.isFunction(t)?(n=i,i=t,t=o):"string"==typeof t&&(t=e(t));var s=e.identify();return E(t,".i-bem").each(function(){!function(t,i){var n=t[0];e.each(k(n),function(o,s){M(s,n,o,i);var a=r[s.uniqId];a?a.domElem.index(n)<0&&(a.domElem=a.domElem.add(t),e.extend(a._params,s)):y(o,t,s)})}(e(this),s)}),i&&this.afterCurrentEvent(function(){i.call(n||this,t)}),this._runAfterCurrentEventFns(),t},destruct:function(t,n,o){"boolean"!=typeof t&&(o=n,n=t,t=i),n&&(v.call(E(n,".i-bem",o)).each(function(t,i){var n=k(this);e.each(n,function(t,e){if(e.uniqId){var n=r[e.uniqId];n?C(n,i):delete s[e.uniqId]}}),w(this)}),t||(o?n.empty():n.remove()))},update:function(t,e,i,n){return this.destruct(t,!0),this.init(t.html(e),i,n)},replace:function(t,i){return this.destruct(!0,t),this.init(e(i).replaceAll(t))},append:function(t,i){return this.init(e(i).appendTo(t))},prepend:function(t,i){return this.init(e(i).prependTo(t))},before:function(t,i){return this.init(e(i).insertBefore(t))},after:function(t,i){return this.init(e(i).insertAfter(t))},_buildCtxEventName:function(t){return this._name+":"+t},_liveClassBind:function(t,i,n,s){var r=this;if(i.indexOf(" ")>-1)i.split(" ").forEach(function(e){r._liveClassBind(t,e,n,s)});else{var a=l[i],c=e.identify(n);a||(a=l[i]={},o.bind(i,r._liveClassTrigger.bind(r))),c in(a=a[t]||(a[t]={uniqIds:{},fns:[]})).uniqIds||(a.fns.push({uniqId:c,fn:r._buildLiveEventFn(n,s)}),a.uniqIds[c]=a.fns.length-1)}return this},_liveClassUnbind:function(t,i,n){var o=l[i];if(o)if(n){if(o=o[t]){var s=e.identify(n);if(s in o.uniqIds){var r=o.uniqIds[s],a=o.fns.length-1;for(o.fns.splice(r,1);r<a;)o.uniqIds[o.fns[r++].uniqId]=r-1;delete o.uniqIds[s]}}}else delete o[t];return this},_liveClassTrigger:function(t){var i=l[t.type];if(i){var n=t.target,o=Object.keys(i);do{for(var s,r=" "+n.className+" ",a=0;s=o[a++];)if(-1!==r.indexOf(" "+s+" ")){for(var c=!1,h=i[s].fns,u=0;u<h.length;u++)!1===h[u].fn.apply(e(n),arguments)&&(c=!0);if(c&&t.preventDefault(),c||t.isPropagationStopped())return;o.splice(--a,1)}}while(o.length&&(n=n.parentNode))}},_buildLiveEventFn:function(t,i){var n=this;return function(o){var s=[n._name,((o.data||(o.data={})).domElem=e(this)).closest(n.buildSelector()),!0],r=y.apply(null,i?s.concat([t,o]):s);if(r&&!i&&t)return t.apply(r,arguments)}},liveInitOnEvent:function(t,e,i){return this.liveBindTo(t,e,i,!0)},liveBindTo:function(t,n,o,s){n&&!e.isFunction(n)||(o=n,n=t,t=i),t&&"string"!=typeof t||(t={elem:t}),t.elemName&&(t.elem=t.elemName);var r=this;return t.elem&&t.elem.indexOf(" ")>0?(t.elem.split(" ").forEach(function(e){r._liveClassBind(g(r._name,e,t.modName,t.modVal),n,o,s)}),r):r._liveClassBind(g(r._name,t.elem,t.modName,t.modVal),n,o,s)},liveUnbindFrom:function(t,n,o){n&&!e.isFunction(n)||(o=n,n=t,t=i);var s=this;return t&&t.indexOf(" ")>1?(t.split(" ").forEach(function(t){s._liveClassUnbind(g(s._name,t),n,o)}),s):s._liveClassUnbind(g(s._name,t),n,o)},_liveInitOnBlockEvent:function(t,e,i,n){var o=this._name;return h[e].on(t,function(t){if(t.block.domElem){var e=arguments,s=t.block[n](o);i&&s.forEach(function(t){i.apply(t,e)})}}),this},liveInitOnBlockEvent:function(t,e,i){return this._liveInitOnBlockEvent(t,e,i,"findBlocksOn")},liveInitOnBlockInsideEvent:function(t,e,i){return this._liveInitOnBlockEvent(t,e,i,"findBlocksOutside")},on:function(t,e,i,n,o){return t.jquery?this._liveCtxBind(t,e,i,n,o):this.__base(t,e,i,n,o)},un:function(t,e,i,n){return t.jquery?this._liveCtxUnbind(t,e,i,n):this.__base(t,e,i)},liveCtxBind:function(t,e,i,n,o){return this._liveCtxBind(t,e,i,n,o)},_liveCtxBind:function(t,n,o,s,r){var a=this;if("object"==typeof n&&(e.isFunction(o)||e.isFunction(s))&&(n=this._buildModEventName(n)),"string"==typeof n)if(e.isFunction(o)&&(r=s,s=o,o=i),n.indexOf(" ")>-1)n.split(" ").forEach(function(e){a._liveCtxBind(t,e,o,s,r)});else{var l=a._buildCtxEventName(n),h=c[l]||(c[l]={counter:0,ctxs:{}});t.each(function(){var t=e.identify(this),i=h.ctxs[t];i||(i=h.ctxs[t]={},++h.counter),i[e.identify(s)+(r?e.identify(r):"")]={fn:s,data:o,ctx:r}})}else e.each(n,function(e,i){a._liveCtxBind(t,e,i,o)});return a},liveCtxUnbind:function(t,e,i,n){return this._liveCtxUnbind(t,e,i,n)},_liveCtxUnbind:function(t,i,n,o){"object"==typeof i&&e.isFunction(n)&&(i=this._buildModEventName(i));var s=c[i=this._buildCtxEventName(i)];return s&&(t.each(function(){var t,i=e.identify(this,!0);i&&(t=s.ctxs[i])&&(n&&delete t[e.identify(n)+(o?e.identify(o):"")],n&&!e.isEmptyObject(t)||(s.counter--,delete s.ctxs[i]))}),s.counter||delete c[i]),this},_extractElemNameFrom:function(t){if(t.__bemElemName)return t.__bemElemName;var e=t.eq(0).attr("class").match(this._buildElemNameRE());return e?e[1]:i},extractParams:B,_buildModClassPrefix:function(t,e){return this._name+(e?f+("string"==typeof e?e:this._extractElemNameFrom(e)):"")+p+t},_buildModValRE:function(t,e,i){return new RegExp("(\\s|^)"+this._buildModClassPrefix(t,e)+"(?:"+p+"("+d+"))?(?=\\s|$)",i)},_buildElemNameRE:function(){return new RegExp(this._name+f+"("+d+")(?:\\s|$)")},buildSelector:function(t,e,i){return"."+g(this._name,t,e,i)},getBlockByUniqId:function(t){return r[t]},getWindowSize:function(){return{width:n.width(),height:n.height()}}});e(function(){t.DOM.scope=e("body")})}(BEM,jQuery),BEM.decl("i-bem__dom",{},{liveInitOnBlockInit:function(t,e){return this.liveInitOnBlockEvent("init",t,e)},liveInitOnBlockOutsideEvent:function(t,e,i){return this._liveInitOnBlockEvent(t,e,i,"findBlocksInside")},liveInitOnChannelEvent:function(t,e,i){return this._liveInitOnEmitterEvent(BEM.channel(t),e,i)},liveInitOnDomlessBlockEvent:function(t,e,i){return this._liveInitOnEmitterEvent(BEM.blocks[t],e,i)},liveInitOnReactBusEvent:function(t,e){return Ya&&Ya.reactBus&&this._liveInitOnEmitterEvent(Ya.reactBus,t,e),this},_liveInitOnEmitterEvent:function(t,e,i){var n=this.buildSelector(),o=this.getName();return t.on(e,function(){var t=$(n);if(t.length){var e=arguments;t.each(function(t,n){var s=$(n).bem(o);"function"==typeof i&&i.apply(s,e)})}}),this},liveInitOnBlockInsideElemEvent:function(t,e,i,n){var o=this.buildSelector(t);return this.liveInitOnBlockInsideEvent(e,i,function(t){"function"==typeof n&&t.target.domElem.parents(o).length>0&&n.apply(this,arguments)})},liveInitOnBlockElemEvent:function(t,e,i,n){var o=this.buildSelector(t);return this.liveInitOnBlockInsideEvent(e,i,function(t){"function"==typeof n&&t.target.domElem.is(o)&&n.apply(this,arguments)})},liveBindToWin:function(t,e){return this._liveInitOnEmitterEvent(this.win,t,e)},liveBindToDoc:function(t,e){return this._liveInitOnEmitterEvent(this.doc,t,e)}}),function(t){var e=t(window),i=o(),n=s();function o(){return window.innerHeight|0+e.outerHeight()}function s(){return window.innerWidth|0+e.outerWidth()}(t.event.special.resize||(t.event.special.resize={})).preDispatch=function(t){var e=o(),r=s();if(n===r&&i===e)return!1;i=e,n=r}}(jQuery),function(){var t=!1,e=[];BEM.channel("i-bem").on("init",function(){t=!0;for(var i=0;i<e.length;i++)e[i]()}),BEM.decl("i-bem__dom",{},{decl:function(t,e,i){var n=this.__base.apply(this,arguments);if("string"==typeof t)return n;if(i&&!1===i.liveMod){var o=t.block||t.name;t.modVal?this._liveModList.push({block:o,selector:".i-bem."+BEM.INTERNAL.buildClass(o,t.modName,t.modVal)}):this._liveModList.unshift({block:o,selector:'.i-bem[class*="'+BEM.INTERNAL.buildClass(o,t.modName,!0)+'"]'})}return n},_liveModList:[],ready:function(i){t?i():e.push(i)},_initAdvanced:function(){BEM.channel("i-bem").trigger("start-init"),this.init();for(var t=this._liveModList,e=0;e<t.length;e++){var i=t[e],n=$(i.selector);n.length&&n.each(function(t,e){$(e).bem(i.block)})}BEM.channel("i-bem").trigger("init")}})}(),$(function(){window.Ya&&window.Ya.SearchSPA||BEM.afterCurrentEvent(function(){BEM.DOM._initAdvanced()})}),jQuery.cookie=function(t,e,i){if(void 0===e){var n=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),s=0;s<o.length;s++){var r=jQuery.trim(o[s]);if(r.substring(0,t.length+1)==t+"="){n=decodeURIComponent(r.substring(t.length+1));break}}return n}i=i||{},null===e&&(e="",i.expires=-1);var a,c="";i.expires&&("number"==typeof i.expires||i.expires.toUTCString)&&("number"==typeof i.expires?(a=new Date).setTime(a.getTime()+24*i.expires*60*60*1e3):a=i.expires,c="; expires="+a.toUTCString());var l=i.path?"; path="+i.path:"",h=i.domain?"; domain="+i.domain:"",u=i.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),c,l,h,u].join("")},function(t){var e={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};function i(t,i){var n="";try{n=t(i)}catch(o){try{n=t(function(t){return t.replace(/%.{2}/g,function(t){return e[t]||t})}(i))}catch(t){n=i}}return n}jQuery.extend({decodeURI:function(t){return i(decodeURI,t)},decodeURIComponent:function(t){return i(decodeURIComponent,t)}})}(),BEM.DOM.decl("i-global",{onSetMod:{js:{inited:function(){this.del(this.__self._params=$.extend({},this.params),"uniqId","name");var t=this.__self._params;t["passport-msg"]||(t["passport-msg"]=t.id),void 0===t["show-counters"]&&(t["show-counters"]=Math.round(100*Math.random())<=t["show-counters-percent"]),t.locale=t.lang,window.BEMHTML&&BEMHTML.apply({block:"i-global",params:t})}}},getDefaultParams:function(){return{id:"",login:this.__self.getCookie("yandex_login")&&$.cookie("yandex_login")||"",yandexuid:$.cookie("yandexuid"),lang:"ru",tld:"ru",retpath:encodeURI($.decodeURI(location.href)),"passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","social-host":"https://social.yandex.ru","lego-path":"/lego","show-counters-percent":100}}},{param:function(t,e){if(void 0===e)return(this._params||{})[t];this._params&&(this._params[t]=e)},getCookie:function(t){var e=document.cookie;if(e.length<1)return!1;var i=e.indexOf(t+"=");if(-1===i)return!1;i+=t.length+1;var n=e.indexOf(";",i);return decodeURIComponent(-1===n?e.substring(i):e.substring(i,n))}}),BEM.DOM.decl("i-global",{},{setParams:function(t){this._params=this._params||{},$.extend(!0,this._params,t),$.extend(!0,Ya.SerpContext,t)},getBlockParams:function(t,e){var i=$(t).data("bem");return!!i&&i[e]}}),BEM.decl("i-global__utils",{},{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",base64Encode:function(t,e){e=e||1e6;var i,n,o,s,r,a,c,l="",h=0;for(t=this._utf8_encode(t,3*e/4|0);h<t.length;)s=(i=t.charCodeAt(h++))>>2,r=(3&i)<<4|(n=t.charCodeAt(h++))>>4,a=(15&n)<<2|(o=t.charCodeAt(h++))>>6,c=63&o,isNaN(n)?a=c=64:isNaN(o)&&(c=64),l=l+this._keyStr.charAt(s)+this._keyStr.charAt(r)+this._keyStr.charAt(a)+this._keyStr.charAt(c);return l},_utf8_encode:function(t,e){t=t.replace(/\r\n/g,"\n");for(var i,n="",o=0;o<t.length;o++){var s=t.charCodeAt(o);if(s<128?i=String.fromCharCode(s):s>127&&s<2048?(i=String.fromCharCode(s>>6|192),i+=String.fromCharCode(63&s|128)):(i=String.fromCharCode(s>>12|224),i+=String.fromCharCode(s>>6&63|128),i+=String.fromCharCode(63&s|128)),n.length+i.length>e)break;n+=i}return n},decodeEntities:function(t){return t.replace(/&(lt|gt|quot|apos|amp);/g,function(t,e){return{lt:"<",gt:">",quot:'"',apos:"'",amp:"&"}[e]})},ampUnescape:function(t){return"string"==typeof t?t.replace(/\&amp;/g,"&"):""},ampUnescapeInHTMLContent:function(t){return"string"==typeof t?t.replace(/(>[^<]+&amp;[^>]+<)/g,this.ampUnescape):""}}),BEM.decl("i-global__utils",{},{handleError:function(t,e){window.Ya.Rum.logError?window.Ya.Rum.logError(e,t):window.console&&window.console.error(t)}}),BEM.DOM.decl("i-global",{},{getFlag:function(t){var e=this.param("expFlags");return e||(e=this.getBlockParams(this.buildSelector(),this.getName()).expFlags||{},this.setParams({expFlags:e})),e[t]}}),BEM.decl("offline-request",{_initOffline:function(){this.bindEvents()},bindEvents:function(){this.__base.apply(this,arguments),this._onOnline=this._onOnline.bind(this),this._onOffline=this._onOffline.bind(this),window.addEventListener("online",this._onOnline),window.addEventListener("offline",this._onOffline)},unbindEvents:function(){window.removeEventListener("online",this._onOnline),window.removeEventListener("offline",this._onOffline),this.__base.apply(this,arguments)},_onOnline:function(){this._onChangeNetworkStatus(!0)},_onOffline:function(){this._onChangeNetworkStatus(!1)},_onChangeNetworkStatus:$.noop},{_isOnlineDetectAllowed:void 0!==window.navigator.onLine,isOnline:function(){return!this._isOnlineDetectAllowed||window.navigator.onLine}}),BEM.decl({block:"counter",baseBlock:"offline-request"},{_dict:{}}),function(){var t={"about-artist":"1457",abuse:"1436",afisha:"30",all:"136",auto:"227",auto_closed:"1431",auto_open:"1430",autoselect:"1419",ajax:"1201",browser:"908",bttntxt:"1452",category:"167",click:"882",close:"486",collections:"2177",control:"1418",controls:"854",disable:"2395",disk:"1032",enable:"2396",entertainment:"1249",episode:"1358",extra:"1800",favicon:"81",feedback:"296",footer:"295",games:"612",go_to_all:"1357",groups:"1360",head:"175",help:"177",hover:"858",humor:"1248",icon:"1167",images:"277",item:"22",kebab:"2729",lang:"1144",last:"1928",landing:"1865",left:"1202",license:"990",lifehacks:"2338",like:"1240",login:"290",login_input:"2343",lyrics:"583",mail:"176",maps:"23",market:"4",menu:"984",morda:"15",more:"75",mult:"1343",music:"56",my_video:"1243",nature:"1251",navig:"208",navigator:"862",news:"3",next:"407","non-stop2":"2902","non-stop":"2394","non-stop-tumbler":"2397",off:"11",on:"10",organic:"2248",other:"861",p0:"85",p1:"86",p10:"95",p11:"96",p12:"97",p13:"98",p14:"99",p15:"100",p16:"101",p17:"102",p18:"103",p19:"104",p2:"87",p20:"105",p21:"106",p22:"107",p23:"108",p24:"109",p25:"110",p26:"111",p27:"112",p28:"113",p29:"114",p3:"88",p30:"115",p31:"116",p32:"117",p33:"118",p34:"119",p35:"120",p36:"121",p37:"122",p38:"123",p39:"124",p4:"89",p40:"125",p41:"126",p42:"127",p43:"128",p44:"129",p45:"130",p46:"131",p47:"132",p48:"133",p49:"134",p5:"90",p50:"139",p6:"91",p60:"1737",p61:"1738",p62:"1739",p63:"1740",p64:"1741",p65:"1742",p66:"1743",p67:"1744",p68:"1745",p69:"1746",p7:"92",p70:"1747",p71:"1748",p72:"1749",p73:"1750",p74:"1751",p75:"1752",p76:"1753",p77:"1754",p78:"1755",p79:"1756",p8:"93",p80:"1757",p81:"1758",p82:"1759",p83:"1760",p84:"1761",p85:"1762",p86:"1763",p87:"1764",p88:"1765",p89:"1766",p9:"94",p90:"1767",p91:"1768",p92:"1769",p93:"1770",p94:"1771",p95:"1772",p96:"1773",p97:"1774",p98:"1775",p99:"1776",pad:"1667",partner:"1219",play:"331",player:"1242",plus:"1412",politics:"1252",popular_query:"1342",popular_video:"1316",popular:"1465",pos:"84",perf:"2096",recommendations:"2671",red_abuse:"1441",related:"1108","related-video":"1598",related_query:"391",resume:"2398",right:"1203",rutube:"1300",science:"1250",season:"1359",serial_700_episodes:"1318",series:"978",serp:"471",services:"210",settings:"1137",share:"599",show:"487",slot0:"650",slot1:"641",slot2:"642",slot3:"643",slot4:"644",slot5:"645",slot6:"646",slot7:"647",slot8:"648",slot9:"649",snippet:"254",soc:"1350",source:"186",sport:"40",stop:"529",submit:"297",tab:"2",tech:"690",thumb:"184",title:"82",timing:"1033",tooltip:"1382",topserials:"1973",translate:"575",tv:"273",unlogin:"1351",userpic:"1126",video:"231","video-player":"1434","video-tabs":"1398","video-touch-pane":"2034",watch_later:"1413",weather:"19",yavideo:"1301",youtube:"624",x:"1944",direct:"155",directid48058:"2230",directid60740:"2231",directid146642:"2232",directid113683:"2476","serp-list":"2223",sent:"2224",callback:"2225","thumb-preview":"2472",poster:"1582",card:"875",hide:"1656","no-auth-popup":"2691",cancel:"1478",soo:"65",google:"66",bing:"568",tags:"2092",channel:"1345",desktop:"2048",bundles:"2960","load-ajax-error":"2961",link:"513",tvonline:"2984",znatoki:"3156",q:"3985","no-localstorage":"3022",wizard:"358",request:"1401"};"undefined"!=typeof BEM&&BEM.decl({block:"counter",baseBlock:"offline-request"},{_dict:t}),"undefined"!=typeof exports&&(exports.dict=t)}(),BEM.decl("counter",{HIT_DELAY:200,onSetMod:{js:{inited:function(){window.Ya=window.Ya||{},window.Ya.counter=this,window.c=this,window.w=this.w,window.cp=this.cp,window.rc=this.redir,this._sendEarlyCalledCounters()}}},_sendEarlyCalledCounters:function(){if(window.Ya&&window.Ya.counterQueue)for(;window.Ya.counterQueue.length;){var t=window.Ya.counterQueue.shift();this._sendEarlyCalledCounter(t)}},_sendEarlyCalledCounter:function(t){this[t[0]]&&"function"==typeof this[t[0]]&&(this[t[0]].apply(this,t[1]),window.Ya.Rum&&window.Ya.Rum.logError({message:t[0]+" was called before init",block:"counter",source:"delegated"}))},_onChangeNetworkStatus:function(t){var e;if(t&&this._countersCache)for(var i in this._countersCache)this._countersCache.hasOwnProperty(i)&&"error"===this._countersCache[i].status&&((e=this._countersCache[i]).status="pending",this._req(e.params))},_getExtParams:function(t){var e=BEM.blocks.location.getInstance().getState(),i=BEM.blocks["i-global"],n=t&&t.path&&this.getPath(t.path),o=i.param("counterParams")||{},s=o.click,r={};return n&&(0===n.indexOf("690")&&(s=o.tech),0!==n.indexOf("690.2096")&&0!==n.indexOf("690.1033")&&0!==n.indexOf("690.1201")||(s=o.perf),s&&(r=$.extend(s,r))),i.param("isYandexApp")&&(r.uuid=BEM.blocks.utils.get(e,"params.uuid.0")),t&&"iweb"===t.dtype&&"origin"===i.param("metaReferrerContent")&&!i.getFlag("mm_referrer_origin_disable_iweb")&&(r.ref=encodeURIComponent(e.url)),r.cts=t&&t.cts?t.cts:Date.now(),r},w:function(t,e,i){var n=window.Ya.counter;e&&n.hit({path:e,vars:n._getVars(i),dtype:"iweb"},t)},wHitDelayed:function(t,e,i){setTimeout(function(){c.w(t,e,i)},this.HIT_DELAY)},cp:function(t,e){t.path&&(t.dtype="stred",window.Ya.counter.hit(t,e))},cpHitDelayed:function(t,e){setTimeout(function(){c.cp(t,e)},this.HIT_DELAY)},hit:function(t,e){var i,n=e&&(e.onclick||e.ondblclick);if(n&&"object"==typeof(i=n())&&$.extend(t,i.counter__params),$.extend(t,this._getExtParams(t)),t.path){t.path=this.getPath(t.path);var o=this.getUrl(t,e);t.resultUrl=o,t.href=e&&e.href,t.reqid=t.reqid||this.getReqId(e),this.log(t),this.makeReq(o)}"iweb"===t.dtype&&this.addMetrikaCookie(e)},hitDelayed:function(t,e){t&&(t.cts=t.cts||Date.now()),setTimeout(function(){c.hit(t,e)},this.HIT_DELAY)},log:function(t){BEM.blocks.counter.debug("counter",{pid:t.pid,cid:t.cid,url:t.resultUrl,path:t.path,decoded:this.getHumanText(t.path),vars:t.vars,href:t.href,reqid:t.reqid,referer:location.href})},makeReq:function(t){var e={id:this.__self._reqNum++,status:"pending",params:{url:t,cache:!0,dataType:"script"}};this._req(e.params)},_req:function(t){$.ajax(t)},getUrl:function(t,e){var i=$.extend({rnd:BEM.blocks.utils.getRnd(2),yuid:this.getUid(),reqid:t.reqid||this.getReqId(e),serpid:t.serpid||this.getSerpId()},t),n=this.stringifyParams(i,"/");return[location.protocol,"//",this.getClickHost(),"/","jclck","/",n,"/*",this._getAsterixData(e)].join("")},_getVars:function(t){return"object"==typeof t?this.stringifyParams(t,","):t},getReqId:function(t){var e,i=BEM.blocks["i-global"],n=i.param("reqid")||i.param("serpid")||"";return t&&((e=$(t).closest(".counter__reqid")).length?BEM.DOM.extractParams(e[0]).counter__reqid:{}).reqid||n},getSerpId:function(){return BEM.blocks["i-global"].param("serpid")},getUid:function(){return BEM.blocks["i-global"].param("yandexuid")},getClickHost:function(){return BEM.blocks["i-global"].param("click-host")},_getAsterixData:function(t){var e=t&&t.href?t.href:location.href;return 0===e.indexOf("//")?location.protocol+e:"/"===e.charAt(0)?location.origin+e:e},stringifyParams:function(t,e){e=e||"&";var i,n=[],o=/\//g;return Object.keys(t).forEach(function(e){void 0!==(i=t[e])&&""!==i&&null!==i&&n.push(e+"="+String(i).replace(o,"%2F"))},this),n.join(e)},getPath:function(t){return"/"===t[0]&&this._dict&&this._decodePath(t)||t},_decodePath:function(t){var e=t.split("/").slice(1),i=this._dict;return i&&e.length&&e.map(function(t){return i[t]||t}).join(".")},decodeBlockstatKey:function(t){var e;return Object.keys(this._dict).some(function(i){if(this._dict[i]===t)return e=i,!0},this),e||t},getHumanText:function(t){return"/"+t.split(".").map(this.decodeBlockstatKey.bind(this)).join("/")},_getMetrikaCookieHostname:function(t){var e=t.hostname;return e.match(/^(www\.)?yandex\.(ru|kz|by|ua|com|com\.tr|net|fr)$/)?e+t.pathname:e},_getMetrikaCookieSource:function(t){var e,i=document.location,n=(i.search.match(/[?&]text=([^&]*)/)||[])[1];if(!t)return"";if(t.hostname&&t.pathname)e=t;else if(t.href){var o=BEM.blocks.uri.parse(t.href);e={hostname:o.host(),pathname:o.path()}}if(!e)return"";n||(n=""),n=decodeURIComponent(n);var s=this._getMetrikaCookieHostname(e),r=BEM.blocks["i-global"].param("reqid");return[n,s,i.pathname,r].map(encodeURIComponent).join(":")},addMetrikaCookie:function(t){var e=BEM.blocks["i-global"];if("origin"===e.param("metaReferrerContent")||e.getFlag("mm_metrika_cookie_apps")){var i=this._getMetrikaCookieSource(t);if(i){var n=Date.now(),o=new Date(6e5+n).toUTCString(),s=e.param("enableSamesiteSc");document.cookie="sc_"+n+"="+i+";path=/watch;domain=."+location.hostname.replace(/^www\./,"")+";expires="+o+(s?";SameSite=None":"")+";secure"}}}},{_reqNum:0,debug:function(t,e){var i=BEM.blocks["i-global"].param("counterDebug");i&&(e=e||"","undefined"!=typeof console&&"function"==typeof console.info&&(console.group("Счётчик "+t),"table"===i&&"function"==typeof console.table&&"object"==typeof e?(console.info("params:"),console.table(e)):console.info("params:",e),console.groupEnd("Счётчик "+t)),window.mm||(window.mm={}),window.mm.counters||(window.mm.counters=[]),window.mm.counters.push({name:t,params:e}))}}),BEM.create("counter"),BEM.decl("counter",{cp:function(t,e,i,n){t.path&&(t.dtype="stred",t.pid||(t.pid=window.Ya.counter.PID),window.Ya.counter.hit(t,e,i,n))},getUrl:function(t,e,i,n){var o=$.extend({reqid:this.getReqId(i||e),rnd:BEM.blocks.utils.getRnd(2),yuid:this.getUid()},t,this._getExtParams(t)),s=this.stringifyParams(o,"/");return[location.protocol,"//",this.getClickHost(),"/",n&&n.root||"jclck","/",s,"/*",this._getAsterixData(e,"stred"===o.dtype)].join("")},hit:function(t,e,i,n){var o;t.path&&(t.path=this.getPath(t.path),o=this.getUrl(t,e,i),t.resultUrl=o,t.href=e&&e.href,t.reqid=t.reqid||this.getReqId(i||e),this.log(t),n?this.makeSendBeaconReq(o):this.makeReq(o))},_getAsterixData:function(t,e){var i="string"==typeof t?t:t&&t.href?t.href:location.href;return e?"data="+encodeURIComponent("url="+i):i},getReqId:function(t){if(t instanceof HTMLElement||t instanceof jQuery)return this.__base.apply(this,arguments);var e=BEM.blocks["i-global"];return e.param("reqid")||e.param("serpid")||""},makeSendBeaconReq:function(t){var e=!1;navigator.sendBeacon&&(e=navigator.sendBeacon(t," ")),e||((new Image).src=t)}}),BEM.create("counter"),BEM.decl("counter",{PID:197,getHash:function(t){var e=0;if(0===t.length)return e;for(var i=0;i<t.length;i++){e=(e<<5)-e+t.charCodeAt(i),e&=e}return Math.abs(e)}}),BEM.decl("uri",{onSetMod:{js:{inited:function(){var t=this;["protocol","host","port","path","anchor"].forEach(function(e){t[e]=function(t){return void 0!==t?(this.uriParts[e]=t,this):this.uriParts[e]}})}}},encode:function(t){return encodeURIComponent(t)},decode:function(t){try{t=decodeURIComponent(t)}catch(e){try{t=decodeURIComponent(this.convert(t))}catch(t){}}return t},convert:function(t){var e={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};return t=t.replace(/%.{2}/g,function(t){return e[t]||t})},normalize:function(t){return(t||"").replace(/\+/g,"%20")},parseUri:function(t){var e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@\/]*))?)?@)?(\[[0-9a-fA-F:.]+\]|[^:\/?#]*)(?::(\d+|(?=:)))?:?)((((?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t||""),i={};return["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"].forEach(function(t,n){i[t]=e[n]||""}),i},parseQuery:function(t){var e,i,n,o,s,r={};if("string"!=typeof t||""===t)return r;for(i=t.replace("?","").split("&"),e=0;e<i.length;e++)n=[(n=i[e].split("=")).shift(),void 0!==n[0]?n.join("="):null],o=this.decode(n[0]),s=n[1]||""===n[1]?this.decode(n[1]):null,r[o]?(s||""===s)&&r[o].push(s):r[o]=null===s?[]:[s];return r},query:function(t){var e="";void 0!==t&&(this.queryParams=this.parseQuery(t));var i=this.queryParams,n=this;return Object.keys(i).forEach(function(t,o){o>0&&(e+="&"),"object"!=typeof i[t]||i[t].length?i[t].forEach(function(i,o){o>0&&(e+="&"),e+=n.encode(t)+"="+n.encode(i)}):e+=t}),e.length>0?"?"+e:e},getParam:function(t){return this.queryParams[t]},deleteParam:function(t,e){var i=[];return void 0!==e&&((this.queryParams[t]||[]).forEach(function(t){t!==e&&i.push(t)}),this.queryParams[t]=i),void 0!==e&&0!==i.length||delete this.queryParams[t],this},addParam:function(t,e){return this.queryParams[t]=(this.queryParams[t]||[]).concat(e),this},replaceParam:function(t,e,i){return this.deleteParam(t,i).addParam(t,e)},scheme:function(){var t="";return this.protocol()?(t+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(t+=":"),t+="//"):this.host()&&(t+="//"),t},origin:function(){var t=this.scheme();return this.host()&&(t+=this.host(),this.port()&&(t+=":"+this.port())),t},getRoot:function(){var t=this.origin();return this.path()&&(t+=this.path().replace(/\/[^\/]*$/,"")),t},pathParts:function(){return this.path().split("/")},toString:function(){var t=this.origin();return this.path()?0!==this.path().indexOf("/")&&"/"!==t[t.length-1]?t+="/"+this.path():t+=this.path():this.host()&&(this.query().toString()||this.anchor())&&(t+="/"),this.query().toString()&&(0!==this.query().toString().indexOf("?")&&(t+="?"),t+=this.query().toString()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(t+="#"),t+=this.anchor()),t},build:function(){var t="";return t+=this.protocol()?this.protocol():window.location.protocol,t+=t.indexOf(":")!==t.length-1?"://":"//",t+=this.host()?this.host():window.location.hostname,this.port()?t+=":"+this.port():!this.host()&&window.location.hostname&&(t+=":"+window.location.port),this.path()?t+=this.path():this.host()?t+="/":t+=window.location.pathname,this.query()&&(0!==this.query().indexOf("?")&&(t+="?"),t+=this.query()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(t+="#"),t+=this.anchor()),t}},{parse:function(t){var e=BEM.create({block:"uri"});return e.uriParts=e.parseUri(e.normalize(t)),e.queryParams=e.parseQuery(e.uriParts.query),e},normalize:function(t){return this.parse(t).toString()}}),BEM.decl("uri",{},{_validUrlRegEx:new RegExp("^(?:(?:https?|ftp)://)(?:(?:(?:xn--)?(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:xn--)?(:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:xn--)?(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/[^\\s]*)?"),_acceptableUrlRegEx:/\S+\.\S{2,}/,setParam:function(t,e,i){void 0===i&&(i=e,e=t,t=BEM.blocks.location.getInstance().getState().url);var n=this.parse(t);return BEM.blocks.utils.isEmpty(i)?n.deleteParam(e).toString():n.queryParams[e]?n.replaceParam(e,i).toString():n.addParam(e,i).toString()},setParams:function(t,e){"object"==typeof t&&(e=t,t=BEM.blocks.location.getInstance().getState().url);var i=this.parse(t);return BEM.blocks.utils.forOwn(e,function(t,e){void 0===t?i.deleteParam(e):i.queryParams[e]?i.replaceParam(e,t):i.addParam(e,t)}),i.toString()},delParams:function(t,e){void 0===e&&Array.isArray(t)&&(e=t,t=BEM.blocks.location.getInstance().getState().url);var i=this.parse(t);return"string"==typeof e&&i.deleteParam(e),Array.isArray(e)&&e.forEach(function(t){i.deleteParam(t)}),i.toString()},filterParams:function(t,e){void 0===e&&(e=t,t=BEM.blocks.location.getInstance().getState().url);var i=this.parseParams(t);for(var n in i)i.hasOwnProperty(n)&&(e.call(this,n,i[n],t)||(t=this.delParams(t,n)));return t},buildRelativeUrl:function(t,e){return void 0===e&&"object"==typeof t&&(e=t,t=BEM.blocks.location.getInstance().getState().url),!e||BEM.blocks.utils.isEmpty(e)?t:(e=Array.isArray(e)?[].concat(e):$.extend({},e),e=$.param(e,!0),BEM.blocks.uri.normalize(t+(t.indexOf("?")>=0?"&":"?")+e))},parseParams:function(t){return void 0===t&&(t=BEM.blocks.location.getInstance().getState().url),this.parse(this.clearHashSymbol(t)).queryParams},getFlatParams:function(t){var e=this.parseParams(t),i={};return BEM.blocks.utils.forOwn(e,function(t,e){i[e]=1===t.length?t[0]:t}),i},clearHashSymbol:function(t){return BEM.blocks.utils.isEmpty(t)&&(t=BEM.blocks.location.getInstance().getState().url),t.replace(/[^\/]*\/?#!\//,"")},getPath:function(t){return this.parse(t).path()},isValid:function(t){return this._validUrlRegEx.test(t)},isAcceptable:function(t){return this._acceptableUrlRegEx.test(t)},getParamValue:function(t,e){void 0===e&&(e=t,t=BEM.blocks.location.getInstance().getState().url);var i=this.parse(t).getParam(e);return"string"==typeof i?i:Array.isArray(i)?i[0]:void 0}}),BEM.blocks.utils=function(){throw new Error("This is static block")},BEM.blocks.utils.getRnd=function(t){return(new Date).getTime()+Math.floor(Math.random()*Math.pow(10,t))},BEM.blocks.utils.memoize=function(t){var e;return function(){return e||(e=t.apply(this)),e}},BEM.blocks.utils.forOwn=function(t,e,i){var n;for(n in t)if(t.hasOwnProperty(n)&&void 0!==e.call(i,t[n],n,t))return},BEM.blocks.utils.get=function(t,e,i){if(null===t||void 0===t||"string"!=typeof e)return i;var n,o=e.split("."),s=t,r=o.length;for(n=0;n<r;n++)if(null===(s=s[o[n]])||void 0===s)return i;return s},BEM.blocks.utils.escape=function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},BEM.blocks.utils.unescape=function(t){return String(t).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&#39;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},BEM.blocks.utils.isEmpty=function(t){if(null===t||void 0===t)return!0;if(t.length>0)return!1;if(0===t.length)return!0;for(var e in t)if(hasOwnProperty.call(t,e))return!1;return!0},BEM.blocks.utils.getPassportUrl=function(t,e){var i=BEM.blocks["i-global"].param("passport-host")+(BEM.blocks["i-global"].param("login")?"/passport?mode=passport":"/auth"),n=Math.floor(1e4*Math.random()),o=BEM.blocks.location.getInstance().getUri().replaceParam("ncrnd",n);return e&&Object.keys(e).forEach(function(t){o.replaceParam(t,e[t])}),BEM.blocks.uri.setParams(i,$.extend({retpath:o.toString()},t))},BEM.blocks.utils.EMAIL_PATTERN=/[^@]+@[^.]+\..{2,}/i,BEM.blocks.utils.isValidEmail=function(t){return this.EMAIL_PATTERN.test(t)},BEM.blocks.utils.getHash=function(t){var e=0;if(0===t.length)return e;for(var i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e&=e;return Math.abs(e)},Array.prototype.find||(Array.prototype.find=function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,i=Object(this),n=i.length>>>0,o=arguments[1],s=0;s<n;s++)if(e=i[s],t.call(o,e,s,i))return e}),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t){"use strict";if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(void 0!==n&&null!==n)for(var o=Object.keys(Object(n)),s=0,r=o.length;s<r;s++){var a=o[s],c=Object.getOwnPropertyDescriptor(n,a);void 0!==c&&c.enumerable&&(e[a]=n[a])}}return e}}),Number.isNaN||(Number.isNaN=function(t){return"number"==typeof t&&isNaN(t)}),BEM.blocks.utils.sendToQuasar=function(t,e,i,n){var o=BEM.blocks["i-global"];"desktop"===o.param("platform")?Ya.reactBus.emit("quasar-popup:open",o.param("login")?{title:t.title,videoData:{playUri:t.player.noAutoplayHtml,providerItemId:t.url,providerName:t.greenHost,sourceHost:t.hosting,playerId:t.playerId,visibleUrl:t.visibleUrl},callbacks:e}:{anchorDomElem:i.domElem[0],scopeDomElem:n}):BEM.blocks["quasar-controller"].openPopup(t,e)},BEM.DOM.decl("i-global",{},{extendCounterParams:function(){}}),function(){var t;function e(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16)})}function i(t){return decodeURIComponent(t)}BEM.decl("i-cookie",{defaultExpires:Math.round(new Date/1e3)+604800,getExpirationDate:function(t){return Math.round(Date.now()/1e3+24*t*60*60)},getDefaultParams:function(){return{yp:{expires:new Date("Tue Jan 1 00:00:00 2038"),domain:".yandex."+BEM.blocks["i-global"].param("tld"),path:"/"},ys:{domain:".yandex."+BEM.blocks["i-global"].param("tld"),path:"/"}}},ypRead:function(){for(var t=$.cookie("yp"),e=t?t.split("#"):[],n=new Date/1e3,o={},s=0,r=e.length;s<r;s++){var a=e[s].split("."),c=a[0],l=a[1],h=a.slice(2).join(".");c>n&&(o[l]={value:i(h),expires:c})}return o},ypWrite:function(t){for(var i,n=[],o=0,s=Object.keys(t),r=s.length;o<r;o++)i=t[s[o]],n.push([i.expires,s[o],!1===i.encode?i.value:e(i.value)].join("."));$.cookie.set("yp",n.join("#"),this.params.yp)},ypRemove:function(t){var e=this.ypRead();t&&e[t]&&(delete e[t],this.ypWrite(e))},yp:function(t,e,i){var n={};"object"==typeof t&&(t=(n=t).name,e=n.value,i=n.expires);var o=this.ypRead(),s=o[t];return void 0===e?s&&s.value:(s||(s={}),s.value=e,s.expires=i||s.expires||this.defaultExpires,s.encode=n.encode,o[t]=s,this.ypWrite(o))},ysRead:function(){var t=$.cookie("ys"),e={};return(t?t.split("#"):[]).forEach(function(t){var n=t.split("."),o=n[0],s=n.slice(1).join(".");e[o]=i(s)}),e},ysWrite:function(t){for(var i=[],n=0,o=Object.keys(t),s=o.length;n<s;n++)i.push([o[n],e(t[o[n]])].join("."));$.cookie.set("ys",i.join("#"),this.params.ys)},ys:function(t,e){var i=this.ysRead();return e?(i[t]=e,this.ysWrite(i)):i[t]}},{get:function(){return t||(t=BEM.create("i-cookie"))}})}(),jQuery.cookie=function(){var t=function(e,i,n){if(void 0===i){var o=t.get(e);return o?decodeURIComponent(o):null}t.set(e,encodeURIComponent(i),n)};return $.extend(t,{get:function(t){return this.getAll()[t]},getAll:function(){for(var t=this.readCookie(),e=t?t.split("; "):[],i={},n=0;n<e.length;n++){var o=e[n].split("="),s=o[0],r=o.slice(1).join("=");'"'===r.charAt(0)&&(r=r.slice(1,-1)),i[s]=r}return i},set:function(t,e,i){var n,o;i||(i={}),"number"==typeof(n=i.expires)&&(n=new Date(Date.now()+24*n*60*60*1e3)),o=[t,"=",e,n&&"; expires="+n.toUTCString(),i.path&&"; path="+i.path,i.domain&&"; domain="+i.domain,i.secure?"; secure":""].join(""),this.writeCookie(o)},remove:function(t){this.set(t,"",{expires:-1})},readCookie:function(){return document.cookie},writeCookie:function(t){document.cookie=t}}),t}(),Ya.reactBus=Ya.reactBus||function(){var t=function(){var t={exports:{}};function e(){}return e.prototype={on:function(t,e,i){var n=this.e||(this.e={});return(n[t]||(n[t]=[])).push({fn:e,ctx:i}),this},once:function(t,e,i){var n=this;function o(){n.off(t,o),e.apply(i,arguments)}return o._=e,this.on(t,o,i)},emit:function(t){for(var e=[].slice.call(arguments,1),i=((this.e||(this.e={}))[t]||[]).slice(),n=0,o=i.length;n<o;n++)i[n].fn.apply(i[n].ctx,e);return this},off:function(t,e){var i=this.e||(this.e={}),n=i[t],o=[];if(n&&e)for(var s=0,r=n.length;s<r;s++)n[s].fn!==e&&n[s].fn._!==e&&o.push(n[s]);return o.length?i[t]=o:delete i[t],this}},t.exports=e,t.exports.TinyEmitter=e,t.exports}();return(0,{reactBus:function(t){var e=[],i=t.emit,n=!1,o=window.Ya&&window.Ya.SerpContext||{},s=o&&o.expFlags||{};function r(){if(window.BEM&&!n)return n=!0,t.emit=i,e.forEach(function(e){t.emit.apply(t,e)}),e.length=0,!0}return t.emit=function(){return e.push(Array.prototype.slice.call(arguments)),t},s.react_init_on_page_load||o.reactInitOnPageLoad?document.addEventListener("DOMContentLoaded",r):BEM.DOM.ready(r),t}}.reactBus)(new t)}(),BEM.channel("i-react-bus").trigger("loaded"),function(t,e){var i={};/msie|trident/i.test(e)?i.ie=parseInt(e.split(/msie|rv:/i)[1],10):-1!==e.indexOf("Opera")?i.opera=parseInt(e.split(/Version\//i)[1],10):"undefined"!=typeof InstallTrigger&&-1!==e.indexOf("Firefox")&&(i.firefox=parseInt(e.split(/Firefox\//)[1],10));var n,o={},s={};(n=e.match(/Windows\sPhone[^\d]*\s([\d.]+)/))?o.wp=n[1]:(n=e.match(/Android\s+([\d.]+)/))?o.android=n[1]:e.match(/\sHTC[\s_].*AppleWebKit/)?o.android="2.3":(n=e.match(/iPhone\sOS\s([\d_]+)/))?(o.ios=n[1].replace(/_/g,"."),s.iphone=!0):(n=e.match(/iPad.*OS\s([\d_]+)/))?(o.ios=n[1].replace(/_/g,"."),s.ipad=!0):(n=e.match(/Bada\/([\d.]+)/))?o.bada=n[1]:(n=e.match(/MSIE\s9/))?o.wp="7.5":o.other=!0,BEM.DOM.decl("i-ua",{onSetMod:{js:{inited:function(){var t=this.__self,e="other";["ios","android","bada","wp","opera"].some(function(i){return t[i]&&(e=i)}),this.setMod("platform",e)}}},setVersion:function(){var t=this.parseVersion();t&&(this.setMod(t.platform,t.major),this.setMod(t.platform+"-subversion",t.subversion))},parseVersion:function(){if(this.__self.ios||this.__self.android){var t=(this.__self.ios||this.__self.android).split("."),e=t.shift(),i=t.join("-");return{platform:this.getMod("platform"),major:e,subversion:i}}}},{ios:o.ios,iphone:s.iphone,ipad:s.ipad,android:o.android,bada:o.bada,wp:o.wp,other:o.other,ua:e,ie:i.ie,opera:i.opera,firefox:i.firefox})}(window,navigator.userAgent||""),function(){var t,e;BEM.decl("i-ua",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.__self.wp&&this.afterCurrentEvent(function(){var t=document.querySelector("html"),e=t.getAttribute("class").replace("i-ua_inlinesvg_no","i-ua_inlinesvg_yes");t.setAttribute("class",e)})}}}},{canUseCSSAnimation:function(){var t=document.createElement("div"),e="Webkit Moz O ms Khtml".split(" ");if(void 0!==t.style.animationName)return!0;for(var i=0;i<e.length;i++)if(void 0!==t.style[e[i]+"AnimationName"])return!0;return!1},hasHistoryAPI:Boolean(window.history&&history.pushState),canUseAjax:function(){return void 0===t&&(t="function"==typeof(window.History||window.history||{}).replaceState&&this.isCookieEnabled()),t},isCookieEnabled:function(){if(void 0===e){var t=Math.random().toString(16).slice(2);document.cookie=t+"=1",e=document.cookie.indexOf(t)>=0,document.cookie=t+"=;expires="+new Date(0).toGMTString()}return e},getTransitionEndEvent:BEM.blocks.utils.memoize(function(){var t={webkitTransition:"webkitTransitionEnd",OTransition:"otransitionend",mozTransition:"transitionend",transition:"transitionend"};for(var e in t)if(t.hasOwnProperty(e)&&void 0!==document.body.style[e])return t[e];return"transitionend"}),isPointerEventsAvailable:BEM.blocks.utils.memoize(function(){return void 0!==document.body.style.pointerEvents}),isCopySupported:function(){return void 0===this._isCopySupported&&(this._isCopySupported="getSelection"in window&&"queryCommandSupported"in document&&"execCommand"in document&&document.queryCommandSupported("copy")),this._isCopySupported},getConnectionType:function(){var t=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return t?t.type:""},isYandexAppIos:function(){return/YaApp_iOS/.test(navigator.userAgent)},isYandexAppAndroid:function(){return/YandexSearch/.test(navigator.userAgent)},isFirefox:"undefined"!=typeof InstallTrigger})}(),BEM.DOM.decl("i-ua",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._detectIE11()}}},_detectIE11:function(){11===BEM.blocks["i-ua"].ie&&this.setMod("browser","ie11")}}),function(t){var e=1,i=!1;if("deviceXDPI"in screen&&"logicalXDPI"in screen?e=screen.deviceXDPI/screen.logicalXDPI:"devicePixelRatio"in t&&(e=t.devicePixelRatio),"function"==typeof t.matchMedia){i=t.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 124dpi)").matches}else i=e>=1.3;BEM.DOM.decl("i-ua",{},{dpr:e,hiDpi:i})}(window),BEM.DOM.decl("b-page",{onSetMod:{js:{inited:function(){this.findBlocks(),this.bindEvents(),this._loadAsyncBundles(),BEM.blocks["i-global"].setParams({hasHistoryAPI:Boolean(window.history&&history.pushState)})}}},findBlocks:$.noop,bindEvents:function(){return this.bindToWin("blur",$.throttle(function(){this.trigger("blur")},150,this)),this.bindToWin("resize orientationchange",$.throttle(this._onResize,200,this)),this.bindToWin("resize orientationchange",$.debounce(this._onResize,800)),this.bindToWin("scroll",$.throttle(this._onDomScroll,200,this)),this},destruct:function(){this.unbindEvents(),this.__base.apply(this,arguments)},_onResize:function(){this.trigger("resize")},_onDomScroll:function(){var t=this;window.requestAnimationFrame(function(){t.trigger("scroll")})},getSeo:function(){return this.params.seo},_loadAsyncBundles:function(){BEM.blocks["i-global"].param("pushBundleAsyncOnInit").forEach(function(t){BEM.blocks["i-bundle-async"].load(t)})},updateTitle:function(t){var e=document.createElement("i");e.innerHTML=t,document.title=e.firstChild&&e.firstChild.nodeValue||e.nodeValue||""},_getFilterParams:$.noop},{getInstance:function(){return this._instance||(this._instance=BEM.DOM.scope.bem("b-page")),this._instance}}),BEM.DOM.decl("b-page",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.findBlocks(),BEM.blocks["i-global"].param("isPumpkin")&&BEM.blocks.header.getSearch().fill(BEM.blocks.uri.getParamValue("text"))}}},findBlocks:function(){return this._header=this.findBlockInside("header"),this._headerHeight=0,this._header&&(this._headerHeight=this._header.getHeight()),this},bindEvents:function(){return this.__base.apply(this,arguments),BEM.blocks["i-global"].param("mobile")&&this.bindToWin("touchmove",$.throttle(this._onTouchMove,200,this)),this},_onTouchMove:function(){this.trigger("touchmove")},_getTabs:function(){return this.tabsNavigation=this.findBlockInside("tabs-navigation"),this.tabsNavigation}}),BEM.DOM.decl("b-page",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.params.isDistributionNeeded&&!BEM.blocks["i-global"].param("isPumpkin")&&BEM.blocks.atom.initStripe()}}}}),function(t,e){if(!t)throw new Error("Rum: interface is not included");if(!t.enabled)return t.getSetting=function(){return""},t.getVarsList=function(){return[]},void(t.getResourceTimings=t.pushConnectionTypeTo=t.pushTimingTo=t.normalize=t.sendCounter=t.sendDelta=t.sendTimeMark=t.sendResTiming=t.sendTTI=t.makeSubPage=t.sendHeroElement=t.onReady=function(){});t.getVarsList=function(){var e=t._vars;return Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t]).replace(/\*/g,"%2A")})},t.setVars=function(e){Object.keys(e).forEach(function(i){t._vars[i]=e[i]}),D(),T()};var i,n,o="690.1033",s="690.2096.207",r="690.2096.2877",a="690.2096.2044",c="690.2096.361",l="690.2096.4004",h=10,u=3e3,d=2e4,p={connectEnd:2116,connectStart:2114,decodedBodySize:2886,domComplete:2124,domContentLoadedEventEnd:2131,domContentLoadedEventStart:2123,domInteractive:2770,domLoading:2769,domainLookupEnd:2113,domainLookupStart:2112,duration:2136,encodedBodySize:2887,entryType:2888,fetchStart:2111,initiatorType:2889,loadEventEnd:2126,loadEventStart:2125,nextHopProtocol:2890,redirectCount:1385,redirectEnd:2110,redirectStart:2109,requestStart:2117,responseEnd:2120,responseStart:2119,secureConnectionStart:2115,startTime:2322,transferSize:2323,type:76,unloadEventEnd:2128,unloadEventStart:2127,workerStart:2137},f={visible:1,hidden:2,prerender:3},m={bluetooth:2064,cellular:2065,ethernet:2066,none:1229,wifi:2067,wimax:2068,other:861,unknown:836,0:836,1:2066,2:2067,3:2070,4:2071,5:2768},_={"first-paint":2793,"first-contentful-paint":2794},g=Object.keys(_).length,b=t.getTime,v=window.PerformanceObserver,y=window.performance||{},M=y.timing||{},E=y.navigation||{},k=navigator.connection,B={},w={},C=t._deltaMarks,S=document.createElement("link"),x=document.createElement("a"),P="function"==typeof y.getEntriesByType,I=M.navigationStart;function D(){i=t.getVarsList(),t.getSetting("sendClientUa")&&i.push("1042="+encodeURIComponent(navigator.userAgent))}function T(){n=i.concat(["143.2129="+I])}if(D(),T(),t.ajaxStart=0,t.ajaxComplete=0,v)try{new v(function(t,e){var n=t.getEntriesByType("navigation")[0];if(n){e&&e.disconnect();var o=[];rt(o,n),it(o),ct("690.2096.2892",i.concat(o))}}).observe({entryTypes:["navigation"]})}catch(t){}function O(t){function e(){removeEventListener("DOMContentLoaded",e),removeEventListener("load",e),t()}"loading"===document.readyState?(addEventListener("DOMContentLoaded",e),addEventListener("load",e)):t()}function A(){var e;t.getSetting("disableOnLoadTasks")||(removeEventListener("load",A),(e=t.getSetting("periodicStatsIntervalMs"))||null===e||(e=15e3),e&&(N=setInterval($,e)),addEventListener("beforeunload",$),function(){if(v){Y(y.getEntriesByType("navigation")),Y(y.getEntriesByType("resource"));try{new v(function(t){Y(t.getEntries())}).observe({entryTypes:["resource","navigation"]})}catch(t){}t._periodicTasks.push(G)}}(),function(){if(v)try{new v(function(t,e){var i=t.getEntries()[0];if(i){var n=i.processingStart-i.startTime;U("first-input",n),e.disconnect()}}).observe({type:"first-input",buffered:!0})}catch(t){}}(),function(){if(v){var t=new v(function(t){var e=t.getEntries();null==H&&(H=0);for(var i=0;i<e.length;i++){var n=e[i];n.hadRecentInput||(H+=n.value)}});try{t.observe({type:"layout-shift",buffered:!0})}catch(t){}addEventListener("visibilitychange",function e(){if("hidden"===document.visibilityState){removeEventListener("visibilitychange",e);try{"function"==typeof t.takeRecords&&t.takeRecords(),t.disconnect()}catch(t){}X()}}),addEventListener("beforeunload",X)}}(),function(){if(v&&(t.getSetting("forcePaintTimeSending")||!t.isVisibilityChanged())){var e=new v(function(t){for(var e=t.getEntries(),i=0;i<e.length;i++){var n=e[i];Q=n.renderTime||n.loadTime}J||(j("largest-loading-elem-paint",Q),J=!0)});try{e.observe({type:"largest-contentful-paint",buffered:!0})}catch(t){}addEventListener("visibilitychange",function t(){if("hidden"===document.visibilityState){removeEventListener("visibilitychange",t);try{"function"==typeof e.takeRecords&&e.takeRecords(),e.disconnect()}catch(t){}Z()}}),addEventListener("beforeunload",Z)}}())}function L(){var e=M.domContentLoadedEventStart,n=M.domContentLoadedEventEnd;if(0!==e||0!==n){var s=i.concat(["2129="+I,"1036="+(M.domainLookupStart-I),"1037="+(M.domainLookupEnd-M.domainLookupStart),"1038="+(M.connectEnd-M.connectStart),M.secureConnectionStart&&"1383="+(M.connectEnd-M.secureConnectionStart),"1039="+(M.responseStart-M.connectEnd),"1040="+(M.responseEnd-M.responseStart),"1040.906="+(M.responseEnd-M.domainLookupStart),"1310.2084="+(M.domLoading-M.responseStart),"1310.2085="+(M.domInteractive-M.responseStart),"1310.1309="+(n-e),"1310.1007="+(e-M.responseStart),navigator.deviceMemory&&"3140="+navigator.deviceMemory,navigator.hardwareConcurrency&&"3141="+navigator.hardwareConcurrency]);Object.keys(p).forEach(function(t){t in M&&M[t]&&s.push(p[t]+"="+at(M[t],I))}),t.vsStart?(s.push("1484="+(f[t.vsStart]||2771)),t.vsChanged&&s.push("1484.719=1")):s.push("1484="+f.visible),E&&(E.redirectCount&&s.push("1384.1385="+E.redirectCount),1!==E.type&&2!==E.type||s.push("770.76="+E.type)),it(s),ct(o,s)}else setTimeout(L,50)}O(function(){I&&setTimeout(function(){t.sendTimeMark=j,t.sendResTiming=z,t.timeEnd=V;for(var e=t._defRes;e.length;){var i=e.shift();z(i[0],i[1])}for(var n=t._defTimes;n.length;){var o=n.shift();j(o[0],o[1],!1,o[2])}Object.keys(C).forEach(function(t){U(t)}),L(),function e(){if(P&&(t.getSetting("forcePaintTimeSending")||!t.isVisibilityChanged())){for(var i=y.getEntriesByType("paint"),n=0;n<i.length;n++){var o=i[n],s=_[o.name];s&&!R[o.name]&&(R[o.name]=!0,F++,j("1926."+s,o.startTime))}if(F<g)try{new v(function(t,i){e(),i&&i.disconnect()}).observe({entryTypes:["paint"]})}catch(t){}}}(),t.getSetting("sendAutoElementTiming")&&tt(),et(),"complete"===document.readyState?A():addEventListener("load",A)},0)}),t._getCommonVars=function(){return i};var N,R={},F=0;function j(i,n,o,r){n===e&&(n=b()),o!==e&&!0!==o||t.mark(i,n);var a=st(i);if(a.push("207="+at(n)),q(a,r)){ct(s,a),B[i]=B[i]||[],B[i].push(n);var c=t._markListeners[i];c&&c.length&&c.forEach(function(t){t(n)})}}function q(t,e){if(e){if(e.isCanceled&&e.isCanceled())return!1;Object.keys(e).forEach(function(i){"function"!=typeof e[i]&&t.push(i+"="+e[i])})}return!0}function V(t,e){var i=C[t];i&&0!==i.length&&(i.push(b(),e),U(t))}function U(i,n,o){var s,a,c,l=C[i];if(void 0!==n?s=(a=t.getTime())-n:l&&(s=l[0],a=l[1],c=l[2]),s!==e&&a!==e){var h=st(i);h.push("207.2154="+at(s),"207.1428="+at(a),"2877="+at(a-s)),q(h,o)&&q(h,c)&&(ct(r,h),delete C[i])}}function z(e,i){nt(i,function(n){if(n){var o=st(e);t.getSetting("sendUrlInResTiming")&&o.push("13="+encodeURIComponent(i)),rt(o,n[0]),ct(a,o)}})}function $(){var e=!1;t._periodicTasks.forEach(function(t){t()&&(e=!0)}),e||clearInterval(N)}t.getTimeMarks=function(){return B},t._periodicTasks=[];var H,W=0;function Y(t){if(t&&t.length)for(var e=w,i=0;i<t.length;i++){var n=K(t[i]);if(n){var o=n.domain+"-"+n.extension,s=e[o]=e[o]||{count:0,size:0};s.count++,s.size+=n.size}}}function K(t){var e=t.transferSize;if(null!=e){x.href=t.name;var i=x.pathname;if(0!==i.indexOf("/clck")){var n=i.lastIndexOf("."),o="";return-1!=n&&i.lastIndexOf("/")<n&&i.length-n<=5&&(o=i.slice(n+1)),{size:e,domain:x.hostname,extension:o}}}}function G(){var e=t.getSetting("maxTrafficCounters")||250;if(W>=e)return!1;for(var n=Object.keys(w),o="",s=0;s<n.length;s++){var r=n[s],a=w[r];o+=encodeURIComponent(r)+"!"+a.count+"!"+a.size+";"}if(o.length){W++;var l=i.concat(["d="+o,"t="+at(b())]);ct(c,l)}return w={},W<e}function X(){if(null!=H){var t=Math.round(1e6*H)/1e6;ct(l,i.concat("s="+t)),H=null}}var Q=null,J=!1;function Z(){null!=Q&&(j("largest-contentful-paint",Q),Q=null)}var tt=v?function(){if(t.getSetting("forcePaintTimeSending")||!t.isVisibilityChanged())try{new v(function(t){for(var e=t.getEntries(),i=0;i<e.length;i++){var n=e[i];j("element-timing."+n.identifier,n.startTime)}}).observe({type:"element",buffered:!0})}catch(t){}}:function(){};function et(e,i,n){if(t._tti){var o=b(),s=function(e,s,r){var a={2796.2797:ot(r,i),689.2322:at(o)};n&&Object.keys(n).forEach(function(t){a[t]=n[t]}),j(e||"2795",s,!0,a),t._tti.fired=!0};!function n(){var r,a=i||o,c=b(),l=t._tti.events||[],h=l.length;0!==h&&(r=l[h-1],a=Math.max(a,Math.floor(r.startTime+r.duration))),c-a>=u?s(e,a,l):c-a>=d?s(e,(i||o)+d,l):setTimeout(n,1e3)}()}}function it(t){k&&t.push("2437="+(m[k.type]||2771),k.downlinkMax!==e&&"2439="+k.downlinkMax,k.effectiveType&&"2870="+k.effectiveType,k.rtt!==e&&"rtt="+k.rtt,k.downlink!==e&&"dwl="+k.downlink)}function nt(t,e){if(!P)return e(null);S.href=t;var i=S.href,n=0,o=100;setTimeout(function t(){var s=y.getEntriesByName(i);if(s.length)return e(s);n++<h?(setTimeout(t,o),o+=o):e(null)},0)}function ot(t,e){return t=t||[],e=e||0,t.filter(function(t){return t.startTime-e>=-50}).map(function(t){var e=t.name?t.name.split("-").map(function(t){return t[0]}).join(""):"u",i=Math.floor(t.startTime);return e+"-"+i+"-"+Math.floor(i+t.duration)}).join(".")}function st(e){return n.concat(["1701="+e,t.ajaxStart&&"1201.2154="+at(t.ajaxStart),t.ajaxComplete&&"1201.2052="+at(t.ajaxComplete)])}function rt(t,e){Object.keys(p).forEach(function(i){if(i in e){var n=e[i];(n||0===n)&&t.push(p[i]+"="+at(n))}})}function at(t,e){return"string"==typeof t?encodeURIComponent(t):Math.round(1e3*(t-(e||0)))/1e3}function ct(e,i){var n=encodeURIComponent(window.YaStaticRegion||"unknown");i.push("-cdn="+n);var o=i.filter(Boolean).join(",");t.send(null,e,o)}t.sendTTI=et,t.sendHeroElement=function(t){j("2876",t)},t._subpages={},t.makeSubPage=function(e,i){var n=t._subpages[e];t._subpages[e]=void 0===n?n=0:++n;var o=!1;return{689.2322:at(void 0!==i?i:b()),2924:e,2925:n,isCanceled:function(){return o},cancel:function(){o=!0}}},t._getLongtasksStringValue=ot,t.getResourceTimings=nt,t.pushConnectionTypeTo=it,t.pushTimingTo=rt,t.normalize=at,t.sendCounter=ct,t.sendDelta=U,t.sendTrafficData=G,t.finalizeLayoutShiftScore=X,t.finalizeLargestContentfulPaint=Z,t.onReady=O}(Ya.Rum),BEM.decl("rum__bem-ajax",{onSetMod:{js:function(){var t=this;this._requests={},BEM.channel("ajax").on({ajaxAction:function(){t._actionTime=Ya.Rum.getTime(),Ya.Rum.sendTrafficData(),Ya.Rum.finalizeLayoutShiftScore(),Ya.Rum.finalizeLargestContentfulPaint()},successCallbacksStarted:function(){t._renderStart=Ya.Rum.getTime()},successCallbacksFinished:function(){t._renderStart&&(t._renderDuration=Ya.Rum.getTime()-t._renderStart,t._renderStart=null)}}),BEM.DOM.doc.on({ajaxSend:this._onSend.bind(this),ajaxSuccess:this._onSuccess.bind(this),ajaxError:this._onError.bind(this),ajaxComplete:this._onComplete.bind(this)})}},_getRequestTracker:function(t){return this._requests[$.identify(t)]},_onSend:function(t,e,i){i=i||{},this._shouldTrackRequest(i)&&(this._requests[$.identify(e)]=new Ya.Rum.AjaxPerf({xhr:e,url:i.url,actionTime:this._actionTime}),this._actionTime=null)},_onSuccess:function(t,e,i,n){if(n&&n.error){var o=this._getRequestTracker(e);o&&o.onRequestError("Handled: "+n.error)}},_onError:function(t,e,i,n){var o=this._getRequestTracker(e);o&&o.onRequestError(n)},_onComplete:function(t,e){var i=this._getRequestTracker(e);i&&(i.onRequestComplete(),this._renderDuration&&i.onRenderComplete(this._renderDuration),delete this._requests[$.identify(e)],this._renderDuration=null,this.afterCurrentEvent(function(){i.send()}))},_shouldTrackRequest:function(t){var e=BEM.blocks.uri.parse(t.url),i=e.queryParams;return this._validateUrl(e)&&i.ajax&&!(i.rpt||i.filter)},_validateUrl:function(t){return!1}},{getInstance:function(){return this._instance||(this._instance=BEM.create("rum__bem-ajax"))}}),BEM.decl("rum__bem-ajax",{_validateUrl:function(t){var e=t.toString(),i=BEM.blocks.location.getInstance(),n={url:e,path:t.path(),params:t.queryParams};return"b-page_type_search"===i.detectBlock(n)&&e.indexOf("serp-list_infinite_yes")>-1}}),BEM.DOM.decl("extra-content",{appendContent:function(t){BEM.DOM.append(this.domElem,$(t).children())},setMetadata:function(t){this._metadata=t},getMetadata:function(){return this._metadata||this.params.metadata}},{getInstance:function(){if(!this._instance){var t=$(this.buildSelector());this._instance=t.length?t.bem(this.getName()):void 0}return this._instance}}),BEM.decl("i-bundle-async",{},{_bundles:{},isLoadingDone:function(t){var e=this._bundles[t];return!!e&&"pending"!==e.state()},load:function(t){var e,i,n=this,o=BEM.channel("bundle-loaded");return this._bundles[t]?("resolved"===this._bundles[t].state()&&o.trigger(t),this._bundles[t]):(i=$.Deferred(),(e=BEM.blocks["i-global"].param("pushBundleAsyncUrls"))[t]?($.getJSON(e[t]).done(function(e){var n=BEM.blocks["i-global"].param("nonce"),o=[];e.css&&o.push('<style data-bundle_s="'+t+'">'+e.css+"</style>"),e.js&&o.push('<script data-bundle_s="'+t+'" nonce="'+n+'">'+e.js+"<\/script>"),BEM.DOM.append(BEM.DOM.scope,o.join("")),i.resolve()}).fail(function(){n._onError(i,t)}),this._bundles[t]=i.promise(),this._bundles[t].then(function(){o.trigger(t)}),this._bundles[t]):(this._onError(i,t),i))},_onError:function(t,e){c.hitDelayed({dtype:"iweb",reqid:BEM.blocks["i-global"].param("reqid"),path:"/"+BEM.blocks["i-global"].param("project")+"/bundles/load-ajax-error",vars:window.Ya.counter.stringifyParams({17:e},",")}),t.reject()}}),BEM.DOM.decl("i-global-post",{onSetMod:{js:{inited:function(){BEM.blocks["i-global"].setParams(this.params.data)}}}}),BEM.DOM.decl("i-global-post",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);for(var t=this.params.data,e=t.errors||[],i=0;i<e.length;i++){var n=e[i];this.logDataError({block:"b-page",source:"data",sourceMethod:"data_"+n+"_"+t.platform},new Error("Incorrect data "+n))}}}},logDataError:function(t,e){window.Ya&&window.Ya.Rum&&(t.level=t.level||"error",window.Ya.Rum.logError(t,e))}}),function(){var t={},e=5e3,i=1,n="csp.yandex.net",o="web4",s="690.1893.1894",r="ru";function a(){var t;try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){t=!1}}return t||"undefined"==typeof XMLHttpRequest||(t=new XMLHttpRequest),t}function c(t){this.cspProtocol=t.cspProtocol||"https",this.cspUrl=t.cspUrl||this.cspProtocol+"://"+(t.cspHost||n)+"/csp",this.reqid=t.reqid,this.login=t.login,this.yandexuid=t.yandexuid,this.checkTimeout=t.checkTimeout||e,this.checkTimeoutId=null,this.from=t.from||o,this.project=t.project,this.platform=t.platform,this.page=t.page,this.env=t.env,this.counter=t.counter||s,this.tld=t.tld||r,this.domainExact=t.domainExact||["yandex."+this.tld,"yastatic.net","yandex.st"],this.domainSuffix=t.domainSuffix||[".yandex."+this.tld,".yandex.net",".yandex.ru"],this.onSendError=t.onSendError,this.check=this.check.bind(this),this.shouldCheckPeriodically=t.shouldCheckPeriodically;var i,a=document.cookie;return this.login||(i=a.match(/(?:^|;)\s*yandex_login\s*=\s*([^;]+)/))&&(this.login=i[1].trim()),this.yandexuid||(i=a.match(/(?:^|;)\s*yandexuid\s*=\s*([^;]+)/))&&(this.yandexuid=i[1].trim()),this}String.prototype.endsWith||(String.prototype.endsWith=function(t,e){return(void 0===e||e>this.length)&&(e=this.length),this.substring(e-t.length,e)===t}),c.prototype.start=function(){return document.addEventListener("DOMContentLoaded",this.check,!1),this},c.prototype.stop=function(){return this._removeListener(),document.removeEventListener("DOMContentLoaded",this.check),this},c.prototype._removeListener=function(){this.checkTimeoutId&&(this.removeListenerCallback(),clearTimeout(this.checkTimeoutId))},c.prototype.check=function(){if("withCredentials"in a()){var t=document.documentElement,e=function(t){var e=t.target,i=e.nodeName.toLowerCase();"script"!==i&&"object"!==i&&"iframe"!==i&&"img"!==i||this._detect(i,e)}.bind(this);return this._detectByElem("script"),this._detectByElem("object"),this._detectByElem("iframe"),this._detectByElem("img"),t.addEventListener("load",e,!0),this.removeListenerCallback=function(){t.removeEventListener("load",e,!0)},this._removeListener(),this.checkTimeoutId=setTimeout(this.removeListenerCallback,this.checkTimeout),this.shouldCheckPeriodically&&(this._checkPeriodicallyCallback=function(){this.check(),i*=2,this._checkPeriodically()}.bind(this),this._checkPeriodically()),this}},c.prototype._detectByElem=function(t){for(var e,i=document.getElementsByTagName(t),n=0;n<i.length;n++)e=i[n],this._detect(t,e)},c.prototype._detect=function(t,e){if(e.src&&!e.checked){e.checked=!0;var i=e.src;this._filterSrc(i)&&this._send(t,i)}},c.prototype._filterSrc=function(t){var e=/^(?:(?![^:@]+:[^:@\/]*@)[^:\/?#.]+:)?(?:\/\/)?(?:(?:[^:@\/]*(?::[^:@\/]*)?)?@)?(\[[0-9a-fA-F:.]+\]|[^:\/?#]*)/.exec(t||"")[1];return this.domainExact.every(function(t){return t!==e})&&this.domainSuffix.every(function(t){return!e.endsWith(t)})},c.prototype._send=function(t,e){var i=a(),n="from="+encodeURIComponent(this.from)+"&path="+encodeURIComponent(this.counter)+"&project="+encodeURIComponent(this.project)+"&platform="+encodeURIComponent(this.platform)+"&page="+encodeURIComponent(this.page)+"&env="+encodeURIComponent(this.env)+"&tag="+encodeURIComponent(t)+"&reqid="+encodeURIComponent(this.reqid)+"&url="+encodeURIComponent(e)+"&yandex_login="+encodeURIComponent(this.login)+"&yandexuid="+encodeURIComponent(this.yandexuid);i.open("POST",this.cspUrl,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){4===i.readyState&&200!==i.status&&this.onSendError&&this.onSendError(i.status,i.responseText)}.bind(this),i.send(n)},c.prototype._checkPeriodically=function(){this.checkPeriodicallyTimeoutId=setTimeout(this._checkPeriodicallyCallback,1e4*i)},t.exports=c,BEM.DOM.decl("detect-scripts",{onSetMod:{js:{inited:function(){var e=BEM.blocks["i-global"],i=this.params;i.login=e.param("login"),i.yandexuid=e.param("yandexuid"),i.reqid=e.param("reqid"),i.tld=e.param("tld"),i.page=e.param("page"),i.platform=e.param("platform"),this._detectScripts=new t.exports(i),this._detectScripts.check()}}}})}(),BEM.decl("i-url-controller",{},{passedParams:["ncrnd","rdrnd","nojs","numdoc","i-m-a-hacker","l10n","family","yandex_login","yandexuid","time","noredirect","noredirect_com","lr","nocache","waitall","sbh","dbgwzr","srcskip","srcask","srcrwr","graphrwr","metahost","relev","rearr","pron","snip","no-tests","test-id","test-tag","exp_confs","exp_flags","flag","template_exp_flags","category","popular_category","promo","from","tld","rdpass","suggest-uri","disable","qa-project","qa-field","qa-functionality","qa-element","qa-test-id","qa-run-id","videoapp","counterDebug","patch","conditional_patch","cache_whitelist","login","distr_source","distr_path","distr_vars","timeout","waitall","ui","uuid","appsearch_header","for_serp_iframe","tpid","testRunId"],rejectedParams:["uinfo","viewport","suggest_reqid","json_dump","parent-reqid","photo-upload","spas","bootstrap"],setCurrent:function(t){return this._current=t,this},setNext:function(t){return this._next=t,this},build:function(){return this.fillNextParams().fillCurrentParams().buildURL()},fillNextParams:function(){var t=this._next,e=t.url||location.href,i=this.rejectedParams;return t.path=t.path||BEM.blocks.uri.getPath(BEM.blocks.uri.clearHashSymbol(e)),t.params=$.extend({},BEM.blocks.uri.parseParams(e),t.params),t.params=Object.keys(t.params).reduce(function(e,n){var o=t.params[n];return-1===i.indexOf(n)&&null!==o&&(e[n]=o),e},{}),this},fillCurrentParams:function(){var t,e=this._next.params,i=this._current.params;return this.passedParams.forEach(function(n){e[n]||(t=i[n])&&(e[n]=t)}),BEM.blocks["i-global"].param("filterIsForced")&&(e.family="yes"),this},buildURL:function(){var t=this._next;return t.url=BEM.blocks.uri.buildRelativeUrl(t.path,t.params),this},mergePassedUrlParams:function(){var t=[].slice.call(arguments),e={};return BEM.blocks.utils.forOwn(BEM.blocks.location.getInstance().getState().params,function(t,i){-1!==this.passedParams.indexOf(i)&&(e[i]=t)},this),BEM.blocks["i-global"].param("filterIsForced")&&(e.family="yes"),BEM.blocks["i-global"].param("isYandexApp")&&(e.service=BEM.blocks["i-global"].param("id")+".yandex"),Object.assign.apply(Object,[e].concat(t)),e},addPassedParams:function(t){this.passedParams.push(t)},delPassedParams:function(t){for(var e=[],i=0;i<this.passedParams.length;i++)this.passedParams[i]!==t&&e.push(this.passedParams[i]);this.passedParams=e}}),BEM.decl("i-url-controller",{},{setNext:function(t,e){return e&&e.clientParamsHidden||(t.params=$.extend({},t.params,{reqid:c.getReqId()})),this.__base.call(this,t)}}),BEM.decl("location",{onSetMod:{js:{inited:function(){this._history=BEM.blocks.history.getInstance(),this._syncState(),this._history.on("statechange",this.changeThis(this._onStateChange))}}},_onStateChange:function(){this._syncState(),this._state.referer!==BEM.blocks.uri.normalize(window.location.href)&&!1!==this._state.trigger&&(this.trigger("change",this._state),this._state.block&&this.channel(this._state.block).trigger("change"))},_syncState:function(){var t=this._history.state,e=BEM.blocks.uri.parse(t.url);return this._state=$.extend({},t.data,{referer:this._state&&this._state.url,url:e.build(),hostname:e.host(),path:e.path(),params:e.queryParams}),this},change:function(t){var e=BEM.blocks.uri.parse(t.url);if(t.url&&delete t.params,t.url=e.build(),t.params){var i=BEM.blocks.uri.parse(),n=t.forceParams?t.params:$.extend({},this._state.params,t.params);Object.keys(n).forEach(function(t){i.addParam(t,n[t])}),t.url=i.build()}!1===t.trigger||(t.trigger=!0);try{this._history.changeState(!1===t.history?"replace":"push",{data:t,url:t.url})}catch(e){if("SecurityError"===e.name)throw e;"undefined"!=typeof console&&console.error&&console.error("location.assign fallback",e),window.location.assign(t.url)}},getState:function(){return $.extend(!0,{},this._state)},getUri:function(){return BEM.blocks.uri.parse(this._state.url)},getReferer:function(){return this._state.referer}},{_instance:null,getInstance:function(){return this._instance||(this._instance=BEM.create("location"))}}),BEM.decl("location",{CHANGE_DEBOUNCE:600,onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.changeDebounced=$.debounce(this.change,this.CHANGE_DEBOUNCE,this),this.fillBlock(this.getOriginalState()),this._isChangeByYandexAppsAPI()&&this.setMod("yandex-apps-api",!0)}}},_isChangeByYandexAppsAPI:function(){var t=BEM.blocks["i-global"].param("hasYandexAppsAPI"),e=BEM.blocks["i-global"].param("isYandexAppIosWebview"),i=BEM.blocks["i-global"].param("isYandexAppAndroidWebview");return t&&!(e||i)},_onStateChange:function(){this.__base.apply(this,arguments),!1!==this._state.trigger&&this._state.block&&this.trigger(this._state.block,this._state)},_syncState:function(){this.__base.apply(this,arguments),this.fillBlock(this.getOriginalState())},getOriginalState:function(){return this._state},change:function(t,e,i){e&&e.preventDefault&&e.preventDefault(),this.fillURL(t,i),this._isChangeByAssign(t)?window.location.assign(t.url):this.__base.apply(this,arguments)},_isChangeByAssign:function(t){var e,i;return!!t.reload||(i=BEM.blocks["i-global"].param("isPumpkin"),e=!1!==t.trigger,!(!i||!e))},fillURL:function(t,e){BEM.blocks["i-url-controller"].setCurrent(this.getState()).setNext(t,e).build()},fillBlock:function(t){return t.block||(t.block=this.detectBlock(t)),this},getParamValue:function(t){var e=this._state.params[t];return e&&e[0]},hasParam:function(t,e){var i=this._state.params[t];return!!i&&(e?-1!==i.indexOf(e):Boolean(i[0]))}}),BEM.decl("location",{detectBlock:function(t){var e,i=t.path,n=(BEM.blocks["i-global"].param("router")||$(".i-global").bem("i-global").params.router).index;return"/"===i||i===n?e="b-page_type_index":-1===i.indexOf("search")&&-1===decodeURIComponent(i).indexOf("запрос")||(e="b-page_type_search"),e},change:function(t,e,i){this.__base.apply(this,arguments),i&&i.clientParamsHidden||this._hideParams(t,e)},_hideParams:function(t,e){this.change({url:BEM.blocks.uri.delParams(t.url,["reqid","t"]),trigger:!1,history:!1},e,{clientParamsHidden:!0})}}),BEM.decl("history",{onSetMod:{js:{inited:function(){if(!this.hasMod("provider"))throw new Error("Use BEM.blocks['history'].getInstance() instead of BEM.create('history')");this._resetUrl().bindEvents().syncState()}}},destruct:function(){this.unbindEvents(),this.__base.apply(this,arguments)},pushState:function(t,e,i){return this.changeState("push",this.normalizeState(t,e,i))},replaceState:function(t,e,i){return this.changeState("replace",this.normalizeState(t,e,i))},bindEvents:function(){return this},_resetUrl:function(){return this},_removeHashbang:function(t){var e=BEM.blocks.uri,i=e.parse(t);if(""===i.anchor())return t;var n=e.parse(i.anchor().replace(/^!/,""));return i.anchor(""),i.query(n.query()),i.build()},unbindEvents:function(){return this},syncState:function(){return this.state=this.normalizeState(void 0,document.title,window.location.href),this},normalizeState:function(t,e,i){return{data:null===t?void 0:t,title:e,url:i}},changeState:function(t,e){try{window.location.assign(e.url)}catch(t){}}},{hasNativeAPI:function(){return window.history&&"pushState"in window.history},_instance:null,getInstance:function(){return this._instance||(this._instance=BEM.create({block:"history",mods:{provider:this.hasNativeAPI()?"history-api":"hashchange"}}))}}),BEM.decl({block:"history",modName:"provider",modVal:"history-api"},{_onPopState:function(t){var e=t.originalEvent.state;null!==e&&(this.state=this.normalizeState(e,document.title,window.location.href),this.state.data&&delete this.state.data.trigger,this.trigger("statechange",this.state))},bindEvents:function(){return this.__base.apply(this,arguments),BEM.DOM.win.on("popstate",this.changeThis(this._onPopState)),this},unbindEvents:function(){return this.__base.apply(this,arguments),BEM.DOM.win.off("popstate",this._onPopState),this},_resetUrl:function(){return BEM.blocks.uri.parse(window.location.href).anchor()&&window.history.replaceState({},document.title,this._removeHashbang(window.location.href)),this},syncState:function(){var t=window.history.state;return null!==t&&void 0!==t||window.history.replaceState({},document.title,window.location.href),null!==this.state&&void 0!==this.state||(this.state=this.normalizeState(void 0,document.title,window.location.href)),this},changeState:function(t,e){return window.history[t+"State"](e.data,e.title||document.title,e.url),this.state=e,this.trigger("statechange",{state:e,nativeApi:!0}),this}}),BEM.decl({block:"history",modName:"provider",modVal:"history-api"},{_onPopState:function(t){var e=t.originalEvent.state;this.state=this.normalizeState(e,document.title,window.location.href),this.state.data&&delete this.state.data.trigger,this.trigger("statechange",this.state)}}),BEM.DOM.decl({block:"b-page",modName:"ajax",modVal:"yes"},{onSetMod:{js:{inited:function(){this._location=BEM.blocks.location.getInstance(),this.findBlockOn("i-global"),this.__base.apply(this,arguments),this._cacheKey=this.buildCacheKey()}},type:function(t,e){this.__base.apply(this,arguments),this.findBlockInside("page-layout").setMod("page",e)}},bindEvents:function(){this.__base.apply(this,arguments),this.on("change",this._onChange),BEM.DOM.blocks["suggest2-counter"]&&BEM.DOM.blocks["suggest2-counter"].on("submit",this._onSuggest2CounterSubmit,this)},unbindEvents:function(){this.__base.apply(this,arguments),BEM.DOM.blocks["suggest2-counter"]&&BEM.DOM.blocks["suggest2-counter"].un("submit",this._onSuggest2CounterSubmit,this)},_addPushbundleTestViewToReq:function(t){return BEM.blocks["i-global"].getFlag("pushbundle_test_view")&&t.push({name:"pushbundle__get-pushbundle-test-view-ajax",callback:this._onPushbundleTestViewLoaded}),t},_onPushbundleTestViewLoaded:function(t){BEM.DOM.append(this.domElem,t.html)},load:function(t){this.trigger("load:start"),Ya.reactBus.emit("b-page:load-start");var e=BEM.create("i-request_type_bem",{url:t.url,cache:t.cache,ctx:this});return this._getCommonAjaxBlocks(t).forEach(function(t){e.block(t.name,t.callback)}),e.on("beforeCallback",function(){this.setMod("type",t.type)},this),this.showFade(),this._currentRequest=e.get(this.prepareParams(t.params),this._requestCallback.bind(this,t.type)),this},_getCommonAjaxBlocks:function(t){var e=[{name:"i-global__params:ajax",callback:this.updateGlobalParams}];return BEM.blocks.suggest2&&e.push({name:"suggest2-history",callback:function(t){this.trigger("suggestHistoryReceived",t)}}),Array.isArray(t.blocks)&&(e=e.concat(t.blocks)),e.push({name:"content_type_"+t.type,callback:function(e){this._contentLoadCallback(e,t.type)}},{name:"serp-controller",callback:this.updateSerpParams}),e=this._addPushbundleTestViewToReq(e)},_contentLoadCallback:function(t,e){this.__base.apply(this,arguments),t.page=e,this.trigger("contentUpdating",t);var i=this.findElem("content");i[0]?(Ya.reactBus.emit("react-adapter:unmount",i[0]),BEM.DOM.update(i,t.html,function(){Ya.reactBus.emit("react-adapter:mount",i[0]),this.trigger("contentUpdated",t)}.bind(this))):this.trigger("contentUpdated",t)},_requestCallback:function(t){this.trigger("change",{type:t}),this.hideFade()},updateSeoInformation:function(t){this.updateTitle(t.title),$("meta[name=keywords]").attr("content",t.keywords),$("meta[name=description]").attr("content",t.description),this.params.seo.shareTitle=t.shareTitle},_onChange:function(){},buildCacheKey:function(){var t=this._location.getState();return[t.block?t.block:"",t.type?t.type:"",BEM.blocks.uri.delParams(t.url,this._getFilterParams())].join("_")},checkCacheKey:function(){var t=this.buildCacheKey();return this._cacheKey!==t&&(this._cacheKey=t,!0)},resetCacheKey:function(){return this.buildCacheKey()+"_"+Math.floor(1e4*Math.random())},updateCacheKey:function(){this._cacheKey=this.buildCacheKey()},updateGlobalParams:function(t){BEM.blocks["i-global"].setParams(t.params),this.updateSeoInformation(t.params.seo),this.__base.apply(this,arguments)},_onSuggest2CounterSubmit:function(t,e){this.suggestReqID=e.suggest_reqid},prepareParams:function(t){return(t=t||{}).suggest_reqid=this.suggestReqID||BEM.blocks["i-global"].param("suggest_reqid"),t},updateSerpParams:function(t){var e,i=BEM.blocks["serp-controller"].getInstance(),n=t.params.mods;for(e in $.extend(i.params,t.params),n)n.hasOwnProperty(e)&&i.setMod(e,n[e])},showFade:function(){this._startedFade=this._startedFade||this.findBlockInside({block:"fade",modName:"region",modVal:"main"}),this._startedFade&&(this._startedFade.setMod("progress","yes"),Ya.reactBus.emit("b-page:fade-shown"))},hideFade:function(){this._startedFade&&(this._startedFade.delMod("progress"),this._startedFade=null,Ya.reactBus.emit("b-page:fade-hidden"))}}),BEM.DOM.decl({block:"b-page",modName:"ajax",modVal:"yes"},{_getCommonAjaxBlocks:function(t){var e=this.__base.apply(this,arguments);return e.push({name:"cookies_ajax",callback:this.updateCookies}),e},_contentLoadCallback:function(t){this.__base.apply(this,arguments),this._getTabs()},updateCookies:function(t){BEM.blocks.cookies.save(t.params.cookies)}}),BEM.DOM.decl({block:"b-page",modName:"ajax",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),window.Ya&&window.Ya.AppsApi&&window.Ya.AppsApi.whenAvailable&&window.Ya.AppsApi.whenAvailable("query",function(t){function e(){t.setText(BEM.blocks["i-global"].param("query"))}window.Ya&&window.Ya.__applicationQueryUpdated||e(),this.on("change",e)},this)}}},updateSeoInformation:function(t){this.__base.apply(this,arguments),this._updatePornoMeta(t.hasPorno)},_updatePornoMeta:function(t){var e=$("meta[name=IM]");e.length&&!t?e.remove():0===e.length&&t&&$("head").append('<meta name="IM" content="">')}}),BEM.DOM.decl({block:"b-page",modName:"ajax",modVal:"yes"},{load:function(t){var e=BEM.blocks["vital-incut"]&&BEM.blocks["vital-incut"].getInstance();return t.blocks=t.blocks||[],e&&!e.needUpdate(t.params.vital)||t.blocks.push({name:"vital-incut",callback:this._vitalIncutRender}),this.__base.apply(this,arguments)},_vitalIncutRender:function(t){this.blockInside("page-layout").updateTopIncutElem(t.html),this._vital=BEM.blocks["vital-incut"],this._vital&&this._vital.getInstance()&&this._vital.getInstance().triggerEvent("fade","hide")}}),function(t,e,i){var n={bubbles:!1,cancelable:!1,view:null,detail:null,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null,buttons:0,pointerId:0,width:0,height:0,pressure:0,tiltX:0,tiltY:0,pointerType:"",hwTimestamp:0,isPrimary:!1,target:null,currentTarget:null,which:0,pageX:0,pageY:0,timeStamp:0},o=Object.keys(n),s=o.map(function(t){return n[t]}),r=o.length,a=!1,c=[0,1,4,2];try{a=1===new MouseEvent("test",{buttons:1}).buttons}catch(t){}function l(t,e){var i={},n=t.originalEvent||{};e||(e={});for(var l,h=0;h<r;h++)i[l=o[h]]=e[l]||t[l]||n[l]||s[h];return i.x=i.clientX,i.y=i.clientY,i.pressure=i.pressure||(i.buttons?.5:0),i.buttons||a||(i.buttons=c[i.which]||0),i.originalEvent=t.originalEvent||null,e.preventDefault?i.preventDefault=function(){e.preventDefault(),t.preventDefault()}:(i.preventDefault=function(){t.preventDefault()},i._preventScroll=function(){}),i}var h=t.Map&&t.Map.prototype.forEach?new t.Map:{array:[],size:0,set:function(t,e){if(void 0===e)return this.delete(t);this.has(t)||this.size++,this.array[t]=e},has:function(t){return void 0!==this.array[t]},delete:function(t){this.has(t)&&(delete this.array[t],this.size--)},get:function(t){return this.array[t]},clear:function(){this.array.length=0,this.size=0},forEach:function(t,e){return this.array.forEach(function(i,n){t.call(e,i,n,this)},this)}},u={eventMap:{},captureInfo:{},eventSourceList:[],registerSource:function(t,e){var i=e.events;i&&(i.forEach(function(t){e[t]&&(this.eventMap[t]=e[t].bind(e))},this),this.eventSourceList.push(e))},register:function(t){for(var e,i=this.eventSourceList.length,n=0;n<i&&(e=this.eventSourceList[n]);n++)e.register.call(e,t)},unregister:function(t){for(var e,i=this.eventSourceList.length,n=0;n<i&&(e=this.eventSourceList[n]);n++)e.unregister.call(e,t)},contains:function(t,e){return!!t.contains&&t.contains(e)},getCommonAncestor:function(t,i){for(;t&&t!==e.documentElement;){if(t.contains&&t.contains(i))return t;t=t.parentNode}return null},down:function(t){t.bubbles=!0,this.fireEvent("pointerdown",t)},move:function(t){t.bubbles=!0,this.fireEvent("pointermove",t)},up:function(t){t.bubbles=!0,this.fireEvent("pointerup",t)},enter:function(t){var e=[],i=t.target,n=this.getCommonAncestor(i,t.relatedTarget);for(t.bubbles=!1;i&&i!==n;)e.push(i),i=i.parentNode;for(;e.length;)t.target=e.pop(),this.fireEvent("pointerenter",t)},leave:function(t){var e=[],i=t.target,n=this.getCommonAncestor(i,t.relatedTarget);for(t.bubbles=!1;i&&i!==n;)e.push(i),i=i.parentNode;for(;e.length;)t.target=e.shift(),this.fireEvent("pointerleave",t)},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t)},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t)},cancel:function(t){t.bubbles=!0,this.fireEvent("pointercancel",t)},leaveOut:function(t){this.out(t),this.contains(t.target,t.relatedTarget)||this.leave(t)},enterOver:function(t){this.over(t),this.contains(t.target,t.relatedTarget)||this.enter(t)},listen:function(t,e){e.forEach(function(e){this.addEvent(t,e)},this)},unlisten:function(t,e){e.forEach(function(e){this.removeEvent(t,e)},this)},addEvent:function(t,e){i(t).on(e,this.boundHandler)},removeEvent:function(t,e){i(t).off(e,this.boundHandler)},eventHandler:function(t){var e=this.eventMap[t.type];e&&e(t,t.originalEvent)},makeEvent:function(t,e){this.captureInfo[e.pointerId]&&(e.relatedTarget=null);var n=function(t,e){var n=i.Event(t),o=e.preventDefault,s=n.preventDefault.bind(n);return jQuery.extend(n,e),n.preventDefault=function(){o(),s()},n}(t,e);return n._target=n._target||e.target,n},fireEvent:function(t,e){var i=this.makeEvent(t,e);return this.dispatchEvent(i)},getTarget:function(t){return this.captureInfo[t.pointerId]||t._target},setCapture:function(t,n){this.captureInfo[t]&&this.releaseCapture(t),this.captureInfo[t]=n,this.implicitRelease=this.releaseCapture.bind(this,t),i(e).on("pointerup pointercancel",this.implicitRelease),this.asyncDispatchEvent(i.Event("gotpointercapture",{bubbles:!0,cancelable:!1,pointerId:t,_target:n}))},releaseCapture:function(t){var n=this.captureInfo[t];n&&(this.captureInfo[t]=void 0,i(e).off("pointerup pointercancel",this.implicitRelease),this.asyncDispatchEvent(i.Event("lostpointercapture",{bubbles:!0,cancelable:!1,pointerId:t,_target:n})))},dispatchEvent:function(t){var e=this.getTarget(t);if(e)return i.event.trigger(t,null,e,!t.bubbles)},asyncDispatchEvent:function(e){(t.requestAnimationFrame||setTimeout)(this.dispatchEvent.bind(this,e))}};u.boundHandler=u.eventHandler.bind(u);var d,p,f={POINTER_ID:1,POINTER_TYPE:"mouse",DEDUP_DIST:25,events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(t){u.listen(t,this.events)},unregister:function(t){u.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,i=this.lastTouches,n=t.clientX,o=t.clientY,s=0,r=i.length;s<r&&(e=i[s]);s++){var a=Math.abs(n-e.x),c=Math.abs(o-e.y);if(a<=this.DEDUP_DIST&&c<=this.DEDUP_DIST)return!0}},prepareEvent:function(t){return l(t,{pointerId:this.POINTER_ID,isPrimary:!0,pointerType:this.POINTER_TYPE})},mousedown:function(t){this.isEventSimulatedFromTouch(t)||(h.has(this.POINTER_ID)&&this.cancel(t),h.set(this.POINTER_ID,t),u.down(this.prepareEvent(t)))},mousemove:function(t){this.isEventSimulatedFromTouch(t)||u.move(this.prepareEvent(t))},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=h.get(this.POINTER_ID);e&&e.button===t.button&&(u.up(this.prepareEvent(t)),this.cleanupMouse())}},mouseover:function(t){this.isEventSimulatedFromTouch(t)||u.enterOver(this.prepareEvent(t))},mouseout:function(t){this.isEventSimulatedFromTouch(t)||u.leaveOut(this.prepareEvent(t))},cancel:function(t){u.cancel(this.prepareEvent(t)),this.cleanupMouse()},cleanupMouse:function(){h.delete(this.POINTER_ID)}},m={POINTER_TYPE:"touch",DEDUP_TIMEOUT:2500,CLICK_COUNT_TIMEOUT:200,events:["touchstart","touchmove","touchend","touchcancel"],register:function(t){u.listen(t,this.events)},unregister:function(t){u.unlisten(t,this.events)},firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===h.size||1===h.size&&h.has(1))&&(this.firstTouch=t.identifier,this.firstTouchTarget=t.target,this.scrolling=!1,this.firstXY={X:t.clientX,Y:t.clientY},this.cancelResetClickCount())},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstTouchTarget=null,this.firstXY=null,this.shouldScrollCache=void 0,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var t=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(t,this.CLICK_COUNT_TIMEOUT)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(t){return"touchstart"===t||"touchmove"===t?1:0},findTarget:function(t){return e.elementFromPoint(t.clientX,t.clientY)},touchToPointer:function(t){var e=this,n=this.currentTouchEvent,o=t.identifier+2;return l(n,i.extend({},t,{pointerId:o,target:u.captureInfo[o]||this.findTarget(t),bubbles:!0,cancelable:!0,detail:this.clickCount,button:0,buttons:this.typeToButtons(n.type),width:t.webkitRadiusX||t.radiusX||0,height:t.webkitRadiusY||t.radiusY||0,pressure:t.webkitForce||t.force||.5,isPrimary:this.isPrimaryTouch(t),pointerType:this.POINTER_TYPE,preventDefault:function(){e.scrolling=!1,e.shouldScrollCache=!1,e.firstXY=null}}))},processTouches:function(t,e){var i=t.originalEvent.changedTouches;this.currentTouchEvent=t;for(var n,o=0;o<i.length;o++)n=i[o],e.call(this,this.touchToPointer(n))},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(t){var e,i=this.scrollTypes;return t===i.EMITTER?e="none":t===i.XSCROLLER?e="X":t===i.YSCROLLER?e="Y":i.SCROLLER.exec(t)&&(e="XY"),e},shouldScroll:function(t){if(void 0!==this.shouldScrollCache)return this.shouldScrollCache;if(!this.firstXY)return!0;for(var e,i,n=this.firstTouchTarget;n&&1===n.nodeType&&null===(e=n.getAttribute("touch-action"));)n=n.parentNode;var o=this.touchActionToScrollType(e);if("none"===o)i=!1;else if("XY"===o||void 0===o)i=!0;else{var s=t.originalEvent.changedTouches[0],r=o,a="Y"===o?"X":"Y";i=Math.abs(s["client"+r]-this.firstXY[r])>=Math.abs(s["client"+a]-this.firstXY[a])}return this.shouldScrollCache=i,this.firstXY=null,this.firstTouchTarget=null,this.shouldScrollCache},findTouch:function(t,e){for(var i,n=0,o=t.length;n<o&&(i=t[n]);n++)if(i.identifier===e)return!0},vacuumTouches:function(t){var e=t.originalEvent.touches;if(h.size>=e.length){var i=[];h.forEach(function(t,n){if(1!==n&&!this.findTouch(e,n-2)){var o=t.out;i.push(o)}},this),i.forEach(this.cancelOut,this)}},touchstart:function(t){var e=t.originalEvent.changedTouches[0];this.vacuumTouches(t),this.setPrimaryTouch(e),this.dedupSynthMouse(e),this.scrolling||(this.clickCount++,this.processTouches(t,this.overDown))},overDown:function(t){h.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),u.over(t),u.enter(t),u.down(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):(t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var e=h.get(t.pointerId);if(e){var i=e.out,n=e.outTarget;u.move(t),i&&n!==t.target&&(i.relatedTarget=t.target,t.relatedTarget=n,i.target=n,t.target?(u.leaveOut(i),u.enterOver(t)):(t.target=n,t.relatedTarget=null,this.cancelOut(t))),e.out=t,e.outTarget=t.target}},touchend:function(t){this.dedupSynthMouse(t.originalEvent.changedTouches[0]),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(u.up(t),u.out(t),u.leave(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){u.cancel(t),u.out(t),u.leave(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){h.delete(t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(t){var e=f.lastTouches;if(this.isPrimaryTouch(t)){var i={x:t.clientX,y:t.clientY};e.push(i);var n=function(t,e){var i=t.indexOf(e);i>-1&&t.splice(i,1)}.bind(null,e,i);setTimeout(n,this.DEDUP_TIMEOUT)}}},_={POINTER_TYPES:["","unavailable","touch","pen","mouse"],HAS_BITMAP_TYPE:t.MSPointerEvent&&"number"==typeof t.MSPointerEvent.MSPOINTER_TYPE_MOUSE,events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){u.listen(t,this.events)},unregister:function(t){u.unlisten(t,this.events)},prepareEvent:function(t){var e=l(t);return this.HAS_BITMAP_TYPE&&(e.pointerType=this.POINTER_TYPES[e.pointerType]),e},cleanup:function(t){h.delete(t)},MSPointerDown:function(t){h.set(t.originalEvent.pointerId,t),u.down(this.prepareEvent(t))},MSPointerMove:function(t){u.move(this.prepareEvent(t))},MSPointerUp:function(t){u.up(this.prepareEvent(t)),this.cleanup(t.originalEvent.pointerId)},MSPointerOut:function(t){u.leaveOut(this.prepareEvent(t))},MSPointerOver:function(t){u.enterOver(this.prepareEvent(t))},MSPointerCancel:function(t){u.cancel(this.prepareEvent(t)),this.cleanup(t.originalEvent.pointerId)},MSGotPointerCapture:function(t){u.fireEvent("gotpointercapture",this.prepareEvent(t))},MSLostPointerCapture:function(t){u.fireEvent("lostpointercapture",this.prepareEvent(t))}},g=function(t){if(!h.has(t))throw new Error("InvalidPointerId")};if(t.Element&&Element.prototype.setPointerCapture?(d=function(t,e){t.setPointerCapture(e)},p=function(t,e){t.releasePointerCapture(e)}):t.navigator.msPointerEnabled?(d=function(t,e){g(e),t.msSetPointerCapture(e)},p=function(t,e){g(e),t.msReleasePointerCapture(e)}):(d=function(t,e){g(e),u.setCapture(e,t)},p=function(t,e){g(e),u.releaseCapture(e,t)}),i.fn.extend({setPointerCapture:function(t){d(this[0],t)},releasePointerCapture:function(t){p(this[0],t)}}),!t._pointerPolyfillInited)if(t._pointerPolyfillInited=!0,t.PointerEvent){i.event.fixHooks||(i.event.fixHooks={});var b=i.event.fixHooks;["move","down","up","over","out","enter","leave","cancel"].forEach(function(t){var e="pointer"+t;b[e]||(b[e]={}),b[e].props=o.concat(b[e].props||[])})}else delete i.event.special.pointerenter,delete i.event.special.pointerleave,t.navigator.msPointerEnabled?u.registerSource("ms",_):(u.registerSource("mouse",f),void 0!==t.ontouchstart&&u.registerSource("touch",m)),u.register(document)}(window,document,jQuery),function(t){t.event.special.pointerpress||t.each({pointerpress:"pointerdown",pointerrelease:"pointerup pointercancel"},function(e,i){function n(i){var n,o=i.type;return"mouse"===i.pointerType&&1!==i.which||(i.type=e,n=t.event.dispatch.apply(this,arguments),i.type=o),n}t.event.special[e]={setup:function(){t(this).on(i,n)},teardown:function(){t(this).off(i,n)}}})}(jQuery),$.extend({util:{}}),function(){var t=Object.prototype.toString;function e(e){return"[object Object]"===t.call(e)}function i(t,n,o){var s,r;for(s in t=Object(t),n=Object(n))"__proto__"!==s&&"prototype"!==s&&"constructor"!==s&&(void 0!==(r=o&&o(t[s],n[s],s))?t[s]=r:e(t[s])&&e(n[s])?t[s]=i(t[s],n[s],o):t[s]=n[s]);return t}$.extend($.util,{merge:i,mergeBemjson:function(t,e){return i(t,e,function(t,e,i){if("mix"===i)return[].concat(t,e)})}})}(),BEM.DOM.decl("control",{onSetMod:{focused:{yes:function(){if(this.hasMod("disabled"))return!1;this._focused||(this._focus(),this.trigger("focus"))},"":function(){this._focused&&(this._blur(),this.trigger("blur"))}},disabled:{"*":function(t,e){var i=this._getControl();i.prop("disabled",Boolean(e)).attr("aria-disabled",Boolean(e)),i.attr("tabindex",e?null:this.params._tabindex)},yes:function(){this.delMod("focused")}}},_focus:function(){this._getControl().focus()},_blur:function(){this._getControl().blur()},_getControl:function(){var t=this.elem("control");return t.length>0?t:this.domElem},_onFocusin:function(){this._focused=!0,this.trigger("focus").setMod("focused","yes").bindTo("focusout",this._onFocusout)},_onFocusout:function(){this._focused=!1,this.trigger("blur").delMod("focused").unbindFrom("focusout")},getDefaultParams:function(){return{_tabindex:this._getControl().attr("tabindex")}}},{live:function(){this.liveBindTo("focusin",function(t){this._onFocusin(t)}),parseInt(BEM.blocks["i-ua"].ios,10)>=8&&this.liveBindTo("control","focusin",function(t){t.preventDefault()})}}),BEM.DOM.decl({block:"link",baseBlock:"control"},{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},pressed:{yes:function(){return!this.hasMod("disabled")}},disabled:{"":function(){this.__base.apply(this,arguments),this.domElem.attr("tabindex",this.params._tabindex)},yes:function(){this.__base.apply(this,arguments),this.domElem.attr("tabindex",-1),this.delMod("pressed")}}},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")}},{live:function(){return this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}),this.__base()}}),BEM.DOM.decl("link",{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered")}}},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),this.__base.apply(this,arguments)}}),function(){var t=$(window),e=$(document.documentElement),i=0,n=!1;function o(){e.hasClass("pointerfocus")&&(n=!0,setTimeout(function(){n=!1}))}document.documentMode<=11?e.on("focusin",function(t){var e=t.originalEvent;!e||e.fromElement||e.relatedTarget||o()}):t.on("blur",function(){t.one("focus",o)}),e.addClass("utilityfocus").on({focusin:function(){e.toggleClass("pointerfocus",n).toggleClass("utilityfocus",!n)},keydown:function(){clearTimeout(i),n=!1},"pointerdown pointerup click":function(t){n=!0,clearTimeout(i),i=setTimeout(function(){n=!1},600)}})}(),BEM.DOM.decl({block:"link",modName:"ajax",modVal:"yes"},{_onClick:function(t){this.__base.apply(this,arguments);var e=this.domElem.attr("href");e&&(this.trigger("click",{domEvent:t}),this.isMouseDownTriggered||this.domElem.trigger("onmousedown"),BEM.blocks.location.getInstance().change($.extend({url:e},this.params),t))},_onMouseDown:function(){this.isMouseDownTriggered=!0}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo({block:"link",modName:"ajax",modVal:"yes"},"pointerclick",function(t){this._onClick(t)}),this.liveBindTo({block:"link",modName:"ajax",modVal:"yes"},"mousedown",function(){this._onMouseDown()})}}),BEM.DOM.decl({block:"link",modName:"ajax",modVal:"yes"},{_onClick:function(t){if(2!==t.which&&!t.metaKey&&!t.ctrlKey)return this.__base.apply(this,arguments)}}),function(){var t={};BEM.decl("i-request",{onSetMod:{js:{inited:function(){this._preventCache=!1}}},get:function(t,e,i,n){return $.isFunction(i)||(n=i,i=this.params.onError),this._get(t,e,i,$.extend({},this.params,n)),this},_get:function(e,i,n,o){var s=this._buildCacheKey(e,o),r=t[o.cacheGroup];o.cache&&r&&s in r.data?this.afterCurrentEvent(function(){i.call(this.params.callbackCtx,r.data[s])},this):this._do(e,i,n,o)},_do:function(t,e,i,n){},_onSuccess:function(t,e,i,n){n.cache&&!this._preventCache&&this.putToCache(n,t,i),this._preventCache=!1},_buildCacheKey:function(t,e){return"string"==typeof t?t:$.param(t)},putToCache:function(e,i,n){var o=t[e.cacheGroup]||(t[e.cacheGroup]={keys:[],data:{}});o.keys.length>=e.cacheSize&&delete o.data[o.keys.shift()];var s=this._buildCacheKey(i,e);return o.data[s]=n,o.keys.push(s),this},dropCache:function(){return delete t[this.params.cacheGroup],this},getDefaultParams:function(){return{cache:!1,cacheGroup:"default",cacheSize:100,callbackCtx:this}}},{_cache:t})}(),BEM.decl({block:"i-request_type_bem",baseBlock:"offline-request"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.blocks=[],this._addIConsoleBlock(),this._addExtraContentBlock();var t=this._prepareRequestUrl(),e={dataType:this.params.dataType,url:t,cache:this.params.cache,callbackCtx:this,traditional:!0,paramsToSettings:["traditional"]};BEM.blocks["i-global"].getFlag("disable_jsonp_cors")&&(e.dataType="json",e.crossDomain=!1),this._req=BEM.create("i-request_type_ajax",e),this._initOffline()}}},_prepareRequestUrl:function(){var t=this.params.url,e=this.params.passedParams,i=BEM.blocks.location.getInstance(),n=e.reduce(function(e,n){var o=i.getParamValue(n);return o&&-1===t.indexOf(n+"=")&&e.push(n+"="+o),e},[]);if(n.length){var o=BEM.blocks.utils.isEmpty(BEM.blocks.uri.parseParams(t))?"?":"&";t+=o+n.join("&")}return t},_addIConsoleBlock:function(){BEM.blocks["i-global"].param("isYandexNet")&&this.block("i-console",this._onIConsoleSuccess,{isAjax:!0})},_onIConsoleSuccess:function(t){t&&t.html&&BEM.DOM.scope.append(t.html)},_addExtraContentBlock:function(){this.block("extra-content",this._onExtraContentSuccess)},_onExtraContentSuccess:function(t){BEM.blocks["extra-content"]&&t&&t.html&&BEM.blocks["extra-content"].getInstance().appendContent(t.html)},block:function(t,e,i,n){var o=Array.isArray(t)?t:"string"==typeof t?t.split(" "):[t];if(arguments.length<2)throw new Error("success callback is required");for(var s=0,r=o.length;s<r;s++)this.blocks.push({decl:o[s],success:e,error:"function"===$.type(i)?i:$.noop,params:n||("object"===$.type(i)?i:{}),ctx:this.params.ctx});return this},get:function(t,e,i){var n=this.params;return"function"===$.type(t)?(n.success=t,n.error=e||$.noop,t=void 0):(n.success=e||$.noop,n.error=i||$.noop),BEM.blocks["i-global"].param("isPumpkin")?(this._onError(),this):(this._cachedArgs=$.extend({},this._getArgs(),t),this._get(this._cachedArgs),this)},_get:function(t){return this.afterCurrentEvent(function(){this.trigger("beforeRequest"),this._req.get(t,this._onSuccess,this._onError)}),this},abort:function(){return this._req.abort(),this.blocks.length=0,this},_onSuccess:function(t){if(t&&"captcha"===t.type)return c.hit({dtype:"stred",pid:40,cid:72952,path:BEM.blocks["i-global"].param("project").replace("/",".")}),void window.location.assign(t.captcha["captcha-page"]);delete this._cachedArgs,this.unbindEvents(),this._updateAssets(t),this._updateMetadata(t),this._callback("success",t)},_onError:function(t){if(!this._cachedArgs||!t||0!==t.readyState&&0!==t.status){delete this._cachedArgs,this.unbindEvents();var e={"-url":encodeURIComponent(this._prepareRequestUrl())};t&&t.status&&(e["-status"]=t.status),t&&t.statusText&&(e["-statusText"]=t.statusText),this._sendAjaxResultCounter({type:"error",vars:e}),this._callback("error",t)}else window.Ya.Rum.logError&&window.Ya.Rum.logError({message:"i-request_type_bem: can't send request(no internet connection)",block:"i-request_type_bem",additional:{url:this._prepareRequestUrl()}})},_updateAssets:function(t){if("object"!=typeof t||null===t)return this;var e=this._getNodesFragment(t);e&&this._appendNodesFromFragment(e),delete t.assets},_getNodesFragment:function(t){var e=t.assets&&t.assets.assets;if(e&&e.length){var i=document.createDocumentFragment();return e.forEach(function(e){var n;n="style"===e.type&&e.url?this._createStyleLinkNode(e):this._createNode(t,e),i.appendChild(n)},this),i}},_appendNodesFromFragment:function(t){return document.head.appendChild(t),this},_createNode:function(t,e){var i=e.type,n=document.createElement(i),o=BEM.blocks["i-global"].param("nonce");return e.content&&(n.textContent=e.content),o&&n.setAttribute("nonce",o),e.url&&(n.src=e.url,n.async="async","script"!==i||window.Ya.disableCrossOrigin||(n.crossOrigin=""),Ya.Rum.sendResTiming(2778,n.src)),"script"===i&&e.bundleName&&this._setBundleWaitEvents(t,n,e.bundleName),e.attrs&&Object.keys(e.attrs).forEach(function(t){n.setAttribute(t,e.attrs[t])}),n},_setBundleWaitEvents:function(t,e,i){this.__self._waitJSBundles[i]=1,e.addEventListener("load",function(){delete this.__self._waitJSBundles[i],this._callBlockWithSuccessCB(t)}.bind(this)),e.addEventListener("error",function(){c.hitDelayed({dtype:"iweb",reqid:BEM.blocks["i-global"].param("reqid"),path:"/"+BEM.blocks["i-global"].param("project")+"/bundles/load-error",vars:window.Ya.counter.stringifyParams({17:i},",")})})},_createStyleLinkNode:function(t){var e=document.createElement("link");return e.rel="stylesheet",e.href=t.url,e},_updateMetadata:function(t){if(t&&t.metadata){var e=t.metadata;BEM.blocks["i-global"].setParams({bundlesMetadata:e.bundles||e.bundlesMetadata,assetsMetadata:e.assets||e.assetsMetadata}),BEM.blocks["extra-content"]&&BEM.blocks["extra-content"].getInstance().setMetadata(e.extraContent)}},_callback:function(t,e){this.trigger("beforeCallback"),"success"!==t?this._blocksCallback(t,e):this._callBlockWithSuccessCB(e)},_callBlockWithSuccessCB:function(t){if(t&&!t.error){var e={};this.blocks.forEach(function(i,n){if(!this.blocks[n].called){var o=this._getBlockName(i.decl),s=t.blocks?t.blocks[n]:t[i.decl];this._isBlockWaitBundle(s)||(i.success.call(i.ctx,s,i.decl),this.blocks[n].called=!0,this._setSuccessData(e,t,{decl:i.decl,blockName:o,index:n}))}}.bind(this)),this.__self._requestCallbackEnabled(this.blocks)&&this.params.success.call(this.params.ctx,e)}else this._callback("error",t)},_isBlockWaitBundle:function(t){if(!t||!t.params)return!1;var e,i,n=Array.isArray(t.params.bundles)&&t.params.bundles.length;if(n)for(i=0;i<n;i++)if(e=t.params.bundles[i],this.__self._waitJSBundles[e])return!0;return!1},_blocksCallback:function(t,e){this.blocks.forEach(function(i){i[t].call(i.ctx,e,i.decl)}),this.params[t].call(this.params.ctx,e)},_setSuccessData:function(t,e,i){var n=i.blockName,o=i.index;"string"==typeof i.decl?t[n]=e.blocks[o]:(Array.isArray(t[n])||(t[n]=[]),t[n].push(e.blocks[o]))},_getBlockName:function(t){return"string"==typeof t?t:t.block},_getRequestString:function(){var t={blocks:this.blocks.map(function(t){return{block:t.decl,params:t.params,version:2}})},e=BEM.blocks["i-global"];t.metadata={bundles:e.param("bundlesMetadata"),assets:e.param("assetsMetadata")};var i=BEM.blocks["extra-content"]&&BEM.blocks["extra-content"].getInstance();return i&&(t.metadata.extraContent=i.getMetadata()),JSON.stringify(t)},_getArgs:function(){var t={format:"json",request:this._getRequestString()};return"jsonp"===this.params.dataType&&(t.yu=BEM.blocks["i-global"].param("yandexuid")),t},_onChangeNetworkStatus:function(t){if(this._cachedArgs&&t){var e=this._cachedArgs;delete this._cachedArgs,this._get(e)}},_sendAjaxResultCounter:function(t){var e={dtype:"stred",reqid:BEM.blocks["i-global"].param("reqid"),path:BEM.blocks["i-global"].param("project").replace("/",".")+".ajax."+t.type};t.vars&&(e.vars=window.Ya.counter.stringifyParams(t.vars,",")),c.hit(e)},getDefaultParams:function(){return{url:"/",dataType:BEM.blocks["i-global"].getFlag("disable_jsonp")?"json":"jsonp",passedParams:["exp_flags","conditional_patch","tpid","testRunId"],ctx:this}}},{_waitJSBundles:{},isWaitBundles:function(){return Boolean(Object.keys(this._waitJSBundles).length)},_requestCallbackEnabled:function(t){return!this.isWaitBundles()||t.every(function(t){return Boolean(t.called)})}}),BEM.decl({block:"i-request_type_ajax",baseBlock:"i-request"},{onSetMod:{js:{inited:function(){this.__base(),this._requestNumber=this._number=this._preventNumber=this._retryCount=0}}},_get:function(t,e,i,n){this._number++,this._requestNumber++,this._retryCount=n.retryCount,this.__base.apply(this,arguments)},_do:function(t,e,i,n){var o=this;if(o._number>o._preventNumber){var s=arguments,r={data:n.data?$.extend({},n.data,t):t},a=o._wrapCallback(function(i,s,r){o._onSuccess(o._buildCacheKey(t,n),t,i[0],n),o._allowCallback(s,r)&&e.apply(n.callbackCtx,i)}),c=o._wrapCallback(function(t,e,r){o._allowCallback(e,r)&&(o._retryCount-- >0?setTimeout(function(){o._do.apply(o,s)},n.retryInterval):i&&i.apply(n.callbackCtx,t))});$.each(["url","dataType","timeout","type","jsonp","jsonpCallback","xhrFields","cache"].concat(n.paramsToSettings||[]),function(t,e){r[e]=n[e]}),$.ajax(r).done(a).fail(c)}},_wrapCallback:function(t){var e=this._requestNumber,i=this._number;return function(n){null!==n&&t(arguments,e,i)}},_allowCallback:function(t,e){return e>this._preventNumber&&this._requestNumber===t},_buildCacheKey:function(t,e){return"string"==typeof t?t:this.__base(t)+e.url},abort:function(){this._preventNumber=++this._number},getDefaultParams:function(){return $.extend(this.__base(),{cache:!0,type:"GET",dataType:"jsonp",timeout:2e4,retryCount:0,retryInterval:2e3})}}),BEM.decl("i-request_type_ajax",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.cacheIrrelevantParams=["yu","uinfo","viewport","rpt","_","pos"]}},getDefaultParams:function(){return $.extend(this.__base.apply(this,arguments),{timeout:3e5})},_get:function(t,e,i,n){if(this.params.timeout){var o,s=this._buildCacheKey(t,n),r=this.__self._cache[n.cacheGroup];n.cache&&r&&s in r.data&&(o=r.timestamps[s],(new Date).getTime()-o>this.params.timeout&&(delete r.timestamps[s],delete r.data[s],r.keys.splice(r.keys.indexOf(s),1)))}this.__base.apply(this,arguments)},_buildCacheKey:function(t,e){if("string"==typeof t)return t;for(var i=$.extend(!0,{},t),n=this.cacheIrrelevantParams,o=0,s=n.length;o<s;o++)n[o]in i&&delete i[n[o]];return void 0===i.p&&(i.p=1),$.param(i)+e.url},putToCache:function(t,e){var i=this._buildCacheKey(e,t),n=this.__self._cache,o=n[t.cacheGroup]||(n[t.cacheGroup]={keys:[],data:{},timestamps:{}});this.__base.apply(this,arguments),o.keys.length>=t.cacheSize&&delete o.timestamps[o.keys[0]],o.timestamps[i]=(new Date).getTime()}}),BEM.DOM.decl("b-page",{findBlocks:function(){return this.__base.apply(this,arguments),this._scroller=this.hasMod("use-scroller")?this.elem("scroller"):$("html,body"),this},_onUserScroll:function(){this._scroller.stop(),this.stopScrollTracking()},startScrollTracking:function(){this.isScrolling=!0,this.bindToWin("DOMMouseScroll mousewheel",$.throttle(this._onUserScroll.bind(this),100))},stopScrollTracking:function(){this.isScrolling=!1,this.unbindFromWin("DOMMouseScroll mousewheel",$.throttle(this._onUserScroll.bind(this),100))},getElementOffsetTop:function(t,e){return t.offset().top-this._headerHeight-e-20},scrollTo:function(t,e,i,n){i||(i=0);var o=t instanceof jQuery?this.getElementOffsetTop(t,i):t;return e?this.isScrolling||(this.startScrollTracking(),this._scroller.animate({scrollTop:o},e,function(){this.stopScrollTracking(),n&&n.resolve()}.bind(this))):(window.scrollTo(0,o),n&&n.resolve()),this},enableScroll:function(){this.delMod("scroll-disabled"),this.loadScroll()},disableScroll:function(){this.saveScroll(),this.setMod("scroll-disabled","yes")},loadScroll:function(){this._savedScroll&&window.scrollTo(this._savedScroll.x,this._savedScroll.y)},saveScroll:function(){this._savedScroll={x:window.scrollX,y:window.scrollY}}}),BEM.DOM.decl("b-page",{bindEvents:function(){return this.__base.apply(this,arguments),this._location.on("b-page_type_index",this._onPageIndex,this),this},_onPageIndex:function(t,e){this.checkCacheKey()&&this.loadIndex(e)},loadIndex:function(t){return this.load({type:"index",url:BEM.blocks["i-global"].param("router").index,params:t.params}),this}}),BEM.DOM.decl("b-page",{bindEvents:function(){return this.__base.apply(this,arguments),this._location.on("b-page_type_search",this._onPageSearch,this),this},_onPageSearch:$.noop,loadSearch:function(t){return this.load({type:"search",url:t.path||BEM.blocks["i-global"].param("router").search,params:t.params,blocks:this.getBlocks()}),this}}),BEM.DOM.decl("b-page",{_onPageSearch:function(t,e){this.checkCacheKey()&&this.loadSearch(e)},getBlocks:function(){return[{name:"search2:ajax",callback:function(t){this.trigger("search:input:update",t)}}]}}),BEM.DOM.decl("b-page",{loadSearch:function(){return BEM.blocks["i-global"].setParams({searchRequestStartTime:Ya.Rum.getTime()}),this.__base.apply(this,arguments)}}),BEM.DOM.decl("b-page",{onSetMod:{js:{inited:function(){this.params.shouldUpdateFilters=!BEM.blocks["i-global"].param("hasHistoryAPI"),this.__base.apply(this,arguments)}}},getBlocks:function(){var t=this.__base.apply(this,arguments);return this.params.shouldUpdateFilters&&t.push({name:"advanced-search__filters",callback:this._onAdvancedSearchData}),t},_onAdvancedSearchData:function(t){this.trigger("filters:update",t)}}),function(t,e){if(!e.event.special.pointerclick){var i,n=void 0!==t.ontouchstart||navigator.msMaxTouchPoints>0,o=10,s=25,r=900,a=[],c=[],l=null,h=null,u="touchAction"in document.documentElement.style?function(t){return function t(e){return!(!e||e===document.documentElement)&&("manipulation"===getComputedStyle(e)["touch-action"]||t(e.parentElement))}(t)}:function(){return!1};n?(i={click:function(t){var e=Object(t.originalEvent)._sourcePoint;if(!e)return d.apply(this,arguments);e.isDefaultPrevented()&&t.preventDefault()},"pointerdown pointermove pointerleave pointercancel pointerup":function(t){var e,i,n=t.type;if("mouse"!==t.pointerType&&("pointerdown"!==n&&"pointerup"!==n||!u(t.target)))if("pointerdown"===n)h=t;else if("pointermove"===n&&h&&(h.target!==t.target||(e=h,i=t,Math.abs(e.clientX-i.clientX)>o||Math.abs(e.clientY-i.clientY)>o)))h=null;else if("pointerleave"===n||"pointercancel"===n)h=null;else if("pointerup"===n){if(function(t){if(!t.isPrimary)return;a.push(t),setTimeout(Array.prototype.shift.bind(a),r)}(t),!h)return;if(!(t.timeStamp-h.timeStamp>250))return l||(l=setTimeout(function(){l=h=null})),d.apply(this,arguments);h=null}}},["mousedown","click"].forEach(function(e){t.addEventListener(e,function(t){!function(t){var e=t.clientX,i=t.clientY,n="_compat"+t.type;if(t._sourcePoint)return;for(var o=0;o<a.length;o++){var l=a[o],h=l.target===t.target;if(!l[n]&&((h||!(Math.abs(e-l.clientX)>s||Math.abs(i-l.clientY)>s))&&(h||document.elementFromPoint(l.clientX,l.clientY)!==l.target))){t._sourcePoint=l,l[n]=t;break}}c.push(t),setTimeout(Array.prototype.shift.bind(c),r)}(t),function(t){var e=function(t){for(var e=0;e<c.length;e++)if(c[e]===t)return c[e]._sourcePoint}(t);return Boolean(e)&&e.target!==t.target}(t)&&(t.preventDefault(),t.stopPropagation())},!0)})):i={click:function(t){return d.apply(this,arguments)}},e.event.special.pointerclick={setup:function(){e(this).on(i)},teardown:function(){e(this).off(i)}}}function d(t){var i,n=t.type;return t.button||(t.type="pointerclick",i=e.event.dispatch.apply(this,arguments),t.type=n),i}}(window,jQuery),BEM.DOM.decl("content-list",{_getDirectBlock:function(){if(this.params.directParams)return{block:"directblock",js:this.params.directParams.js,attrs:{id:"direct_under-results","data-logger-type":"direct-under-results"},mods:{"under-results":!0,"update-on-init":"yes",stub:this.params.directParams.stub}}},hideBlocks:function(){var t=this.findElem("hide-on-infinite-load");t&&t.hide()},showBlocks:function(){var t=this.findElem("hide-on-infinite-load");t&&t.css("display",""),this._updateDirectUnderResult()},_updateDirectUnderResult:function(){var t=this.findElem("direct","under-results",!0);t&&t.is(":empty")&&BEM.DOM.update(t,BEMHTML.apply(this._getDirectBlock()))}},{live:function(){this.__base(),this.liveInitOnChannelEvent("infinite-load","infinite-load-state",function(t,e){e?this.hideBlocks():this.showBlocks()})}}),BEM.DOM.decl("unrelevant-label",{_expandUnrelevantSnippets:function(){var t=this.findBlockOutside({block:"serp-controller",modName:"has_unrelevant",modVal:!0});t&&t.setMod("show_unrelevant",!0),this._sendCounter("expand"),Ya.reactBus.emit("unrelevant:expand")},_sendCounter:function(t){w(this.domElem,this.params.counters[t])}},{live:function(){this.liveBindTo("link","pointerclick",function(){this._expandUnrelevantSnippets()}),this.liveBindTo("link","keydown",function(t){"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),this._expandUnrelevantSnippets())}),this.liveBindToWin("load",function(){this._sendCounter("init")})}}),BEM.DOM.decl("more",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),BEM.blocks["serp-controller"].on("listOut",this._onListOut,this)}},loading:{yes:function(){this.hideButton(),this.blockInside("spin2").setMod("progress","yes")},"":function(){this.blockInside("spin2").delMod("progress")}},disabled:{yes:function(){this.hideButton()}}},destruct:function(){BEM.blocks["serp-controller"].un("listOut",this._onListOut,this),this.__base.apply(this,arguments)},_onListOut:function(t,e){var i=this.hasMod("direction","next");"left"!==e&&"up"!==e||i||this.trigger("click"),"right"!==e&&"down"!==e||!i||this.trigger("click")},_onClick:function(t){t.preventDefault(),this.trigger("click"),this.setMod("loading","yes")},startProgress:function(){return this.setMod("loading","yes"),this},stopProgress:function(){return this.delMod("loading"),this},show:function(){return this.delMod("hidden")},hide:function(){return this.setMod("hidden","yes")},showButton:function(){var t=this.blockInside("spin2");return t.hasMod("progress")&&t.delMod("progress"),this.delMod(this.elem("button"),"hidden"),this},hideButton:function(){return this.setMod(this.elem("button"),"hidden","yes"),this},url:function(t){return void 0!==t?(this.elem("button").attr("href",t),this.params.url=t,this):this.elem("button").attr("href")}},{live:function(){this.liveBindTo("button","pointerclick",function(t){this._onClick(t)})}}),BEM.DOM.decl({block:"more",modName:"direction",modVal:"next"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),BEM.blocks["i-keyrouter"].on("special:right pagedown space",this._onLoadNextPage,this)}}},destruct:function(){BEM.blocks["i-keyrouter"].un("special:right, pagedown space",this._onLoadNextPage,this),this.__base.apply(this,arguments)},_onLoadNextPage:function(){this._isEndOfPage()&&this.trigger("click")},_isEndOfPage:function(){return window.pageYOffset+window.innerHeight>=this.__self.doc.height()}}),function(t){t.dom={getActiveElement:function(){return t(document.activeElement)}},t.fn.isFocused=function(){return this.is(t.dom.getActiveElement())}}(jQuery),BEM.DOM.decl({block:"button2",baseBlock:"control"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments)}},pressed:{yes:function(){if(this.hasMod("disabled"))return!1;this.trigger("press")},"":function(){this.trigger("release")}},checked:{yes:function(){this.trigger("check").domElem.attr("aria-pressed","true")},"":function(){this.trigger("uncheck").domElem.attr("aria-pressed","false")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("pressed")}},focused:{"":function(){this.__base.apply(this,arguments),this.delMod("pressed")}},progress:{yes:function(){this.setMod("disabled","yes")},"":function(){this.delMod("disabled")}}},getText:function(){return this.elem("text").text()},setText:function(t){return this.elem("text").text(t),this},_onClick:function(t){(!this._preventClick||t.detail>0)&&this.trigger("click",this._buildClickEventData(t)),this._preventClick=!1},_processClick:function(t){this.trigger("click",this._buildClickEventData(t))},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onKeydown:function(t){var e=t.keyCode,i=BEM.blocks.keycodes;i.is(e,this.params.pressKeys)&&(this.setMod("pressed","yes"),i.is(e,this.params.prvntKeys)&&t.preventDefault())},_onKeyup:function(t){var e=t.keyCode,i=BEM.blocks.keycodes;i.is(e,this.params.prvntKeys)&&t.preventDefault(),i.is(e,this.params.pressKeys)&&(this.delMod("pressed"),i.is(e,this.params.clickKeys)&&(this._preventClick=!0,this._processClick(t)))},_buildClickEventData:function(t){return{domEvent:t,isModKey:t.ctrlKey||t.altKey||t.metaKey||t.shiftKey}},getDefaultParams:function(){return $.extend(this.__base(),{pressKeys:["SPACE","ENTER"],prvntKeys:[],clickKeys:[]})}},{live:function(){return this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}).liveBindTo("pointerclick",function(t){this.hasMod("disabled")||this._onClick(t)}).liveBindTo("keydown",function(t){this._onKeydown(t)}).liveBindTo("keyup",function(t){this._onKeyup(t)}),this.__base()}}),BEM.DOM.decl("button2",{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered")}}},_onPointerenter:function(){this.setMod("hovered","yes")},_onPointerleave:function(){this.delMod("hovered")},_onClick:function(){this.__base.apply(this,arguments),this._isDestructing||this.setMod("focused","yes")}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}).liveBindTo("mousedown",function(t){t.preventDefault()}),this.__base()}}),BEM.DOM.decl("button2",{getIconWidth:function(){var t=this.elem("icon");if(t.length)return t.width()}}),BEM.DOM.decl("button2",{setIconMod:function(t,e){return this.blockInside("icon").setMod(t,e),this},delIconMod:function(t){return this.blockInside("icon").delMod(t),this},setTitle:function(t){return this.domElem.attr("title",t),this}}),BEM.decl("keycodes",{},{BACKSPACE:8,TAB:9,ENTER:13,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,is:function(t,e){return(Array.isArray(e)?e:Array.prototype.slice.call(arguments,1)).some(function(e){return this[e]===t},this)}}),BEM.DOM.decl({block:"button2",modName:"type",modVal:"link"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._url=this.params._url||this.domElem.attr("href")}},disabled:{"":function(){this.__base.apply(this,arguments),this.domElem.attr("tabindex",this.params._tabindex).attr("href",this._url)},yes:function(){this.__base.apply(this,arguments),void 0!==this._url&&this.domElem.attr("tabindex",-1),this.domElem.removeAttr("href")}}},getUrl:function(){return this._url},setUrl:function(t){return this._url=t,this.hasMod("disabled")||this.domElem.attr("href",t),this},getDefaultParams:function(){return $.extend(this.__base(),{pressKeys:["ENTER"]})}}),BEM.DOM.decl({block:"button2",modName:"type",modVal:"link"},{},{live:function(){return this.liveBindTo("dragend",function(t){this.hasMod("type","link")&&!this.hasMod("disabled")&&this.delMod("pressed")}),this.__base()}}),BEM.DOM.decl("serp-controller",{_viewParams:[],onSetMod:{js:{inited:function(){this.__self.instance=this,this.findBlocks()._setPageMod(),this.bindEvents(),this.syncState()}},infinite:{"":function(){this.disableInfiniteLoad()}}},destruct:function(){this.__self.instance=null,this.unbindEvents(),this.__base.apply(this,arguments)},findBlocks:function(){return this.page=this.findBlockOutside("b-page"),this.location=BEM.blocks.location.getInstance(),this},bindEvents:function(){return BEM.blocks.more.on("click",this._onMoreClick,this),this._isClickAnimated()||(BEM.blocks["serp-item"].on(this.domElem,"clicked",this._onItemClicked,this),BEM.blocks["serp-item"].on(this.domElem,"selected",this._onItemSelected,this)),this},unbindEvents:function(){return BEM.blocks.more.un("click",this._onMoreClick,this),this._isClickAnimated()||(BEM.blocks["serp-item"].un(this.domElem,"clicked",this._onItemClicked,this),BEM.blocks["serp-item"].un(this.domElem,"selected",this._onItemSelected,this)),this},_isClickAnimated:function(){return this.hasMod("animated")},_onPageTypeChanged:function(){this._setPageMod().syncState(),c&&Ya.Rum.setSetting("reqid",c.getReqId()),this.__base.apply(this,arguments)},_setPageMod:function(){return this.setMod("page",this.page.getMod("type")),this},_onMoreClick:function(t){var e=t.block.getMod("direction");this.hasMod("loading","yes")||(this.load(e),"prev"===e&&this.location.change({url:t.block.params.url,history:!1,trigger:!1}))},syncState:function(){this.loadInitialItem(),this._competitors=this.findBlockInside("competitors")},showFooter:function(){var t=this.page.blockInside("footer");return t&&t.show(),this.toggleCompetitors(),this},toggleCompetitors:function(){return BEM.blocks["i-global"].param("isPumpkin")?this:(this._competitors&&this._competitors.domElem&&this._competitors.setMod("visibility",BEM.blocks["i-global"].param("query")?"":"hidden"),this)},hideFooter:function(t){var e=this.page.blockInside("footer");return e&&(t?e.transparent():e.hide()),this._competitors&&this._competitors.domElem&&this._competitors.setMod("visibility",t?"transparent":"hidden"),this},findMore:function(t){var e="_more"+t,i=this[e];return i&&i.domElem||(this[e]=this.findBlockInside({block:"more",modName:"direction",modVal:t})),this[e]},checkListOut:function(t){var e=t.params.pos,i=this.changeThis(this.getStraightItem||this.getNearItem)(t,1),n=Boolean(this.getItemByPos(Number(e)+5).length);return i&&n||this.trigger("listOut","right"),this},addReqId:function(t){return t&&(t.params.reqid=c.getReqId(t.domElem)||!1),this},_getInfiniteSerpListParams:function(){return{}}},{getInstance:function(){if(!this.instance){var t=$(this.buildSelector());this.instance=t.length?t.bem(this.getName()):null}return this.instance},live:function(){return this.liveInitOnBlockOutsideEvent("change","b-page",function(t,e){this._onPageTypeChanged(e.type)}),!1}}),BEM.DOM.decl("serp-controller",{_viewParams:["filmId"],_sendPageLoadedCounter:function(){var t=$("[data-cid]").first(),e=this._getBlocksHeights(),i=BEM.DOM.getWindowSize();c.hit({path:"471.143.1007",vars:["-res-heights="+e,"-viewport="+i.width+":"+i.height].join(","),dtype:"iweb"},null,t)},_getBlocksHeights:function(){var t={},e=[],i=this;$("[data-cid]").each(function(){var n=$(this),o=n.data("cid"),s=n.css(["display","margin-top","margin-bottom"]);if(t[o]=t[o]||0,n.removeAttr("data-cid"),"none"!==s.display){var r=n.find(i.distrThematicClass).outerHeight(!0)||0,a=e[e.length-1];r&&(t[o]-=r);var c={id:o,tGap:parseInt(s["margin-top"],10),bGap:parseInt(s["margin-bottom"],10),rect:n[0].getBoundingClientRect()};a&&a[0].id===o?a.push(c):e.push([c])}});var n=e.length-1;return e.forEach(function(i,o){var s=i[0],r=i[i.length-1],a=s.id,c=o!==n&&e[o+1][0],l=0!==o&&e[o-1],h=l&&l[l.length-1],u=r.rect.bottom-s.rect.top,d=h?h.bGap:0,p=c?c.tGap:0,f=Math.max(s.tGap-d,0),m=Math.max(r.bGap-p,0),_=Math.min(d,p);t[a]+=u+f+m+_}),$.map(t,function(t,e){return e+":"+Math.round(t)}).join(";")},syncState:function(){this._sendPageLoadedCounter(),this.__base.apply(this,arguments)},_isVideoNotFoundByFilmId:function(){return BEM.blocks.location.getInstance().getParamValue("filmId")&&this.params.item&&!this.params.item.selected},_hitVideoNotFoundByFilmId:function(t){this._isVideoNotFoundByFilmId()&&window.Ya.counter.cp({cid:t.cid,path:"open-player.not-found",reqid:BEM.blocks["i-global"].param("reqid")})},_openExternal:function(t){t.url&&window.open(t.url,"_blank"),this._hitExternalSnippetOpen(t)},_hitExternalSnippetOpen:function(t){var e="touch-phone"===BEM.blocks["i-global"].param("platform")?"565":"197",i=BEM.blocks["i-global"].param("login"),n=Number(new Date),o=t.url,s={path:"open-player.serp.to_url",dtype:"stred",pid:e,cid:"70910",click_id:n,jsapi:0,select_event:"click",server_descr:"VIDEOQUICK",table:"video_tech",rnd:n,from:"yavideo"};i&&(s.login=i),void 0!==t.pos&&(s.click_pos=t.pos),void 0===t.host&&(s.host=t.host);var r=window.c.getUrl(s,o);window.Ya.counter.makeReq(r)}},{logClickTime:function(t){BEM.blocks.localstorage.getInstance().set("film.click.data",{time:Date.now(),filmId:t.id,from:"search"})}}),BEM.DOM.decl("serp-controller",{syncState:function(){this.__base.apply(this,arguments);var t=BEM.blocks["serp-item"].getCurrent();t&&t.hasMod("selected")&&t.setMod("visited","yes")}},{getInstance:function(){return this.instance||(this.instance=$(this.buildSelector()).bem(this.getName()))}}),BEM.DOM.decl("serp-controller",{_viewParams:["filmId"],onSetMod:{js:{inited:function(){this.hasMod("series","yes")&&(this.extraScroll=70),this.__base.apply(this,arguments),window.Ya&&window.Ya.reactBus&&window.Ya.reactBus.once("direct-right:loaded",this._onDirectRightLoaded,this)}}},_onDirectRightLoaded:function(){this._relatedRequestDeferred||window.Ya.reactBus.emit("related-video:show")},_requestRelatedVideo:function(t,e){BEM.create("i-request_type_bem",{url:BEM.blocks.uri.setParams(BEM.blocks["i-global"].param("router").search,t.req),ctx:this}).block({block:"related-video",mods:{carousel:!0,right:!0}},function(t){e.resolve(t)}).get()},_rejectRelatedRequest:function(){this._relatedRequestDeferred&&(this._relatedRequestDeferred.reject(),this._relatedRequestDeferred=null)},findBlocks:function(){return this.__base.apply(this,arguments),this},_onItemClicked:function(t,e){var i=e.getVideoData(),n=e.eventParams&&e.eventParams.event;if(i.isExternal)return t.preventDefault(),void this._openExternal({host:i.greenHost,pos:i.pos,url:i.externalUrl});if(!e.hasMod("type","internal")&&!e.hasMod("type","display-options")){this.__self.logClickTime(i);var o=!this.page.hasMod("type","index"),s=2===n.which||n.metaKey||n.ctrlKey;o?this.__self.navigate(i.detailUrl,i,{openInNewTab:s}):(this.loadItem(i),this.params.checkListOut&&this.checkListOut(e))}},_appendBlock:function(t){var e=this.findElem("right-bottom","direct",!0),i=e.length?e:this.findElem("list","right",!0);e.length?BEM.DOM.prepend(i,t):BEM.DOM.append(i,t)}},{navigate:function(t,e,i){var n=i.openInNewTab;this._hitSnippetClick(e),e.pumpkin||n?window.open(t,"_blank"):location.href=t},_hitSnippetClick:function(t){c.hit({dtype:"iweb",path:"/snippet/click",reqid:t.reqid,vars:["-url="+t.detailUrl,"-pos="+String(t.pos),"-t="+t.t,"-type=serp"].join(",")},null,null,!0)},hitClick:function(t){},live:function(){return this.liveInitOnBlockInsideEvent("navigate","serp-item",function(t,e){this.navigate(e.url,e.videoData)}.bind(this)),this.liveInitOnBlockOutsideEvent("load:start","b-page",function(){this._rejectRelatedRequest()}),this.__base.apply(this,arguments)}}),BEM.DOM.decl("serp-controller",{_req:{},destruct:function(){this._clearRequestStack(),this.__base.apply(this,arguments)},_clearRequestStack:function(){return BEM.blocks.utils.forOwn(this._req,function(t){t.abort()}),this._req={},this},syncState:function(){this._clearRequestStack(),this._resetLoading("prev"),this._resetLoading("next"),this.__base.apply(this,arguments)},getRequest:function(t,e){var i={url:BEM.blocks.uri.getPath(t),ctx:this,cache:!0};return Object.assign(i,e),BEM.create("i-request_type_bem",i)},load:function(t,e){this._loadPage(t,e)&&(this._onListLoading(t),this._setLoading(t))},_setLoading:function(t){this.setMod("loading","yes");var e=this.findMore(t);return e&&e.startProgress(),this},_resetLoading:function(t){this.delMod("loading");var e=this.findMore(t);return e&&e.stopProgress(),this},_loadPage:function(t,e){var i=this.params[t+"PageUrl"],n=BEM.blocks.uri.parseParams(i);return!!i&&(e=Object.assign(e||{},{direction:t}),Object.assign(n,this.__self.getUrlRequestParams(n,e)),n.suggest_reqid=this.page.suggestReqID||BEM.blocks["i-global"].param("suggest_reqid"),this._sendRequest(n,e),!0)},_sendRequest:function(t,e){var i=this.getRequest(this.params[e.direction+"PageUrl"],e);this._req[t.p]=i,this.setRequestBlocks(i,e),i.get(t,this._onAjaxSuccess)},_onAjaxSuccess:$.noop,setRequestBlocks:function(t,e){var i=e.direction;return t.block("serp-controller",function(t){this._onSerpControllerLoaded(t,i)}.bind(this)).block("serp-list_infinite_yes",function(t){this._onListLoadSuccess(t,i)}.bind(this),function(){this._onListLoadError(i)}.bind(this),this._getInfiniteSerpListParams()).block("more_direction_"+i,this._onMoreDataLoaded),this},_onSerpControllerLoaded:function(t,e){this.params[e+"PageUrl"]=t.params[e+"PageUrl"]},_onPageContentUpdating:$.noop,_onPageContentUpdated:function(){var t=this.findMore("next");t&&t.params.visible||this.afterCurrentEvent(this.showFooter)},_onListLoading:$.noop,_onListLoadSuccess:$.noop,_onListLoadError:$.noop,_onMoreDataLoaded:function(t){var e=t.params.direction,i=t.params.visible,n=this.findMore(e);n&&(this._resetLoading(e),n.url(t.params.url).setMod("disabled",i?"":"yes").setMod("hidden",i?"":"yes"),this["_onMoreDataLoaded"+e](t,n))},_onMoreDataLoadednext:function(t,e){var i=t.params.visible,n=this.getListCount()%this.params.count==0;e.setMod("last",n?"yes":"no"),this.hideFooter(),this.isMoreButtonShouldShown(i)&&(this.trigger("infiniteLoadStop"),e.showButton(),this.showFooter()),i||this.showFooter()},isMoreButtonShouldShown:function(t){return t&&this.getListCount()%this.params.count==0},_onMoreDataLoadedprev:function(t,e){t.params.visible&&e.showButton()}},{live:function(){var t=this.__base.apply(this,arguments);return this.liveInitOnBlockOutsideEvent("contentUpdating","b-page",function(){this._onPageContentUpdating()}).liveInitOnBlockOutsideEvent("contentUpdated","b-page",function(){this._onPageContentUpdated()}),t},getUrlRequestParams:function(){var t={serpid:BEM.blocks["i-global"].param("serpid")},e=BEM.blocks.location.getInstance();return["rdpass","tpid","testRunId"].forEach(function(i){e.hasParam(i)&&(t[i]=e.getParamValue(i))}),t}}),BEM.DOM.decl("serp-controller",{_onListLoading:function(t){this.__base.apply(this,arguments),this._setLoading(t),this.trigger("loading")},_onListLoadSuccess:function(t,e){this.__base.apply(this,arguments);var i=BEM.DOM["next"===e?"append":"prepend"](this.findElem("content"),t.html);this._sendPageLoadedCounter(),this._resetLoading(e),this.trigger("loaded",{content:i,params:t.params,direction:e}),Ya.reactBus.emit("react-adapter:mount",i.get(0))},_onListLoadError:function(t){this.__base.apply(this,arguments),this._resetLoading(t),this.trigger("loadError")}}),BEM.DOM.decl("serp-controller",{deviation:5,itemSelector:".serp-item",getBlockByDirection:function(t){var e,i=this.getCurrentItem(),n=i&&i.params.pos;if(i)return n>=0&&"left"===t?e=this.getNearItem(i,-1):"right"===t&&(e=this.getNearItem(i,1)),e&&e.length?e.bem("serp-item"):void 0},getNearItem:function(t,e){return this.getNearItemBySibling(t,e)||this.getNearItemByIdx(t,e)||this.getNearItemByPos(t,e)},getNearItemBySibling:function(t,e){var i=t.domElem[e>0?"next":"prev"](this.itemSelector);return i.length&&i},getNearItemByPos:function(t,e){for(var i=[],n=t.params.pos,o=n;0===i.length&&Math.abs(n-o)<this.deviation;)o+=e,i=this.getItemByPos(o);return i.length&&i},getNearItemByIdx:function(t,e){var i=t.domElem.index(this.itemSelector)+e,n=i>=0?$(this.itemSelector).eq(i):$([]);return n.length&&n},getStraightItem:function(t,e){var i,n,o,s,r,a,c,l,h,u=t.domElem,d=u.offset(),p=0,f=0;for(BEM.blocks.utils.isEmpty(u)||BEM.blocks["scroll-spy"].getElemVisibility(u).visible||((a=this.getVisibleNearItem(u,-1))&&(u=a),d=u.offset()),n=Math.floor(d.left+u.width()/2),o=d.top,r=(s=this.getVisibleNearItem(u,e))&&s.offset();s&&p<=30&&(p++,!(r.top!==o&&(o=r.top,++f>2)));){if(c=n-r.left,l=r.left+s.width()-n,h=Math.min(Math.abs(c),Math.abs(l)),c>=0&&l>=0||h<7){i=s;break}r=(s=this.getVisibleNearItem(s,e))&&s.offset()}return i},getVisibleNearItem:function(t,e){for(var i=this.getNearItem(t.bem("serp-item"),e);i&&i.hasClass("serp-item_extra_yes");)i=this.getNearItem(i.bem("serp-item"),e);return i},getItemByPos:function(t){return $(".serp-item_pos_"+t+":eq(0)")},getItemParamsByPos:function(t){var e=this.getItemByPos(t);return e.length?e.bem("serp-item").params:null},getItemById:function(t,e){var i=$(e?e+" #"+t:"#"+t);return i.length?i.bem("serp-item"):void 0},selectItem:function(t){return t.setMod("selected","yes"),this},getSelectedItemId:function(){return(this.params.item||{}).selected},getSelectedItem:function(){var t=this.getSelectedItemId();return t&&this.getItemById(t)},getCurrentItem:function(){return BEM.blocks["serp-item"].getCurrent()},getPrevItem:function(){return BEM.blocks["serp-item"].getPrev()},selectCurrentItem:function(){var t=this.getCurrentItem();return t&&this.selectItem(t),this},unselectCurrentItem:function(){return BEM.blocks["serp-item"].delSelected(),this}}),BEM.DOM.decl("serp-controller",{onSetMod:{js:function(){this.findBlocksInside({blockName:"morda-section",modName:"preload",modVal:"yes"}),this.__base.apply(this,arguments)}},getBlockByDirection:function(t){var e=this.__base.apply(this,arguments);return e||(e=(e=this.getNearItem(this.getCurrentItem(),"down"===t?1:-1))&&e.length?e.bem("serp-item"):void 0),e},getNearItemByIdx:function(t,e,i){var n=this[i+"itemSelector"]||this.itemSelector,o=t.domElem.index(n)+e,s=o>=0?$(n).eq(o):$([]);return s.length&&s},getItemById:function(t){var e;if(t)return(e=this.findElem("content").find("#"+t)).length?e.bem("serp-item"):void 0}}),BEM.DOM.decl("serp-controller",{loadInitialItem:function(){return this},loadItem:function(){return this}}),BEM.DOM.decl("serp-controller",{onSetMod:{js:{inited:function(){this._cleanRejectedParams(),this.__base.apply(this,arguments)}}},getDefaultParams:function(){var t=this.__base.apply(this,arguments)||{};return t.rejectedParams=["parent-reqid","uinfo","photo-upload"],t},_cleanRejectedParams:function(){var t=this._getRejectedParams();t&&t.length&&BEM.blocks.location.getInstance().change({url:BEM.blocks.uri.delParams(location.href,t),trigger:!1,history:!1})},_getRejectedParams:function(){var t=BEM.blocks.uri.parseParams();return this.params.rejectedParams.filter(function(e){return Boolean(t[e])})}}),BEM.DOM.decl("serp-controller",{getDefaultParams:function(){var t=this.__base.apply(this,arguments)||{};return t.rejectedParams&&t.rejectedParams.length||(t.rejectedParams=[]),t.rejectedParams.push("reqid"),t.rejectedParams.push("source"),t}}),BEM.DOM.decl({block:"serp-controller",modName:"infinite",modVal:"yes"},{offset:{default:700,serp:700,view:2e3},syncState:function(){return this.__base.apply(this,arguments),this.updateInfiniteLoadState(!0),this},unbindEvents:function(){return this.__base.apply(this,arguments),this.disableInfiniteLoad(),this},enableInfiniteLoad:function(){var t=this.findMore("next");t&&t.setMod("disabled","yes"),BEM.blocks["b-page"].on("scroll resize",this.tryLoad,this)},disableInfiniteLoad:function(){var t=this.findMore("next");t&&t.delMod("disabled"),BEM.blocks["b-page"].un("scroll resize",this.tryLoad,this)},updateInfiniteLoadState:function(){var t=this.needMore();BEM.channel("infinite-load").trigger("infinite-load-state",t),t?(new window.rafQueue).add(this.enableInfiniteLoad,this).add(this.tryLoad,this).run():(new window.rafQueue).add(this.disableInfiniteLoad,this).add(this.toggleCompetitors,this).run()},getListCount:function(){return this.findElem("list").length},_onMoreDataLoaded:function(t){this.__base.apply(this,arguments),"next"===t.params.direction&&this.updateInfiniteLoadState()},tryLoad:function(t){(new window.rafQueue).add(function(){!this.hasMod("loading","yes")&&this._isEndOfPage(t)&&(this.disableInfiniteLoad(),this.load("next"))}.bind(this)).run()},_isEndOfPage:function(){var t,e=window.pageYOffset+window.innerHeight,i=this.findMore("next");return!(!i||i.domElem.is(":hidden"))&&(t=i.domElem.offset().top,e+this._getInfinityBottomSpace()>=t)},_getInfinityBottomSpace:function(){return this.offset.default},needMore:function(){return this.getListCount()%this.params.count!=0}}),BEM.DOM.decl({block:"serp-controller",modName:"infinite",modVal:"yes"},{_tunedScrollOffset:1500,_shouldFetchOnNextScroll:!0,needMore:function(){return!!BEM.blocks["i-global"].getFlag("video_infinite_scroll")||this.__base.apply(this,arguments)},_needTuneScroll:function(){if(!BEM.blocks["i-global"].getFlag("video_infinite_scroll"))return!1},_isEndOfPage:function(t){if(!this._needTuneScroll())return this.__base.apply(this,arguments);if(t&&"scroll"===t.type&&this._shouldFetchOnNextScroll)return this._shouldFetchOnNextScroll=!1,!0;var e=this.findMore("next");if(!e)return!1;var i=window.pageYOffset+window.innerHeight,n=e.domElem.offset().top;return i+this._getVideoOffset()>=n},_getVideoOffset:function(){return this._tunedScrollOffset}}),BEM.DOM.decl({block:"serp-controller",modName:"infinite",modVal:"yes"},{getListCount:function(){return this.findElem("list","type","search").length}}),BEM.DOM.decl({block:"serp-controller",modName:"infinite",modVal:"yes"},{offset:{default:900,serp:700,view:2e3}}),function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=Number(new Date),n=Math.max(0,16-(i-t)),o=setTimeout(function(){e(i+n)},n);return t=i+n,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),window.rafQueue=function(){var t=[];this.add=function(e,i){return Array.isArray(e)||(e=[e]),e.forEach(function(e){var n;"object"==typeof e&&e&&e.fn&&(n=(e=e.fn).ctx),t.push({fn:e,ctx:n||i})}),this},this.run=function(){var e,i=window.requestAnimationFrame,n=function(){0!==t.length&&((e=t.shift()).ctx?e.fn.call(e.ctx):e.fn(),i(n))};i(function(){i(n)})}},window.inNextFrame=function(t,e,i){window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){e?t.call(e,i):t(i)})})}}(),BEM.DOM.decl("scroll-spy",{onFirstBecameVisible:function(t,e){var i=this.params.visibilityConditions;this.__self.notifyBecameVisible(this.domElem,t,e,i)}},{SCROLL_EVENT:"scroll touchmove",SCROLL_SMOOTHING:50,live:!0,init:function(){void 0===this._watchedElements&&(this._win=BEM.DOM.win,this._watchedElements=[],this._onScrollSmooth=$.debounce(this._onScroll,this.SCROLL_SMOOTHING,this))},getElemVisibility:function(t){if(!t||!t.is(":visible"))return{visible:!1,x:0,y:0,area:0};var e=t[0].getBoundingClientRect();if(e.right<=0||e.left>=window.innerWidth||e.bottom<=0||e.top>=window.innerHeight)return{visible:!1,x:0,y:0,area:0};var i=e.width*e.height,n=this.getIntersection(e,{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0});return{visible:!0,x:e.width?n.xOverlap/e.width:0,y:e.height?n.yOverlap/e.height:0,area:i?n.overlapArea/i:0}},getIntersection:function(t,e){var i=Math.min(t.right,e.right)-Math.max(t.left,e.left),n=Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top);return i<0&&(i=0),n<0&&(n=0),{xOverlap:i,yOverlap:n,overlapArea:i*n}},watchVisibility:function(t,e,i){if(void 0===this._watchedElements&&this.init(),!t)throw new Error("Dom elem required");if(!e)throw new Error("Callback required");if(!t.length)throw new Error("Can't watch empty collection");var n=$.identify(t[0]);return this.isElemWatched(t,e)||(this._watchedElements.push({id:n,domElem:t,callback:e,ctx:i||null}),this._setupScrollListener()),this},stopWatchingVisibility:function(t,e,i){if(!t.length||void 0===this._watchedElements)return this;i=i||null;var n=$.identify(t[0]),o=e?function(t){return!(t.id===n&&t.callback===e&&t.ctx===i)}:function(t){return t.id!==n};return this._watchedElements=this._watchedElements.filter(o),this._setupScrollListener(),this},_setupScrollListener:function(){var t=this._watchedElements.length;1!==t||this._listeningScroll?0===t&&(this._win.off(this.SCROLL_EVENT,this._onScrollSmooth),this._listeningScroll=!1):(this._win.on(this.SCROLL_EVENT,this._onScrollSmooth),this._listeningScroll=!0)},_onScroll:function(){for(var t=0;t<this._watchedElements.length;t++){var e=this._watchedElements[t],i=this.getElemVisibility(e.domElem);setTimeout(e.callback.bind(e.ctx,i),0)}},isElemWatched:function(t,e,i){if(void 0===this._watchedElements&&this.init(),!t.length)return!1;var n=$.identify(t[0]);return i=i||null,this._watchedElements.some(function(t){return t.id===n&&t.callback===e&&t.ctx===i})},notifyBecameVisible:function(t,e,i,n){void 0===this._watchedElements&&this.init();var o=e.bind(i),s=this.getElemVisibility(t);if(this.checkVisibilityConditions(n,s))return setTimeout(o,0);this.watchVisibility(t,function e(i){this.checkVisibilityConditions(n,i)&&(setTimeout(o,0),this.stopWatchingVisibility(t,e,this))},this)},checkVisibilityConditions:function(t,e){void 0===this._watchedElements&&this.init();var i=e.visible;if(i)for(var n in t)if(t.hasOwnProperty(n)){var o=e[n]>=t[n];if(!(i=i&&o))break}return i}}),BEM.DOM.decl({block:"serp-controller",modName:"navigation",modVal:"yes"},{extraScroll:80,isInitialScrollDone:!1,findBlocks:function(){return this.navigation=this.findBlockOn("navigation-controller"),this.__base.apply(this,arguments)},bindEvents:function(){return this.params.item&&this.params.item.selected&&(this.bindToWin("load scroll",this.initialScroll),this.bindToWin("focus",this.initialScrollOnFocus),this.bindToWin("blur",this.unbindInitialScrollOnFocus)),this.__base.apply(this,arguments)},unbindInitialScrollOnFocus:function(){this.unbindFromWin("focus",this.initialScrollOnFocus),this.unbindFromWin("blur",this.unbindInitialScrollOnFocus)},initialScrollOnFocus:function(){this.initialScrollToSelected(),this.unbindFromWin("focus",this.initialScrollOnFocus),this.unbindFromWin("blur",this.unbindInitialScrollOnFocus),this.location.un("b-page_type_search",this.initialScrollOnFocus,this)},initialScroll:function(){this.isInitialScrollDone||this.initialScrollToSelected(),this.unbindFromWin("load scroll",this.initialScroll),this.location.un("b-page_type_search",this.initialScroll,this),this.isInitialScrollDone=!0},needScrollTo:function(t){return"function"==typeof this.isViewLayout&&this.isViewLayout()||t.offset().top>.7*this.__self.win.height()},initialScrollToSelected:function(){var t,e,i=this._getItemShouldScrollTo();i&&(t=i.domElem,e=this.needScrollTo(t)?t:this.__self.win.scrollTop(),this.page.scrollTo(e,950,this.extraScroll))},_getItemShouldScrollTo:function(){return this.getCurrentItem()}}),BEM.DOM.decl("serp-controller",{bindEvents:function(){this.__base.apply(this,arguments),BEM.blocks["b-page"].on("scroll",this._onScroll,this),this._enablePointerEventsDebounced=$.debounce(this._enablePointerEvents,300,this)},destruct:function(){BEM.blocks["b-page"].un("scroll",this._onScroll,this),this.__base.apply(this,arguments)},_needPointerEventsSwitching:function(){return!BEM.blocks["i-global"].param("mobile")&&BEM.blocks["i-ua"].isPointerEventsAvailable()},_onScroll:function(){this._needPointerEventsSwitching()&&(this.hasMod(this._getContent(),"pointer-events","none")||this._disablePointerEvents(),this._enablePointerEventsDebounced())},_disablePointerEvents:function(){this.setMod(this._getContent(),"pointer-events","none")},_enablePointerEvents:function(){this.delMod(this._getContent(),"pointer-events")},_getContent:function(){return this._content||(this._content=this.findElem("content"))},_onPageTypeChanged:function(){this.__base.apply(this,arguments),this._content=void 0}}),BEM.decl("localstorage",{onSetMod:{js:{inited:function(){this._service=BEM.blocks["i-global"].param("id"),this._enabled=!1;try{if("localStorage"in window){var t="test"+Number(new Date);localStorage.setItem(t,t),localStorage.removeItem(t),this._enabled=!0}}catch(t){window.c&&window.c.hit({dtype:"iweb",path:"/"+BEM.blocks["i-global"].param("project")+"/no-localstorage"})}}}},get:function(t,e){var i;try{if(this._enabled)return null!==(i=localStorage.getItem(this._getItemName(t)))||void 0===e?JSON.parse(i):e}catch(t){}return e||null},set:function(t,e){try{if(this._enabled)return localStorage.setItem(this._getItemName(t),JSON.stringify(e)),!0}catch(t){}return!1},del:function(t){try{this._enabled&&localStorage.removeItem(this._getItemName(t))}catch(t){}},isEnabled:function(){return!0===this._enabled},_getItemName:function(t){return this._service+"."+t}},{getInstance:function(){return this.instance||(this.instance=BEM.create("localstorage"))}}),BEM.DOM.decl("serp-list",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.params.reqid&&Ya.Rum.setSetting("reqid",this.params.reqid)}}}}),BEM.DOM.decl("serp-list",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.trigger("loaded"),window.Ya.Video.loadThumbs&&window.Ya.Video.loadThumbs()}}}}),BEM.DOM.decl("serp-list",{},{getUrls:function(){var t;return $(this.buildSelector()).toArray().reduce(function(e,i){return(t=$(i).bem("serp-list").params.urls)&&t.forEach(function(t){t&&e.push(t)}),e},[])}}),BEM.DOM.decl({block:"serp-list",modName:"type",modVal:"search"},{onSetMod:{js:{inited:function(){var t,e={};this.__base.apply(this,arguments),"favorites"===BEM.blocks["i-global"].param("page")&&(this.findBlocksInside("serp-item").forEach(function(i){t=i.getVideoData(),e[t.url]=t.likeId||null}),BEM.blocks.collections.addLikedUrls(e))}}}}),BEM.DOM.decl("thumbs-load-counter",{getDefaultParams:function(){return{chunks:[6,6,18]}},onSetMod:{js:{inited:function(){var t=this;if(this._loadedThumbs={},this._timeoutes=[],this._isResourceTimingAPIAvaliable()){this._setupSpeedTest(),this._observableImages=this.domElem.find(this.params.imageSelector).get();var e=this._getImagesToBind(this._observableImages);e&&e.forEach(function(e){t._bindToImages(e)})}}}},destruct:function(){this._timeoutes&&this._timeoutes.length&&this._timeoutes.forEach(function(t){clearTimeout(t)}),this._observableImages&&this._observableImages.length&&this._observableImages.forEach(function(t){t.src&&t.complete||$(t).unbind("load.thumbsLoadCounter error.thumbsLoadCounter")}),this.__base.apply(this,arguments)},_getImagesToBind:function(t){if(!t||!t.length)return null;var e,i,n,o=this.params.chunks,s=[],r=0;for(n=0;n<o.length&&(i=r+o[n],(e=t.slice(r,i)).length);n++)s.push(this._getImagesProps(e,r)),r=i;return s},_getImagesProps:function(t,e){return t.map(function(t,i){return{htmlElement:t,pos:i+e}})},_isResourceTimingAPIAvaliable:function(){return window.performance&&(window.performance.getEntries||window.performance.webkitGetEntries)},_setupSpeedTest:function(){var t=window.performance,e=t.setResourceTimingBufferSize?"setResourceTimingBufferSize":"webkitSetResourceTimingBufferSize";return t[e]&&t[e](this.__self.MAX_RESULTS),this},_bindToImages:function(t){var e=t.length,i=this,n=function(){0===--e&&i._timeoutes.push(setTimeout(function(){i._allImagesLoadedHandler(t)},1))};return t.forEach(function(t){var e=t.htmlElement;e.src&&e.complete?n():$(e).bind("load.thumbsLoadCounter error.thumbsLoadCounter",n)}),this},_getEntriesName:function(){return window.performance.getEntries?"getEntries":"webkitGetEntries"},_getImagesTimings:function(t){for(var e,i,n,o,s,r,a,c,l=this._getEntriesName(),h=window.performance[l](),u=BEM.blocks["i-ua"].getConnectionType(),d=[],p=0,f=h.length;p<f;p++)void 0===(c=t[a=(r=h[p]).name])||this._loadedThumbs[a]||(o=-1!==a.indexOf("http://")?"http":"https",n=a.replace(".yandex.net","").replace(o+"://","").split("/"),s=r.startTime,i=r.responseStart||s,e=[Math.floor(s),Math.floor(r.redirectEnd-r.redirectStart),Math.floor(r.domainLookupEnd-r.domainLookupStart),Math.max(Math.floor(r.domainLookupStart-r.fetchStart),0),Math.floor(r.connectEnd-(r.secureConnectionStart||r.connectStart)),Math.floor(r.responseStart-r.requestStart),Math.floor(r.responseEnd-i),Math.floor(r.duration),Math.floor(r.responseEnd),void 0===r.transferSize?-1:Math.floor(r.transferSize),o,encodeURIComponent(n[0]),encodeURIComponent(n[1]),c],u&&e.push(u),d.push(e.join(";")),this._loadedThumbs[a]={pos:c,resource:r});return d},_allImagesLoadedHandler:function(t){var e,i,n={},o=this;t.forEach(function(t){var e=t.htmlElement;i=o._getUrlWithScheme(e.src),n[i]=t.pos,e.srcset&&o._fillUrlMapWithSrcset(n,t.pos,e.srcset)}),(e=this._getImagesTimings(n)).length&&this._sendStats(e)},_getUrlWithScheme:function(t){return/^https?\:/.test(t)||(t=window.location.protocol+t),t},_fillUrlMapWithSrcset:function(t,e,i){var n=this;i.split(",").forEach(function(i){i=i.replace(/^\s+/,"").replace(/\s+.+$/,""),i=n._getUrlWithScheme(i),t[i]=e})},_sendStats:function(t){this.params.counterPath&&(c.cpHitDelayed({pid:197,cid:73307,path:this.params.counterPath,reqid:this.params.reqid,vars:"-info="+t.join("!")},this.domElem),BEM.blocks.counter.debug("thumbs load timings",{path:this.params.counterPath,vars:t}))}},{MAX_RESULTS:450,live:function(){this.liveInitOnBlockInit("related-video"),this.liveInitOnBlockInit("serp-list")}}),BEM.DOM.decl({block:"thumbs-load-counter",modName:"with-viewport-images",modVal:!0},{_isVisible:function(t,e,i){var n=i.getBoundingClientRect();return n.bottom>0&&n.top<e&&n.right>0&&n.left<t},_getVisibleImages:function(){if(this._visibleImages)return this._visibleImages;var t=0;if(this._visibleImages={},this._observableImages&&this._observableImages.length){for(var e=BEM.DOM.win.width(),i=BEM.DOM.win.height(),n=0;n<this._observableImages.length;n++){var o=this._observableImages[n],s=this._isVisible(e,i,o);if(!s&&t>0)break;s&&(this._visibleImages[n]={processed:!1,htmlElement:o},t++)}this._visibleImagesToWait=t,this._maxLoadTime=0}return this._visibleImages},_getImagesTimings:function(){var t=this.__base.apply(this,arguments),e=this._getVisibleImages(),i=this;return this._visibleImagesToWait>0&&Object.keys(e).forEach(function(t){var n=e[t],o=n.htmlElement.currentSrc||n.htmlElement.src;!n.processed&&o&&Ya.Rum.getResourceTimings(o,function(t){if(t&&t[0]&&!n.processed&&i._visibleImagesToWait>0){var e=t[0];n.processed=!0,i._visibleImagesToWait--,e.responseEnd>i._maxLoadTime&&(i._maxLoadTime=e.responseEnd),0===i._visibleImagesToWait&&i._sendViewportImagesCounter()}})}),t},_sendViewportImagesCounter:function(){var t=BEM.blocks["i-global"].param(this.params.ajaxTimeProperty)||0,e=Math.floor(this._maxLoadTime-t);this.params.ajax&&!t||e>0&&Ya.Rum.sendTimeMark(this.params.viewportCounter,e,!1)}}),BEM.DOM.declMix("has-video-data",{getVideoData:function(){return this._videoData||(this._videoData=this.domElem.data("video")),this._videoData}}),BEM.DOM.decl("serp-item",{onSetMod:{selected:{yes:function(){this.delMod("hovered"),this.__self.delSelected()}}},saveCurrent:function(){return this.__self.prev=this.__self.getCurrent(),this.__self.setCurrent(this),this}},{getCurrent:function(){return this.current&&!this.current._isDestructing?this.current:void 0},getPrev:function(){return this.prev&&!this.prev._isDestructing?this.prev:void 0},setCurrent:function(t){this.current=t},clearCurrent:function(){this.setCurrent(null)},delSelected:function(){return this.getCurrent()&&this.getCurrent().delMod("selected"),this},getParams:function(t){var e=$("#"+t).data("bem");return e?e["serp-item"]:void 0},current:null,prev:null}),BEM.DOM.decl("serp-item",{onSetMod:{hovered:{yes:function(){return this.canHover()}}},canHover:function(){return!this.hasMod("selected","yes")},_onClick:function(t){BEM.blocks["i-global"].param("isPumpkin")&&"index"===BEM.blocks["i-global"].param("page")||(this.click("mouse"),t.preventDefault())},click:function(t,e){return this.eventSource=t,this.eventParams=e,BEM.blocks["serp-item"].delSelected(),this.select().saveCurrent().trigger("clicked",this),this},select:function(){return this.setMod("selected","yes"),this}},{live:function(){this.__base.apply(this,arguments),this.liveInitOnEvent("mousemove")}}),BEM.DOM.decl("serp-item",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindTo("pointermove",this._onPointerMove),this.bindTo("pointerleave",this._onPointerLeave)}}},destruct:function(){this.unbindFrom("pointermove",this._onPointerMove),this.unbindFrom("pointerleave",this._onPointerLeave),this.__base.apply(this,arguments)},_onPointerMove:function(){this.setMod("hovered","yes")},_onPointerLeave:function(){this.delMod("hovered")}}),BEM.DOM.decl({block:"serp-item",baseMix:["has-video-data"]},{onSetMod:{disliked:{yes:function(){this.trigger("dislike",this._itemDataParams.id)}}},getOffsetTop:function(){return this.domElem[0].offsetTop},getHeight:function(){return this.domElem.height()},getPosInsideList:function(){return this.domElem.parent().children(".serp-item").index(this.domElem)},getPageNum:function(){return this.domElem.parent().bem("serp-list").params.pageNum},saveCurrent:function(){var t=this.hasMod("type","related")?BEM.blocks["current-item-params"].TYPES.RELATED:BEM.blocks["current-item-params"].TYPES.SERP;return BEM.blocks["current-item-params"].set(this.getVideoData(),t),this.__base.apply(this,arguments)},isExists:function(){return Boolean(this.domElem)},_isInternal:function(){return this.hasMod("type","internal")||this.hasMod("type","display-options")}},{live:function(){this.liveBindTo("partner-label-link","pointerclick",function(t){t.stopPropagation()}).liveBindTo("asterisk-partner-label","pointerclick",function(t){t.stopPropagation()})},getCurrentParams:function(){return this.current&&this.current.params},getFirstPlayable:function(){var t=$([this.buildSelector(),":not(",this.buildSelector("visibility","hidden"),")",":not(",this.buildSelector("type","related"),")",":not(",this.buildSelector("type","internal"),")",":not(",this.buildSelector("type","display-options"),")",":eq(0)"].join(""));return t.length?t.bem(this.getName()):void 0}}),BEM.DOM.decl("serp-item",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._isInternal()||(this._itemDataParams=this.getVideoData())}},outlined:{yes:function(){this.__self._hoverDisabled||(this.__self._hoverDisabled=!0,this.__self.delMod("hovered","yes"))}},canHover:function(){return!this.__self._hoverDisabled&&this.__base()}},destruct:function(){this.__base.apply(this,arguments)},select:function(){return this},_onClick:function(t){if(!this._isInternal()){var e=BEM.blocks.utils.get(this._itemDataParams,"counters.empty");this._itemDataParams.selectEvent="click",this.click("mouse",{event:t}),e&&cp(e.stredParams,e.postfix,this,!0),BEM.blocks.utils.get(this._itemDataParams,"counters.commercial")&&w(null,this._itemDataParams.counters.commercial[0],this.params.counters.commercial[1])}},_onComplainClick:function(){BEM.channel("feedback").trigger("show",{url:this._itemDataParams.url,abuseLink:BEM.blocks["i-global"].param("abuseLink")})},_onDeleteClick:function(){this.trigger("delete")},_setTitleToElement:function(t){if(!t.attr("title")){var e=t[0],i=t.text();(e.offsetWidth<e.scrollWidth||e.offsetHeight<e.scrollHeight)&&t.attr("title",i)}}},{getVisibleItems:function(t,e,i){var n=$(this.buildSelector("visibility",i?"hidden":"visible"),t);return e?n.filter(":lt("+e+")"):n},getInvisibleItems:function(t,e){return this.getVisibleItems(t,e,!0)},showItems:function(t,e){return this.getInvisibleItems(t,e).addClass(this.buildSelector("visibility","visible").slice(1)).removeClass(this.buildSelector("visibility","hidden").slice(1))},delMod:function(t,e){var i=this.buildSelector(t,e),n=this.getName();$(i).each(function(){$(this).bem(n).delMod(t)})},live:function(){var t=this.__base.apply(this,arguments);return this.liveBindTo("title text","mouseover",function(t){var e=t.data.domElem;this._setTitleToElement(e)}).liveBindTo("pointerclick",function(t){t.preventDefault(),this.hasMod("with-player")&&this.hasMod("has-player")||this._onClick(t)}).liveBindTo("snippet","pointerclick",function(t){t.preventDefault(),t.stopPropagation(),this._onClick(t)}).liveBindTo("action-delete","pointerclick",function(t){t.stopPropagation(),this._onDeleteClick(t)}).liveBindTo("complain-notable","pointerclick",function(t){t.stopPropagation(),this._onComplainClick()}).liveBindTo("channel","pointerclick",function(t){t.stopPropagation()}).liveBindTo("kebab","pointerclick",function(t){t.stopPropagation()}).liveBindTo("host","pointerclick",function(t){var e=this.elem("host");this.hasMod(e,"disable","yes")||e[0]===t.target?this._onClick(t):t.stopPropagation()}),this.win.bind("mousemove",$.throttle(this._onWinMouseMove,100,this)),t},_onWinMouseMove:function(t){var e=t.clientX+"_"+t.clientY;e!==this._XY&&(this._XY=e,this.delMod("outlined","yes"),this._hoverDisabled=!1)},count:function(t,e){return $(this.buildSelector(t,e)).length}}),BEM.DOM.decl({block:"serp-url",modName:"favicon",modVal:"yes"},{onSetMod:{js:{inited:function(){var t=this.domElem.find(this.params.faviconSelector||".serp-item__favicon"),e=new Image;e.onload=function(){1===e.width&&1===e.height&&t.hide()},t.data("favicon")?e.src=t.data("favicon"):t.hide()}}}}),BEM.DOM.decl("favicon",{update:function(t){this.domElem.css("background-image","url(${ src })".replace("${ src }",t))}},{live:!0}),BEM.DOM.decl("current-item-params",{},{TYPES:{SERP:"serp",RELATED:"related",COPY:"copy"},_current:{serp:null,related:null,copy:null},_currentType:"serp",set:function(t,e){t.type=e,this._currentType=e,this._current[e]=t,e===this.TYPES.SERP&&(this._current[this.TYPES.RELATED]=null,this._current[this.TYPES.COPY]=null)},get:function(t){return this._current[t||this._currentType]},clear:function(){for(var t in this._current)this._current.hasOwnProperty(t)&&(this._current[t]=null);this._currentType=this.TYPES.SERP}}),BEM.DOM.decl("partner-show-pixel",{onSetMod:{js:{inited:function(){this.afterCurrentEvent(function(){BEM.blocks["scroll-spy"].notifyBecameVisible(this.domElem,this._onBecameVisible,this)})}}},_onBecameVisible:function(){BEM.blocks["b-statcounter"].params(this.params.metrikaParams),this.params.pixels&&(Array.isArray(this.params.pixels)?this.params.pixels:[this.params.pixels]).forEach(function(t){BEM.blocks.pixel.sendPixel(t)})},destruct:function(){BEM.blocks["scroll-spy"].stopWatchingVisibility(this.domElem),this.__base.apply(this,arguments)}}),BEM.decl("pixel",{},{_isCounterDebug:function(){return BEM.blocks["i-global"].param("counterDebug")},sendPixel:function(t){t=t+(t.indexOf("?")>-1?"&":"?")+"rnd="+BEM.blocks.utils.getRnd(2),BEM.blocks.counter.debug("pixel",t),(new Image).src=t}}),BEM.DOM.decl("thumb-preview",{_setCurrent:function(t){return this.__self._current=t,this}},{live:function(){BEM.blocks["b-page"]&&BEM.blocks["b-page"].on("blur",this.stop,this)},getCurrent:function(){return this._current},stop:function(){this._current&&this._current.delMod("active")}}),BEM.DOM.decl("thumb-preview",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindTo("pointerleave",function(){window.cancelAnimationFrame&&window.cancelAnimationFrame(this._pointerFrame),this.delMod("active")})}}},_sendHoverCounter:function(){var t=encodeURIComponent(this.params.url);cp({cid:73001,path:"thumbs-preview.hover",vars:"-url="+t})},startFrame:function(){this.hasMod("active","yes")||this.hasMod("disabled","yes")||this._sendHoverCounter(),this.setMod("active","yes")}},{live:function(){this.__base(),this.liveBindTo("pointerover",function(){window.requestAnimationFrame?this._pointerFrame=window.requestAnimationFrame(this.startFrame.bind(this)):this.startFrame()})}}),BEM.decl({block:"thumb-preview",modName:"video",modVal:!0},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),BEM.DOM.append(this.elem("target"),this.__self._getBemHtml()),this._isIOS=Boolean(navigator.platform)&&/iPad|iPhone|iPod/.test(navigator.platform),this._isIOS10=Boolean(navigator.userAgent)&&-1!==navigator.userAgent.indexOf("iPhone OS 10_"),this._retries=0,this._initAnimationFrameAPI()}},active:{yes:function(){var t=this._getCurrent();this._activeStartTime=Date.now(),t&&t!==this&&t.delMod("active"),this._setCurrent(this),this._start()},"":function(){this.stop()}}},destruct:function(){var t=this._getCurrent();clearTimeout(this._startTimer),this._cancelAnimationFrame&&this._cancelAnimationFrame(this._startFrame),t===this&&(t.stop(),t._setCurrent(null)),this.__base.apply(this,arguments)},_initAnimationFrameAPI:function(){this._requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.msCancelAnimationFrame,this._requestAnimationFrame=this._requestAnimationFrame&&this._requestAnimationFrame.bind(window),this._cancelAnimationFrame=this._cancelAnimationFrame&&this._cancelAnimationFrame.bind(window)},_start:function(){if(!this.hasMod("active","yes")&&!this.hasMod("disabled",!0)){var t=!this._isIOS||this._isIOS&&this._notFirstTime;this._requestAnimationFrame&&this._cancelAnimationFrame&&t&&-1===navigator.userAgent.indexOf("Trident")?(this._cancelAnimationFrame(this._startFrame),this._startFrame=this._requestAnimationFrame(function(){this._startAnimationFrame()}.bind(this))):(this._notFirstTime=!0,this._startAnimationFrame())}},_startAnimationFrame:function(){var t;this._addPlayer(),this._player&&(void 0!==(t=this._player[0].play())&&(this._isIOS10&&t.then(function(){this._player[0].pause(),this._player[0].play()}.bind(this)),t.catch(this._onPlayError.bind(this))),this.trigger("start"))},stop:function(){this.delMod("active"),this._playing&&this._player&&(this._player[0].pause(),this._player[0].readyState>0&&(this._player[0].currentTime=0),this.delMod(this.elem("target"),"playing"),delete this._playing),this.trigger("stop")},_addPlayer:function(){var t=this.params.preview,e={};if(t){e.src=t.url,e.type=t.type,this._player||(this._player=this.__self._getPlayer()),this._player.attr(e);var i=this.findElem("target");i.length&&BEM.DOM.prepend(i,this._player)}},_onError:$.noop,_onPlay:function(){this._playing=!0,this.delMod(this.elem("target"),"loading"),this.setMod(this.elem("target"),"playing",!0),this._retries=0,this.trigger("play")},_onEnded:function(){this.stop(),this.trigger("end")},_onWait:function(){this.setMod(this.elem("target"),"loading",!0)},_onPlayError:function(t){this._isDestructing||(this.delMod(this.elem("target"),"loading"),this.delMod("active"),this._onPlayErrorCallback(t))},_getPlayerError:function(){return this._player&&this._player[0]&&this._player[0].error},_isNotSupportedError:function(){var t=this._getPlayerError();return Boolean(t&&t.code===MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED)},_onPlayErrorCallback:function(){this.__base.apply(this,arguments),this._isNotSupportedError()&&this._retries<this.__self.MAX_RETRIES&&(this.params.preview.url=this._getUrlWithTimestamp(this.params.preview.url),this._retries+=1,this.setMod("active","yes"))},_getUrlWithTimestamp:function(t){if("string"==typeof t){var e=t.indexOf("?")<0?"?":"&";return[t,"t="+Date.now()].join(e)}},_getCurrent:function(){return this.__self.getCurrent()},start:function(){this._isActive||this.hasMod("disabled",!0)||(clearTimeout(this._startTimer),this._startTimer=setTimeout(function(){this.setMod("active","yes")}.bind(this),this.params.startDelay))}},{MAX_RETRIES:3,_getBemHtml:function(){if(!this._videoBemHtml){this._videoBemHtml=document.createElement("div"),this._videoBemHtml.className=BEM.INTERNAL.buildClass(this.getName(),"loader");var t=document.createElement("div");t.className=BEM.INTERNAL.buildClasses("spin2",{progress:"yes",size:"xxs"}),this._videoBemHtml.appendChild(t)}return this._videoBemHtml},_getPlayer:function(){if(!this._player){var t=document.createElement("video"),e={autoplay:"autoplay",muted:"muted","x-yandex-pip":"false","x-webkit-airplay":"deny",playsinline:"playsinline",poster:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"};t.className=BEM.INTERNAL.buildClass(this.getName(),"video"),t.muted="muted",Object.keys(e).forEach(function(i){t.setAttribute(i,e[i])}),this._player=BEM.DOM.append(BEM.DOM.scope,t),["Ended","Playing","Waiting","Error"].forEach(this._addEvent.bind(this))}return this._player},_addEvent:function(t){this._player&&this._player[0].addEventListener(t.toLowerCase(),function(){this._current&&this["_on"+t]()}.bind(this))},_onEnded:function(){this._current._onEnded()},_onPlaying:function(){this._current._onPlay()},_onWaiting:function(){this._current._onWait()},_onError:function(){this._current._onError()}}),BEM.decl({block:"thumb-preview",modName:"video",modVal:!0},{_onPlay:function(){var t,e=encodeURIComponent(this.params.url);this._activeStartTime&&(t=Date.now()-this._activeStartTime,cp({cid:73001,path:"thumbs-preview.animation",vars:"-delay="+t+",-type=video,-url="+e})),this._activeStartTime=0,this.__base.apply(this,arguments)},_shouldSendPreviewErrorCounter:function(){var t=this._isNotSupportedError();return!t||t&&this._retries===this.__self.MAX_RETRIES},_onError:function(){var t=encodeURIComponent(this.params.url);this._activeStartTime=0,this._shouldSendPreviewErrorCounter()&&cp({cid:73001,path:"thumbs-preview.error",vars:"-url="+t+",-videoUrl="+encodeURIComponent(this.params.preview.url)}),this.__base.apply(this,arguments)}}),BEM.decl({block:"thumb-preview",modName:"video",modVal:!0},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindTo("pointerleave",function(){this.delMod("active")})}}}}),function(){var t={};t.exports=function(t){return t?t.replace(/[^\w-]/g,function(t){switch(t){case"/":return"_slash_";case"\\":return"_backslash_";case"+":return"_plus_";default:return"_"+t.charCodeAt(0)+"_"}}):t},BEM.blocks.utils.escapeClassName=t.exports}(),BEM.DOM.decl("serp-item",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.findBlocks().bindEvents()}}},findBlocks:function(){return this.__base.apply(this,arguments),this._popup=this._getDropdown(),this._popup&&(this._quasar=this._popup.findBlockInside("quasar-control"),this._abuse=this._popup.findBlockInside("abuse-link")),this},bindEvents:function(){return this._quasar&&this._quasar.bindTo("pointerclick",this._onQuasarClick.bind(this)),this._abuse&&this._abuse.bindTo("pointerclick",this._onComplainClick.bind(this)),this},_getDropdown:function(){return this._popup||(this._popup=this.findBlockInside("dropdown2"))},_onQuasarClick:function(t){this._onPlayOnClick&&"function"==typeof this._onPlayOnClick&&this._onPlayOnClick(t,this._quasar)}}),BEM.DOM.decl("dropdown2",{onSetMod:{js:{inited:function(){this._switcher=null,this._popup=null}},opened:{yes:function(){if(this.hasMod("disabled"))return!1;this.trigger("beforeOpen").getPopup().setAnchor(this.getSwitcher()).setMod("visible","yes").on("beforeClose",this._onPopupBeforeClose,this)},"":function(){this.trigger("beforeClose").getPopup().delMod("visible").un("beforeClose",this._onPopupBeforeClose,this)}},disabled:{"*":function(t,e){this.getSwitcher().setMod(t,e)},yes:function(){this.delMod("opened")}}},getPopup:function(){return this._popup||(this._popup=this.findBlockInside("popup2")),this._popup},getSwitcher:function(){return this._switcher||(this._switcher=this.findBlockInside(this.getMod("switcher"))),this._switcher},_onPopupBeforeClose:function(){this.delMod("opened")},_onSwitcherClick:function(t){this._switcher||(this._switcher=t.block),this.toggleMod("opened","yes")}},{live:!0}),BEM.DOM.decl("popup2",{onSetMod:{js:{inited:function(){this._parentPopup=void 0,this._zIndex=null,this._zIndexGroupLevel=null,this._scope=BEM.DOM.scope,this._isAttachedToScope=!1}},visible:{yes:function(){this.trigger("beforeOpen"),this._makeEventOnAnimationEnd("Open"),this._isAttachedToScope||(this._scope.append(this.domElem),this._isAttachedToScope=!0),this._captureZIndex()._bindToParentPopup().bindTo("pointerdown pointerclick",this._setPreventHideByClick)},"":function(){this.trigger("beforeClose")._releaseZIndex()._unbindFromParentPopup().unbindFrom("pointerdown pointerclick"),this._makeEventOnAnimationEnd("Close")}}},destruct:function(){this.delMod("visible"),this.__base.apply(this,arguments)},setScope:function(t){return this._scope=t,this._isAttachedToScope=!1,this},setContent:function(t){return BEM.DOM.update(this.domElem,t),this},_calcZIndexGroupLevel:function(){var t=this.params.zIndexGroupLevel,e=this._getParentPopup();return e&&(t+=e._zIndexGroupLevel),t},_setPreventHideByClick:function(){var t=this;do{t._preventHideByClick=!0,t=t._getParentPopup()}while(t)},_bindToParentPopup:function(){var t=this._getParentPopup();return t&&t.on("beforeClose",this._onParentPopupClose,this),this},_unbindFromParentPopup:function(){return this._parentPopup&&this._parentPopup.un("beforeClose",this._onParentPopupClose,this),this._parentPopup=void 0,this},_onParentPopupClose:function(){this.delMod("visible")},_getParentPopup:function(){return this._parentPopup},_captureZIndex:function(){null===this._zIndexGroupLevel&&(this._zIndexGroupLevel=this._calcZIndexGroupLevel());var t=this.__self._visiblePopupsZIndexes,e=this._zIndexGroupLevel,i=t[e],n=this._zIndex;return i||(i=t[e]=[(e+1)*this.__self.ZINDEX_FACTOR]),this._zIndex=i[i.length-1]+1,i.push(this._zIndex),this._zIndex!==n&&this.domElem.css("z-index",this._zIndex),this},_releaseZIndex:function(){var t=this.__self._visiblePopupsZIndexes[this._zIndexGroupLevel];return t&&t.splice(t.indexOf(this._zIndex),1),this},_recaptureZIndex:function(){return this._releaseZIndex(),this._zIndexGroupLevel=null,this._captureZIndex()},getDefaultParams:function(){return{zIndexGroupLevel:0}},_makeEventOnAnimationEnd:function(t){var e=this.domElem,i=window.getComputedStyle?window.getComputedStyle(e[0]):e[0].currentStyle,n=parseFloat(i.animationDuration)>0?"animationend":parseFloat(i.webkitAnimationDuration)>0?"webkitAnimationEnd":"",o=function(){this.trigger("after"+t)};n?e.one(n,o.bind(this)):this.afterCurrentEvent(o)}},{live:!0,_visiblePopupsZIndexes:{},ZINDEX_FACTOR:1e3}),BEM.DOM.decl("popup2",{attachToScope:function(t){return t&&(this._scope=t),this._scope.append(this.domElem),this._isAttachedToScope=!0,this}}),BEM.DOM.decl("popup2",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._bindEvents()}}},_bindEvents:function(){return this.redraw&&(BEM.channel("atom").on("stripe-show",this._onDaasChanged,this),BEM.channel("atom").on("stripe-hide",this._onDaasChanged,this)),BEM.blocks["b-page"].on("load:start",this._onPageChange,this),this.__base.apply(this,arguments)},destruct:function(){this.redraw&&(BEM.channel("atom").un("stripe-show",this._onDaasChanged,this),BEM.channel("atom").un("stripe-hide",this._onDaasChanged,this)),BEM.blocks["b-page"].un("load:start",this._onPageChange,this),this.__base.apply(this,arguments)},_onPageChange:function(){this.delMod("visible")},_onDaasChanged:function(){this.redraw()}}),BEM.DOM.decl({block:"popup2",modName:"target"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._lastPopupDrawingCss={left:void 0,top:void 0,zIndex:void 0,display:void 0},this._lastTailDrawingCss={left:void 0,top:void 0},this._initialVisible=this.hasMod("visible")}},visible:{yes:function(){this.__base.apply(this,arguments),this.bindToWin("scroll resize",this._onWinScrollAndResize).redraw(!0)},"":function(){this.__base.apply(this,arguments),this.unbindFromWin("scroll resize")}}},setContent:function(){return this.__base.apply(this,arguments).redraw()},_draw:function(){var t=this._calcBestDrawingParams();return this.setMod("direction",t.direction),e(this._lastPopupDrawingCss,this._calcDrawingCss(t))&&this.domElem.css(this._lastPopupDrawingCss),e(this._lastTailDrawingCss,this._calcTailDrawingCss(t))&&this.elem("tail").css(this._lastTailDrawingCss),this;function e(t,e){var i=!1;return Object.keys(e).forEach(function(n){var o=e[n];t[n]!==o&&(t[n]=o,i=!0)}),i}},redraw:function(t){return this.hasMod("visible","yes")||t?(this.setMod("outside","yes")._draw().delMod("outside"),this):this},_calcDrawingCss:function(t){var e,i=this._scope;return i.is(BEM.DOM.scope)||(e=i.offset(),t.top-=e.top,t.left-=e.left),{left:t.left,top:t.top}},_calcTailDrawingCss:function(t){return t.tail},calcPossibleDrawingParams:function(){var t=this._calcTargetDimensions(),e=this._calcViewportDimensions(),i=this._calcOffsets();return this.params.directions.map(function(n){var o={direction:n,width:0,height:0,left:0,top:0};return this._checkMainDirection(n,"bottom")?(o.top=t.top+t.height+i.main,o.height=e.bottom-o.top-i.viewport):this._checkMainDirection(n,"top")?(o.height=t.top-e.top-i.main-i.viewport,o.top=t.top-o.height-i.main):(this._checkSecondaryDirection(n,"center")?(o.height=e.bottom-e.top-2*i.viewport,o.top=t.top+(t.height-o.height)/2):this._checkSecondaryDirection(n,"bottom")?(o.height=t.top+t.height-e.top-i.secondary-i.viewport,o.top=t.top+t.height-o.height-i.secondary):this._checkSecondaryDirection(n,"top")&&(o.top=t.top+i.secondary,o.height=e.bottom-o.top-i.viewport),this._checkMainDirection(n,"left")?(o.width=t.left-e.left-i.main-i.viewport,o.left=t.left-o.width-i.main):(o.left=t.left+t.width+i.main,o.width=e.right-o.left-i.viewport)),this._checkSecondaryDirection(n,"right")?(o.width=t.left+t.width-e.left-i.secondary-i.viewport,o.left=t.left+t.width-o.width-i.secondary):this._checkSecondaryDirection(n,"left")?(o.left=t.left+i.secondary,o.width=e.right-o.left-i.viewport):this._checkSecondaryDirection(n,"center")&&this._checkMainDirection(n,"top","bottom")&&(o.width=e.right-e.left-2*i.viewport,o.left=t.left+t.width/2-o.width/2),o},this)},_calcBestDrawingParams:function(){for(var t,e,i,n,o,s,r=this._calcPopupDimensions(),a=this._calcTargetDimensions(),c=this._calcViewportDimensions(),l=this.params.directions,h=l.length,u=0;u<h&&(t=l[u],e=this._calcPos(t,a,r),i=this._calcViewportFactor(e,c,r),(0===u||i>s||!s&&this.hasMod("direction",t))&&(n=t,s=i,o=e),!(s>this.__self.VIEWPORT_ACCURACY_FACTOR));u++);return{direction:n,left:o.left,top:o.top,tail:this._calcTailPos(n,a,r,o)}},_calcPopupDimensions:function(){var t=this.domElem.outerWidth(),e=this.domElem.outerHeight();return{width:t,height:e,innerWidth:this.domElem.innerWidth(),innerHeight:this.domElem.innerHeight(),area:t*e}},_calcTailDimension:function(){var t=this.elem("tail"),e=this.params.tailSize||t.outerWidth();return t.length>0?e:0},_calcTargetDimensions:function(){},_calcViewportDimensions:function(){var t=BEM.DOM.win,e=t.scrollTop(),i=t.scrollLeft(),n=t.width();return{top:e,left:i,bottom:e+t.height(),right:i+n}},_calcPos:function(t,e,i){var n={},o=this._calcOffsets();return this._checkMainDirection(t,"bottom")?n.top=e.top+e.height+o.main:this._checkMainDirection(t,"top")?n.top=e.top-i.height-o.main:this._checkMainDirection(t,"left")?n.left=e.left-i.width-o.main:this._checkMainDirection(t,"right")&&(n.left=e.left+e.width+o.main),this._checkSecondaryDirection(t,"right")?n.left=e.left+e.width-i.width-o.secondary:this._checkSecondaryDirection(t,"left")?n.left=e.left+o.secondary:this._checkSecondaryDirection(t,"bottom")?n.top=e.top+e.height-i.height-o.secondary:this._checkSecondaryDirection(t,"top")?n.top=e.top+o.secondary:this._checkSecondaryDirection(t,"center")&&(this._checkMainDirection(t,"top","bottom")?n.left=e.left+e.width/2-i.width/2:this._checkMainDirection(t,"left","right")&&(n.top=e.top+e.height/2-i.height/2)),n},_calcTailPos:function(t,e,i,n){var o={},s=this._calcTailDimension()/2,r=this.params.tailOffset,a=this.params.tailSize;return this._checkMainDirection(t,"bottom")?o.top=-s:this._checkMainDirection(t,"top")?o.top=Math.floor(i.innerHeight-s):this._checkMainDirection(t,"left")?o.left=Math.floor(i.innerWidth-s):this._checkMainDirection(t,"right")&&(o.left=-s),this._checkSecondaryDirection(t,"right")?o.left=i.innerWidth-Math.ceil(Math.min(i.innerWidth,e.width)/2)-s-r:this._checkSecondaryDirection(t,"left")?o.left=Math.ceil(Math.min(i.innerWidth,e.width)/2)-s+r:this._checkSecondaryDirection(t,"bottom")?o.top=i.innerHeight-Math.ceil(Math.min(i.innerHeight,e.height)/2)-s-r:this._checkSecondaryDirection(t,"top")?o.top=Math.ceil(Math.min(i.innerHeight,e.height)/2)-s+r:this._checkSecondaryDirection(t,"center")&&(this._checkMainDirection(t,"top","bottom")?o.left=Math.ceil(i.innerWidth/2)-s+r:o.top=Math.ceil(i.innerHeight/2)-s+r),{top:o.top,left:o.left,width:a,height:a}},_calcViewportFactor:function(t,e,i){var n=this.params.viewportOffset,o=Math.max(t.left,e.left+n),s=Math.min(t.left+i.width,e.right-n),r=Math.max(t.top,e.top+n),a=Math.min(t.top+i.height,e.bottom-n);return o<s&&r<a?(s-o)*(a-r)/i.area:0},_calcOffsets:function(){var t=this.params,e=this._calcTailDimension();return{main:t.mainOffset>=0&&e>0?Math.max(t.mainOffset,Math.round(e*Math.SQRT1_2)):t.mainOffset,secondary:t.secondaryOffset,viewport:t.viewportOffset}},_checkMainDirection:function(t,e,i){return 0===t.indexOf(e)||i&&0===t.indexOf(i)},_checkSecondaryDirection:function(t,e){return t.indexOf("-"+e)>0},_checkDirection:function(t,e){return t.indexOf(e)>=0},_onWinScollAndResize:function(t){this._onWinScrollAndResize(t)},_onWinScrollAndResize:function(t){this.hasMod("visible","yes")&&this._draw()},getDefaultParams:function(){return $.extend(this.__base.apply(this,arguments),{mainOffset:0,secondaryOffset:0,viewportOffset:0,tailOffset:0,directions:this.__self.AVAILABLE_DIRECTIONS})},_setVisible:function(){this._initialVisible&&(this._initialVisible=!1,this.delMod("visible").setMod("visible","yes"))}},{VIEWPORT_ACCURACY_FACTOR:.99,AVAILABLE_DIRECTIONS:["bottom-left","bottom-center","bottom-right","top-left","top-center","top-right","right-top","right-center","right-bottom","left-top","left-center","left-bottom"]}),BEM.DOM.decl({block:"popup2",modName:"theme",modVal:"normal"},{getDefaultParams:function(){return $.extend(this.__base(),{mainOffset:5,viewportOffset:5})}}),BEM.DOM.decl({block:"popup2",modName:"autoclosable",modVal:"yes"},{onSetMod:{visible:{yes:function(){this.__self._visiblePopupsStack.unshift(this),this.afterCurrentEvent(function(){this.domElem&&this.hasMod("visible")&&this.bindToDoc("pointerclick",this._onDocClick)}),this.__base.apply(this,arguments)},"":function(){var t=this.__self._visiblePopupsStack;t.splice(t.indexOf(this),1),this.unbindFromDoc("pointerclick").__base.apply(this,arguments)}}},_onDocClick:function(t){this.hasMod("target","anchor")&&(this._anchor[0]===t.target||this._anchor.find(t.target).length>0)||(this._preventHideByClick?this._preventHideByClick=null:this.delMod("visible"))}},{live:function(){return BEM.DOM.doc.on("keydown",this._onDocKeyPress.bind(this)),this.__base()},_visiblePopupsStack:[],_onDocKeyPress:function(t){BEM.blocks.keycodes.is(t.keyCode,"ESC")&&this._visiblePopupsStack.length&&this._visiblePopupsStack[0].delMod("visible")}}),BEM.DOM.decl({block:"popup2",modName:"autoclosable",modVal:"yes"},{_onDocClick:function(t){if(!this.hasMod("fixed","yes")||!(this._anchor[0]===t.target||this._anchor.find(t.target).length>0))return this.__base.apply(this,arguments)}}),function(t){BEM.DOM.decl({block:"popup2",modName:"target",modVal:"anchor"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._anchor=null,this._destructor=null,this._fixedAnchor=void 0}},visible:{yes:function(){this.bindToDoc("documentchange",this._onWinScrollAndResize),this.__base.apply(this,arguments)},"":function(){this.__base.apply(this,arguments),this.unbindFromDoc("documentchange")}}},destruct:function(){this._unbindFromDestructor(),this.__base.apply(this,arguments)},setAnchor:function(t){var e,i;return this._unbindFromDestructor()._unbindFromParentPopup(),this._anchor=t instanceof BEM.DOM?t.domElem:t,this._destructor=(e=this._anchor,i="_"+this.__self.getName()+"-destructor",e.addClass("i-bem "+i).bem(i)),this._fixedAnchor=void 0,this._bindToDestructor(),this._setVisible(),this.hasMod("visible")?this._recaptureZIndex()._bindToParentPopup().redraw():this._zIndexGroupLevel=null,this},_calcTargetDimensions:function(){var t=this._anchor,e=this._getOffsetOf(t);return{left:e.left,top:e.top,width:t.outerWidth(),height:t.outerHeight()}},_getOffsetOf:function(t){var e=t.offset();return"pageYOffset"in window&&(e.top-=window.pageYOffset-(document.documentElement.scrollTop||document.body.scrollTop),e.left-=window.pageXOffset-(document.documentElement.scrollLeft||document.body.scrollLeft)),e},_calcDrawingCss:function(e){var i=this.__base.apply(this,arguments);if(void 0===this._fixedAnchor&&(this._fixedAnchor=this._getFirstFixedParent(this._anchor)),this._fixedAnchor){var n=0,o=0,s=this._getFirstFixedParent(this._scope);if(s){var r=s.offset();n=r.left,o=r.top}i.left-=t(window).scrollLeft()-n,i.top-=t(window).scrollTop()-o}return t.extend(i,{position:this._fixedAnchor?"fixed":""})},_getFirstFixedParent:function(e){for(e=e[0];e;){if(1===e.nodeType&&"fixed"===t(e).css("position"))return t(e);e=e.parentNode}return null},_calcZIndexGroupLevel:function(){var t=this.__base.apply(this,arguments);return this._destructor.findBlocksOutside("z-index-group").reduce(function(t,e){return t+Number(e.getMod("level"))},t)},_bindToDestructor:function(){return this._destructor.on("destruct",this._onPopupAnchorDestruct,this),this},_unbindFromDestructor:function(){return this._destructor&&this._destructor.un("destruct",this._onPopupAnchorDestruct,this),this},_onPopupAnchorDestruct:function(){this.domElem&&BEM.DOM.destruct(this.domElem)},_getParentPopup:function(){if(void 0===this._parentPopup){var t=this._anchor.closest(".popup2");this._parentPopup=this.findBlockOn(t,this.__self.getName())}return this._parentPopup}}),BEM.DOM.decl("_popup2-destructor",{destruct:function(){this.trigger("destruct"),this.__base.apply(this,arguments)}})}(jQuery),BEM.DOM.decl({block:"popup2",modName:"target",modVal:"anchor"},{syncVisible:function(){this._updateIsAnchorVisible()}}),$.extend({debounce:function(t,e,i,n){var o,s=function(){var s=arguments;n=n||this,i&&!o&&t.apply(n,s),clearTimeout(o),o=setTimeout(function(){i||t.apply(n,s),o=null},e)};return 3===arguments.length&&"boolean"!=typeof i&&(n=i,i=!1),s.stop=function(){clearTimeout(o),o=null},s},throttle:function(t,e,i){var n,o,s,r=function(){o=arguments,s=!0,i=i||this,n||function(){s?(t.apply(i,o),s=!1,n=setTimeout(arguments.callee,e)):n=null}()};return r.stop=function(){clearTimeout(n),n=null},r}}),BEM.DOM.decl({block:"popup2",modName:"hiding",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._anchorParents=null,this._isAnchorVisible=void 0,this._updateIsAnchorVisible=$.throttle(this._updateIsAnchorVisible,this.__self.UPDATE_TARGET_VISIBILITY_THROTTLING_INTERVAL,this)}},visible:{yes:function(){this._anchorParents=this._getAnchorParents(),this._bindToAnchorParents(),this.__base.apply(this,arguments)},"":function(){this.__base.apply(this,arguments),this._updateIsAnchorVisible.stop(),this._unbindFromAnchorParents(),this._anchorParents=null,this._isAnchorVisible=void 0}}},_getAnchorParents:function(){for(var t,e=this;e&&e._anchor;)t=e,e=e._getParentPopup();return $(t._anchor).parents()},setAnchor:function(t){return this.__base.apply(this,arguments),this._unbindFromAnchorParents(),this._isAnchorVisible=void 0,this.hasMod("visible")?(this._anchorParents=this._getAnchorParents(),this._bindToAnchorParents()):this._anchorParents=null,this},_unbindFromDestructor:function(){return this._updateIsAnchorVisible.stop&&this._updateIsAnchorVisible.stop(),this.__base.apply(this,arguments)},_calcDrawingCss:function(t){var e=this.__base.apply(this,arguments);return void 0===this._isAnchorVisible&&(this._isAnchorVisible=this._calcIsAnchorVisible()),$.extend(e,{display:this._isAnchorVisible?"":"none"})},_calcIsAnchorVisible:function(){var t=!0;return this._anchorParents.each(function(e,i){if("BODY"===i.tagName)return!1;i=$(i);var n=/scroll|hidden|auto/,o=n.test(i.css("overflow-y")),s=n.test(i.css("overflow-x"));if(o||s){var r=this._getOffsetOf(i),a=Math.floor(r.top),c=this._anchor,l=this._getOffsetOf(c),h=this.getMod("direction"),u=Math.floor(this._checkDirection(h,"top")?l.top:l.top+c.outerHeight());if(u<a||a+i.outerHeight()<u)return t=!1,!1;var d=Math.floor(this._checkDirection(h,"left")?l.left:l.left+c.outerWidth()),p=Math.floor(r.left);return t=d>=p&&p+i.outerWidth()>=d}}.bind(this)),t},_bindToAnchorParents:function(){return this.bindTo(this._anchorParents,"scroll",this._onAnchorParentsScroll)},_unbindFromAnchorParents:function(){return this._updateIsAnchorVisible.stop(),this._anchorParents&&this.unbindFrom(this._anchorParents,"scroll"),this},_onAnchorParentsScroll:function(){this.redraw()._updateIsAnchorVisible()},_onWinScrollAndResize:function(){this.hasMod("visible")&&(this.__base.apply(this,arguments),this._updateIsAnchorVisible())},_updateIsAnchorVisible:function(){if(this.domElem){var t=this._calcIsAnchorVisible();t!==this._isAnchorVisible&&(this._isAnchorVisible=t,this.redraw())}}},{UPDATE_TARGET_VISIBILITY_THROTTLING_INTERVAL:100}),BEM.DOM.decl({block:"dropdown2",modName:"switcher",modVal:"link"},null,{live:function(){return this.liveInitOnBlockInsideEvent("click","link",function(t){this._onSwitcherClick(t)}),this.__base()}}),BEM.DOM.decl({block:"link",modName:"pseudo",modVal:"yes"},{_onClick:function(t){t.preventDefault(),this.hasMod("disabled")||this.trigger("click",this._buildClickEventData(t))},_onKeydown:function(t){BEM.blocks.keycodes.is(t.keyCode,"ENTER","SPACE")&&(BEM.blocks.keycodes.is(t.keyCode,"SPACE")&&t.preventDefault(),this.setMod("pressed","yes"))},_onKeyup:function(t){BEM.blocks.keycodes.is(t.keyCode,"ENTER","SPACE")&&(BEM.blocks.keycodes.is(t.keyCode,"SPACE")&&this.trigger("click"),this.delMod("pressed"))},_buildClickEventData:function(t){return{domEvent:t,isModKey:t.ctrlKey||t.altKey||t.metaKey||t.shiftKey}}},{live:function(){return this.liveBindTo({modName:"pseudo",modVal:"yes"},"pointerclick",function(t){this._onClick(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"keydown",function(t){this.hasMod("disabled")||this._onKeydown(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"keyup",function(t){this.hasMod("disabled")||this._onKeyup(t)}),this.__base()}}),BEM.DOM.decl("button",{onSetMod:{js:{inited:function(){var t=this.isDisabled(),e=this.domElem;(this._href=e.attr("href"))&&t&&e.removeAttr("href")}},disabled:function(t,e){var i=this.domElem;e&&this.delMod("hovered"),this._href&&(e?i.removeAttr("href"):i.attr("href",this._href)),this.afterCurrentEvent(function(){i&&i.prop("disabled",e)})},pressed:function(t,e){if(this.hasMod("disabled"))return!1;this.trigger(e?"press":"release")}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(t){return void 0===t?this._href:(this._href=t,this.isDisabled()||this.domElem.attr("href",t),this)},getUrl:function(){return this.url()},setUrl:function(t){return this.url(t)},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onClick:function(t){this.isDisabled()?t.preventDefault():this.afterCurrentEvent(function(){this.domElem&&this.trigger("click")})}},{live:function(){this.liveBindTo("pointerclick",function(t){this._onClick(t)}).liveBindTo("pointerpress",function(t){this.isDisabled()||this._onPointerpress(t)})}}),BEM.DOM.decl("button",{onSetMod:{focused:{yes:function(){if(this.isDisabled())return!1;this.bindToWin("unload",function(){this.delMod("focused")}).bindTo("keydown",this._onKeyDown),this._isControlFocused()||this._getControl().focus(),this.trigger("focus")},"":function(){var t=BEM.blocks["i-ua"].opera<13;this.unbindFromWin("unload").unbindFrom("keydown"),(t||document.hasFocus())&&this._isControlFocused()&&this._getControl().blur(),this.trigger("blur")}},disabled:function(t,e){this.__base.apply(this,arguments),e&&(this.delMod("focused"),this.domElem.keyup())},hovered:function(t,e){if(this.isDisabled())return!1;!e&&this.delMod("pressed")},pressed:function(){return this.isDisabled()||this.setMod("focused","yes"),this.__base.apply(this,arguments)}},_getControl:function(){return this.elem("control").length&&this.elem("control")||this.domElem},_isControlFocused:function(){return this.containsDomElem($.dom.getActiveElement())},_onKeyDown:function(t){var e=BEM.blocks.keycodes,i=t.keyCode;!this._keyDowned&&e.is(i,"ENTER","SPACE")&&(this._keyDowned=!0,this.setMod("pressed","yes").bindTo("keyup",function(){this.delMod("pressed").unbindFrom("keyup"),delete this._keyDowned,i===e.SPACE&&this.domElem.attr("href")&&(document.location=this.domElem.attr("href"))}))},destruct:function(){this.delMod("focused"),this.__base.apply(this,arguments)}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.isDisabled()||this.domElem[0].contains(t.relatedTarget)||this.toggleMod("hovered","yes","pointerover"===t.type)}).liveBindTo("focusin focusout",function(t){this.toggleMod("focused","yes","focusin"===t.type)}),8===BEM.blocks["i-ua"].ie&&this.liveBindTo("mouseup mouseout",function(t){this.domElem.height()}),this.__base()}}),BEM.DOM.decl({block:"button",modName:"withFocusFix",modVal:"yes"},{onSetMod:{focused:{yes:function(){if(this.isDisabled())return!1;this.bindToWin("unload",function(){this.delMod("focused")}).bindTo("keydown",this._onKeyDown),this.trigger("focus")}}}}),BEM.DOM.decl("quasar-control",{setStatus:function(t){this._isDestructing||("process"===t?this._changeState("icon","spin"):(this._setModeIcon(t),this._changeState("spin","icon")))},_changeState:function(t,e){this.setMod(this.elem(t),"hidden",!0),this.delMod(this.elem(e),"hidden")},_setModeIcon:function(t){var e=this.findBlockInside("icon");e&&e.setMod("quasar",t)}}),BEM.DOM.decl({block:"serp-item",modName:"preview-scale",modVal:"yes"},{},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("pointerover",function(){if(!this._isInternal()){var t=this.blockInside("thumb-image");t&&t.setMod("hovered")}}).liveBindTo("pointerout",function(){if(!this._isInternal()){var t=this.blockInside("thumb-image");t&&t.delMod("hovered")}})}}),BEM.DOM.decl("directblock",{_directId:null,_getContextLoaderUrl:function(){return"//an.yandex.ru/system/context.js"},onSetMod:{js:{inited:function(){this._beforeInit(),this.findBlocks(),this.bindEvents(),this._afterInit()}}},_beforeInit:function(){this.CONTEXT_LOADER_URL=this._getContextLoaderUrl(),this._skin=window.Ya.skin},_afterInit:function(){this.hasMod("update-on-init","yes")&&this.update()},findBlocks:$.noop,bindEvents:function(){this.bindToWin("skin_change",this._onSkinChanged),this.__base.apply(this,arguments)},unbindEvents:function(){this.unbindFromWin("skin_change",this._onSkinChanged),this.__base.apply(this,arguments)},_onSkinChanged:function(t){this._skin=t.originalEvent.detail,this.update()},update:function(t,e){BEM.blocks["i-global"].getFlag("images_adv_loader_new")||this._isScriptRequested()||this._load(),this._update(t,e)},show:function(){this.domElem.show()},hide:function(){this._isTargetNodeEmpty()||this.domElem.hide()},isVisible:function(){return this.domElem.is(":visible")},_load:function(){return this.__self.load(this.CONTEXT_LOADER_URL).done(this._onLoadSuccess.bind(this)).fail(this._onLoadError.bind(this))},_onLoadSuccess:$.noop,_onLoadError:$.noop,_pushAfterInitCallback:function(t){"function"==typeof t&&(window.yandex_context_callbacks||(window.yandex_context_callbacks=[])).push(t)},_onDirectLoaded:function(){this._isTargetNodeEmpty()||(this._canShow()?(this.trigger("loaded",{domElem:this.domElem,reqid:this.params.reqid}),this.show(),this._onDirectLoadedAndShowed()):this.hide())},_onDirectLoadedAndShowed:$.noop,_canShow:function(){return!this._isPornoQuery()},_isPornoQuery:function(){return BEM.blocks["i-global"].param("isPornoQuery")},_render:function(t,e,i,n){var o=window.Ya&&window.Ya.Context,s=this._getRenderParams(t,e,i,n);if(!s)return this;var r=this._onEmptyDirectLoaded.bind(this,s.blockId);if(BEM.blocks["i-global"].getFlag("images_adv_loader_new"))window.yaContextCb.push(function(){this._isTargetNodeEmpty()||window.Ya.Context.AdvManager.render(s,r)}.bind(this));else if(o&&o.AdvManager){if(this._isTargetNodeEmpty())return;o._asyncModeOn=!0,o.AdvManager.render(s,r),this._onAdRequest()}else this._pushAfterInitCallback(function(){this._isTargetNodeEmpty()||(window.Ya.Context.AdvManager.render(s,r),this._onAdRequest())}.bind(this));return this},destroy:function(){var t=window.Ya&&window.Ya.Context,e={renderTo:this._getDomNodeId()};t&&t.AdvManager?t.AdvManager.destroy(e):this._pushAfterInitCallback(function(){t.AdvManager.destroy(e)})},destruct:function(){this.unbindEvents(),this.__base.apply(this,arguments)},isExists:function(){return!this.domElem.is(":empty")},_getDomNodeId:function(){return this.params.domNodeId||this.domElem&&this.domElem[0]&&this.domElem[0].id},_getRenderParams:function(t,e,i,n){var o={blockId:i||this._getDirectId(),statId:n,renderTo:e,async:!0,refresh:!0,onRender:this._onDirectLoaded.bind(this),darkTheme:"dark"===this._skin,extParams:"&"+$.param(this._getExtParams()),onHide:this._onHide.bind(this),pageNumber:this.params.pageNumber,onError:this._onError.bind(this)};if(this.params.disableGrab||(o.grab=this._getGrabText(t)),this.params.searchText&&(o.searchText=BEM.blocks["i-global__utils"].decodeEntities(this.params.searchText)),BEM.blocks["i-global"].getFlag("enable_direct_timing")&&(o.initTime=new Date),this.params.data)try{o.data=JSON.parse(this.params.data)}catch(t){}return o},_renderWithSearchQuery:function(t){var e=BEM.blocks["i-global"].param("query"),i=BEM.blocks["i-global"].getFlag("video_rtb_statid");t&&this._render(e,this._getDomNodeId(),t,i)},_onAdRequest:$.noop,_getDirectId:function(){return this.params.directId},_getAltDirectId:function(){return this.params.altDirectId},_getGrabText:$.noop,_getExtParams:function(){return{}},_onEmptyDirectLoaded:function(t){this.__base.apply(this,arguments),this._shouldRenderAltPage(t)?this._renderWithSearchQuery(this._getAltDirectId()):this.hide()},_shouldRenderAltPage:function(t){var e=this._getAltDirectId();return!!e&&(this._getDirectId()!==e&&t!==e)},_onHide:function(){this._isTargetNodeEmpty()||this.destruct()},_onError:$.noop,_isScriptRequested:function(){var t=this.__self._getLoadScriptData(this.CONTEXT_LOADER_URL).status;return"loaded"===t||"loading"===t},_isTargetNodeEmpty:function(){return this._isDestructing||!this.domElem||!this.domElem.length}},{_loadScriptData:{},_getLoadScriptData:function(t){return this._loadScriptData[t]||(this._loadScriptData[t]={status:void 0,dfd:$.Deferred()})},load:function(t){var e=this._getLoadScriptData(t),i=e.dfd;if(!e.status){e.status="loading";var n=document.createElement("script");n.onload=function(){e.status="loaded",i.resolve(t)},n.onerror=function(){e.status="error",i.reject(t)},n.src=t,document.body.appendChild(n)}return i}}),BEM.DOM.decl("directblock",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._hitSentCounter()}}},_setForceDirectId:function(t){this._forceDirectId=t},_getDirectId:function(){return this._forceDirectId||this.__base.apply(this,arguments)},_update:function(){this.params.partnerId&&this.params.settings?window.Ya&&window.Ya.Direct?this._renderLegacyDirect():this._pushAfterInitCallback(this._renderLegacyDirect.bind(this)):this._renderWithSearchQuery(this._getDirectId())},_renderLegacyDirect:function(){window.Ya&&window.Ya.Direct&&!this._isTargetNodeEmpty()&&(window.Ya.Direct.insertInto(this.params.partnerId,this.params.domNodeId,Object.assign(this.params.settings,{on_render:this._onLegacyDirectRender.bind(this),ext_params:"&"+$.param(this._getExtParams())})),this._onRender())},_onLegacyDirectRender:function(){this.trigger("render")},getDefaultParams:function(){return{domNodeId:null}},_onDirectLoaded:function(){this._isTargetNodeEmpty()||(this.__base.apply(this,arguments),this._onRender())},_onRender:function(){this._hitCallbackCounter(),this._bindScrollCounter()},_bindScrollCounter:function(){BEM.blocks["scroll-spy"].notifyBecameVisible(this.domElem,this._hitShowCounter,this,{})},_hitSentCounter:function(){this.params.counters&&this.params.counters.sent&&c.hit({path:this.params.counters.sent},null,this.domElem)},_hitShowCounter:function(){this.params.counters&&this.params.counters.show&&c.hit({path:this.params.counters.show},null,this.domElem)},_hitCallbackCounter:function(){this.params.counters&&this.params.counters.callback&&c.hit({path:this.params.counters.callback},null,this.domElem)},_hitRequestCounter:function(){this.params.counters&&this.params.counters.request&&c.hit({path:this.params.counters.request},null,this.domElem)},_getExtParams:function(){var t={reqid:this.params.reqid||BEM.blocks["i-global"].param("reqid"),testid:BEM.blocks["i-global"].param("testId"),portal_placement:this.params.place};return this.params.uuid?t.uuid=this.params.uuid:t.yuid=BEM.blocks["i-global"].param("yandexuid"),t},_getGrabText:function(t){return BEM.blocks["i-global__utils"].base64Encode("t"+t)},_canShow:function(){return this.__base.apply(this,arguments)||this.params.showDirectOnAdult},_onAdRequest:function(){this._hitRequestCounter()}}),BEM.DOM.decl({block:"directblock",modName:"native",modVal:!0},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._shouldFallback()?this._fallbackToOldDirect():(window.yaads=window.yaads||[],this.__self._loadNativeScript())}}},_update:function(){if(this._shouldFallback())return this._fallbackToOldDirect(),void this.afterCurrentEvent(this._update);var t=this.domElem[0].id||this.params.domNodeId,e={id:this._getNativeDirectId(),render:"#"+t,success:this._onDirectLoaded.bind(this),reject:this._onHide.bind(this),extParams:"&"+$.param(this._getExtParams())};window.yaads=window.yaads||[],window.yaads.push(e),this._hitRequestCounter()},_getNativeDirectId:function(){return this.params.directId.slice(4)},_shouldFallback:function(){var t=BEM.blocks["i-global"].getFlag("video_direct_force_legacy_config");return!BEM.blocks.utils.nativeAdsSupported(t)&&this.params.directId&&this.params.legacyId},_fallbackToOldDirect:function(){this.delMod("native"),this._setForceDirectId(this.params.legacyId)}},{_nativeScriptLoadStarted:!1,_loadNativeScript:function(){if(!this._nativeScriptLoadStarted){var t=document.createElement("script");t.async=!0,t.src="https://an.yandex.ru/system/widget.js",t.onerror=this._handleNativeScriptLoadError.bind(this),document.querySelector("head").appendChild(t),this._nativeScriptLoadStarted=!0}},_handleNativeScriptLoadError:function(){this._nativeScriptLoadStarted=!1}}),function(){var t={};t.exports=function(t){if("undefined"==typeof window||!window.document||!window.document.createElement)return!0;if(t)return!1;if(!("attachShadow"in Element.prototype&&"getRootNode"in Element.prototype&&window.customElements&&Array.from&&window.URL&&window.Symbol))return!1;var e=window.document.createElement("template");if(!("content"in e&&e.content.cloneNode()instanceof DocumentFragment))return!1;var i=document.createElement("template");i.content.appendChild(document.createElement("div")),e.content.appendChild(i);var n=e.cloneNode(!0);return 0!==n.content.childNodes.length&&0!==n.content.firstChild.content.childNodes.length},BEM.blocks.utils.nativeAdsSupported=t.exports}(),BEM.DOM.decl("related-serp",{_readRemoved:function(){var t;this._removed||(t=$.cookie("lorv"),this._removed=t?t.split("#"):[])},_saveRemoved:function(){this._removed&&$.cookie("lorv",this._removed.join("#"),{expires:new Date(Date.now()+this.__self.REMOVED_EXPIRE_TIME),path:BEM.blocks["i-global"].param("router").index})},_addVideoToRemoved:function(t){var e=t.removeId;e&&(this._readRemoved(),this._removed.indexOf(e)>-1||(this._removed.length>=this.__self.MAX_REMOVED_COUNT&&this._removed.shift(),this._removed.push(t.removeId),this._saveRemoved()))},_removeVideoFromRemoved:function(t){var e=t.removeId;e&&(this._readRemoved(),this._removed=this._removed.filter(function(t){return t!==e}),this._saveRemoved())},_onRemoveIconClick:function(t){var e=this._getParentCarouselItem(t.data.domElem);this._addVideoToRemoved(this.elemParams(e)),this._toggleRestorePanel(e,!0),this.trigger("item:removed",this.elemParams(e))},_onRestore:function(t){var e=this._getParentCarouselItem(t.block.domElem);this._removeVideoFromRemoved(this.elemParams(e)),this._toggleRestorePanel(e,!1),this.trigger("item:restored",this.elemParams(e))},_toggleRestorePanel:function(t,e){this.findBlockInside(t,"restore-item-panel").setMod("hidden",!e||"")},_getParentCarouselItem:function(t){return this.elemify(t.parents(this.buildSelector("item")),"item")}},{MAX_REMOVED_COUNT:20,REMOVED_EXPIRE_TIME:31536e6,live:function(){this.liveBindTo("more-btn","pointerclick",function(){this.trigger("more-btn-click")}),this.liveBindTo("remove-icon","pointerclick",function(t){t.stopPropagation(),t.preventDefault(),this._onRemoveIconClick(t)}),this.liveInitOnBlockInsideEvent("restore","restore-item-panel",function(t){this._onRestore(t)})}}),BEM.DOM.decl("select2",{onSetMod:{js:{inited:function(){this.button=this.findBlockOn("button","button2"),this.initSelect()}},disabled:{"*":function(t,e){this.button.setMod(t,e)}}},initSelect:$.noop,getVal:$.noop,setPrevVal:$.noop,getPrevVal:$.noop,getClearVal:$.noop,setVal:$.noop,_onControlChange:$.noop,_onButtonKeypress:$.noop,_onButtonKeydown:$.noop,_changeIcon:$.noop,_buildLeftIcon:$.noop,_setMinWidth:$.noop},{live:function(){this.liveInitOnBlockInsideEvent("init","button2"),this.liveBindTo("control","pointerdown").liveBindTo("pointerdown",function(){}),this.liveBindTo("button","keydown",function(t){this._onButtonKeydown(t)}).liveBindTo("button","keypress",function(t){this._onButtonKeypress(t)})}}),BEM.DOM.decl("select2",{onSetMod:{disabled:{"*":function(t,e){this.__base.apply(this,arguments),this.control.prop("disabled",Boolean(e))}}},initSelect:function(){this.control=this.elem("control");var t=this.getVal();this.initialVal=this.button.getText(),this.setPrevVal(t),BEM.afterCurrentEvent(function(){if(this.control&&this.control.length&&this.domElem){var e=this.getVal();e&&0!==e.length&&e!==t&&this.setVal(e)}},this),this.bindTo("control","change",function(t){this._onControlChange(t)})},getVal:function(){var t=this.control.val();if(!t){var e=this.getOptions();return e.length?e[0].value:[]}return t},setVal:function(t){if(this.getVal()!==t)for(var e=this.getOptions(),i=0;i<e.length;i++){var n=e[i];if(n.value===t){this.control[0].value=t,this.button.setText(n.text),this.triggerChange();break}}},setPrevVal:function(t){this.prevVal=t},getPrevVal:function(){return this.prevVal},getClearVal:function(t){return t&&1===t.length?t[0]:t},triggerChange:function(){this.trigger("change",{prevVal:this.getClearVal(this.getPrevVal()),currVal:this.getClearVal(this.getVal())})},controlChange:function(t){for(var e=this.getOptions(),i=0;i<e.length;i++){var n=e[i];if(n.value===t){this.button.setText(n.text);break}}},_onControlChange:function(t,e){var i=this.getVal();this.controlChange(i),this.triggerChange(),this.setPrevVal(i)},getOptions:function(){return Array.prototype.slice.call(this.control[0].options)},getName:function(){return this.control.attr("name")},setName:function(t){this.control.attr("name",t),this.trigger("setName")},reset:function(){this.setVal(this.initialVal),this.button.setText(this.initialVal),this.trigger("reset")}}),BEM.DOM.decl({block:"select2",modName:"popup",modVal:"yes"},{onSetMod:{focused:{yes:function(){this.button.setMod("focused","yes")},"":function(){this.delMod("opened"),this.button.delMod("focused")}},opened:{"*":function(t,e){if(this.hasMod("disabled"))return!1;var i=Boolean(e);this.button.domElem.attr("aria-expanded",i),this.arrow.toggleMod("direction","top","bottom",i),this.popup.toggleMod("visible","yes",i),i&&this.popup.redraw()},yes:function(){this._setMinWidth(),this._setMaxHeight()}},disabled:{yes:function(){this.popup.delMod("visible")}}},getDefaultParams:function(){return{optionsMaxHeight:Number.POSITIVE_INFINITY}},initSelect:function(){this.menu=this.findBlockOn("menu","menu"),this.__base.apply(this,arguments),this.popup=this.findBlockOn("popup","popup2"),this.arrow=this.findBlockOn("arrow","icon"),this.initialVal=this.getVal(),this.popup.setAnchor(this.button),this.popup.on("beforeClose",this._onPopupHide,this),this.button.on({click:this._onButtonClick,focus:this._onButtonFocus},this),this.bindTo("button","blur",this._onButtonBlur),this.menu.on({change:this._onMenuChange,click:this._onMenuItemClick,"item-hover":this._onMenuItemHover},this),this._preventBlur=null,this.bindTo("menu","pointerdown",this._onMenuPointerdown),document.documentMode&&this.bindTo("menu","focusin focusout",this._preventItemFocus),this._setMaxHeight()},getVal:function(){return this.menu.getVal()},setVal:function(t){return this.menu.setVal(t),this},reset:function(){this.menu.setVal(this.initialVal)},setContent:function(t){return this.menu.setContent(t),this._setMinWidth(),this._setMaxHeight(),this.popup.redraw(),this},destruct:function(){return document.documentMode&&this.unbindFrom("menu","focusin focusout",this._preventItemFocus),this.unbindFrom("menu","pointerup",this._preventButtonBlur),this.unbindFrom("menu","pointerdown",this._onMenuPointerdown),this.unbindFrom("button","blur",this._onButtonBlur),this.__base.apply(this,arguments)},_setMinWidth:function(){this.popup.domElem.css("min-width",this.button.domElem.outerWidth())},_setMaxHeight:function(){var t=this.popup.calcPossibleDrawingParams(),e=this.menu.domElem,i=e.outerWidth(),n=0;t.forEach(function(t){t.width>=i&&t.height>n&&(n=t.height)}),n>0&&e.css("max-height",Math.min(this.params.optionsMaxHeight,n))},_onMenuChange:function(t,e){this._changeIcon(t,e),this.control&&this.control.val(e.currVal),this.trigger("change",e)},_changeIcon:function(t,e){var i,n,o=this.menu,s=this.button,r=o.getItems("checked","yes").filter(function(t){return o.elemParams(t).val===e.currVal}).shift(),a=r&&o.findBlockInside(r,"icon"),c=s.findElem("icon","side","left");a?(c.length||(s.domElem.prepend(this._buildLeftIcon()),c=s.findElem("icon","side","left")),n=s.findBlockInside(c,"icon"),delete(i=a.getMods()).js,Object.keys(i).forEach(function(t){n.setMod(t,i[t])})):c.length&&c.remove()},_buildLeftIcon:function(){return'<i class="icon button2__icon button2__icon_side_left" aria-hidden="true"/>'},_onMenuItemClick:function(t,e){this.delMod("opened")},_onMenuItemHover:function(t,e){var i=this.button.domElem,n=e.item;n?i.attr("aria-activedescendant",n.attr("id")):i.removeAttr("aria-activedescendant")},_onMenuPointerdown:function(t){this._preventBlur=!0},_onButtonClick:function(){this.toggleMod("opened","yes")},_onButtonKeydown:function(t){var e=BEM.blocks.keycodes;!this.hasMod("opened")&&e.is(t.keyCode,"UP","DOWN")&&(t.preventDefault(),this.setMod("opened","yes"))},_onButtonFocus:function(){this.setMod("focused","yes")},_onButtonBlur:function(){this._preventBlur?(this._preventBlur=null,this.bindTo("menu","pointerup",this._preventButtonBlur)):this.delMod("focused")},_onPopupHide:function(){this.delMod("opened")},_preventButtonBlur:function(t){this.unbindFrom("menu","pointerup",this._preventButtonBlur),this.button.domElem.focus()},_preventItemFocus:function(t){t.preventDefault(),t.stopPropagation()},_onControlChange:function(t){var e=this.control.val(),i=[].concat(e),n=this.menu,o=this.getVal();n.getItems().filter(function(t){return n.delMod(t,"checked"),i.indexOf(n.elemParams(t).val)>=0}).forEach(function(t){n.setMod(t,"checked","yes")}),this._onMenuChange(t,{prevVal:o,currVal:e})}}),BEM.DOM.decl({block:"select2",modName:"popup",modVal:"yes"},{onSetMod:{opened:{yes:function(t,e){var i,n=this.__base.apply(this,arguments);return!1===n?n:(this.menu.getItems("hovered","yes").length||((i=this.menu.getItems("checked","yes")).length?this.menu.hoverText(i[0].text()):this.menu.hoverNext()),n)},"":function(){return this._preventToToggleOpened=!1,this.__base.apply(this,arguments)}}},_onButtonKeydown:function(t){this.hasMod("opened","yes")?(this.menu._onKeydown(t,!0),this._keysToMenu=!0,this._preventToToggleOpened=!0):(this._keysToMenu=!1,this._preventToToggleOpened=!1,this.__base.apply(this,arguments))},_onButtonKeyup:function(t){this._keysToMenu&&(this.menu._onKeyup(t),this._keysToMenu=!1,this._preventToToggleOpened=!0)},_onButtonClick:function(){this._preventToToggleOpened?this._preventToToggleOpened=!1:this.__base.apply(this,arguments)},_onButtonKeypress:function(t){var e=BEM.blocks.keycodes;if(e.is(t.keyCode,"UP","DOWN","ENTER","SPACE")||0===t.keyCode&&t.charCode===e.SPACE)this.menu._onKeypress(t);else{var i=this.menu.getItems("hovered","yes");if(i.forEach(function(t){this.menu.delMod(t,"hovered")},this),this.menu._onKeypress(t),this.hasMod("opened"))return;(i=this.menu.getItems("hovered","yes")).length&&this.setVal(this.menu.elemParams(i[0]).val)}}},{live:function(){return this.liveBindTo("button","keyup",function(t){this._onButtonKeyup(t)}),this.__base()}}),BEM.DOM.decl({block:"menu",baseBlock:"control"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.elem("item").attr("id",function(t,e){return e||$.identify()}),this._val=this.getVal()}},disabled:function(t,e){this.__base.apply(this,arguments),this.setMod(this.elem("item"),t,e)}},onElemSetMod:{item:{hovered:{yes:function(t){if(this.hasMod(t,"disabled"))return!1;this.delMod(this.elem("item","hovered","yes"),"hovered"),this.domElem.attr("aria-activedescendant",t.attr("id")),this.trigger("item-hover",{item:t})},"":function(){this.domElem.removeAttr("aria-activedescendant"),this.trigger("item-hover",{})}},checked:function(t,e,i){this.domElem.attr("aria-selected",Boolean(i))},disabled:{yes:function(){this.delMod("hovered"),this.domElem.attr("aria-disabled",!0)},"":function(){this.domElem.attr("aria-disabled",!1)}}}},_onChange:function(){var t=this._val,e=this.getVal();return t!==e&&(this._val=e,this.trigger("change",{prevVal:t,currVal:e})),this},getItems:function(t,e){return this.elem("item",t,e).get().map(function(t){return $(t)})},setContent:function(t){return BEM.DOM.update(this.domElem,t),this.reset(),this},getVal:function(){},reset:function(){this.dropElemCache()},_onItemEnter:function(t,e){this.setMod(t,"hovered","yes")},_onItemLeave:function(t,e){this.delMod(t,"hovered")},_onItemFocusin:function(t,e){this.setMod(t,"hovered","yes")},_onFocusout:function(t){this.__base.apply(this,arguments),this.delMod(this.elem("item","hovered","yes"),"hovered")},_onItemClick:function(t,e,i){this.trigger("click",{item:t,source:i.source})}},{live:function(){return this.liveBindTo("item","pointerover pointerout",function(t){var e=t.data.domElem;e[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onItemEnter(e,t):this._onItemLeave(e,t))}).liveBindTo("item","pointerclick",function(t){var e=t.data.domElem;this._onItemClick(e,t,{source:"pointer"})}).liveBindTo("item","focusin",function(t){var e=t.data.domElem;this._onItemFocusin(e,t)}).liveBindTo("focusout",function(t){this._onFocusout(t)}),this.__base()}}),BEM.DOM.decl("menu",{onSetMod:{focused:{yes:function(){if(this.__base.apply(this,arguments),this.hasMod("type","navigation"))return!1;this.elem("item","hovered","yes").length||(this.setMod(this.elem("item").eq(0),"hovered","yes"),this._scrollToItem(this.elem("item").eq(0))),this.bindToDoc("keydown",this._onKeydown).bindToDoc("keyup",this._onKeyup).bindToDoc("keypress",this._onKeypress)},"":function(){this.__base.apply(this,arguments),this.unbindFromDoc("keydown keyup keypress").delMod(this.elem("item","hovered","yes"),"hovered")}}},hoverNext:function(t){for(var e,i,n=t?this.getItems().reverse():this.getItems(),o=0,s=!1;i=n[o];o++)if(!this.hasMod(i,"disabled"))if(this.hasMod(i,"hovered"))s=!0;else{if(s){e=i;break}e||(e=i)}e&&(this.setMod(e,"hovered","yes"),this._scrollToItem(e))},hoverText:function(t,e){for(var i,n=this.getItems(),o=n.length,s=this._normalizeText(t),r=e||0;r<o;){if(i=n[r],!this.hasMod(i,"disabled")&&0===this._normalizeText(i.text()).indexOf(s))return this.setMod(i,"hovered","yes"),void this._scrollToItem(i);++r===n.length&&(r=0,o=e)}},_normalizeText:function(t){return t.toLowerCase().replace(/ё/,"е")},reset:function(){this.__base.apply(this,arguments),this._dropSearchCache()},_dropSearchCache:function(){this._lastTime=this._lastChar=this._searchTerm=void 0},_scrollToItem:function(t){var e=this.domElem.offset().top,i=t.offset().top,n=0;i<e?n=i-e:(n=i+t.outerHeight()-e-this.domElem.outerHeight())<0&&(n=0),this.domElem.scrollTop(this.domElem.scrollTop()+n)},_onKeydown:function(t,e){var i=BEM.blocks.keycodes,n=t.keyCode;t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||((i.is(n,"UP","DOWN")||!e&&n===i.SPACE)&&t.preventDefault(),i.is(n,"UP","DOWN")&&(this.hoverNext(i.is(n,"UP")),this._dropSearchCache()))},_onKeyup:function(t){var e=BEM.blocks.keycodes,i=t.keyCode;t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||e.is(i,"ENTER","SPACE")&&this._onItemClick(this.elem("item","hovered","yes"),t,{source:"keyboard"})},_onKeypress:function(t){var e,i,n=Number(new Date),o=t.charCode,s=String.fromCharCode(o).toLowerCase(),r=s===this._lastChar&&1===this._searchTerm.length,a=this.getItems();o<=BEM.blocks.keycodes.SPACE||t.ctrlKey||t.altKey||t.metaKey?this._lastTime=n:(n-this._lastTime>this.SEARCH_TIMEOUT||r?this._searchTerm=s:this._searchTerm=(this._searchTerm||"")+s,this._lastChar=s,this._lastTime=n,e=this.elem("item","hovered","yes"),i=(i=$($.map(a,function(t){return t.get()})).index(e))>=0?i:0,r&&0===this._normalizeText(e.text()).indexOf(this._searchTerm)&&(i=i>=a.length-1?0:i+1),this.hoverText(this._searchTerm,i))},SEARCH_TIMEOUT:1500}),BEM.DOM.decl({block:"menu",modName:"type",modVal:"radio"},{getVal:function(){var t=this.getItems("checked","yes")[0];return t&&this.elemParams(t).val},setVal:function(t){return this.getItems().forEach(function(e){this.elemParams(e).val===t?this.setMod(e,"checked","yes"):this.delMod(e,"checked")},this),this._onChange(),this},_onItemClick:function(t,e,i){this.__base.apply(this,arguments),this.hasMod(t,"checked","yes")||(this.delMod(this.elem("item","checked","yes"),"checked"),this.setMod(t,"checked","yes"),this._onChange())}}),BEM.DOM.decl({block:"select2",modName:"text",modVal:"vary"},{_onMenuChange:function(t,e){this.__base.apply(this,arguments),this.button.setText(this.getText()),this._setMinWidth()},_onControlChange:function(){this.__base.apply(this,arguments),this.button.setText(this.getText())},getText:function(){var t=this.params.checkedTexts;return this.menu?this.getTextFromMenu(t):this.control?this.getOptions().filter(function(t){return t.selected}).map(function(e){var i=e.text,n=e.value;return t[n]||i}).join(", ")||this.params.text:void 0},getTextFromMenu:function(t){var e=this.menu;return e.getItems("checked","yes").map(function(i){var n=e.elemParams(i),o=n.text||i.text(),s=n.val||i.val();return t[s]||o}).join(", ")||this.params.text}}),BEM.DOM.decl({block:"select2",modName:"counter"},{_sendCounter:function(t){window.Ya.counter.w(this.domElem[0],this.params.counterPath,t)},_onButtonClick:function(){this.__base.apply(this,arguments),this._sendCounter("-click="+(this.hasMod("opened")?"open":"close"))},_onMenuChange:function(){this.__base.apply(this,arguments),this._sendCounter("-change=1")},_onControlChange:function(){this.__base.apply(this,arguments),this._sendCounter("-change=1")}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("control","pointerclick",function(){this._sendCounter("-click=1")})}}),BEM.DOM.decl("carousel",{onSetMod:{js:{inited:function(){this.setScrollMod(),this.bindTo("wrap","scroll",$.throttle(this._onScroll,50,this)),BEM.blocks["b-page"].on("resize",this._onResize,this),this.hasMod("calculatingScrollStep")&&window.requestAnimationFrame(function(){this.params.calculatedScrollStep=this.getCarouselScrollStep()}.bind(this))}},scroll:{both:function(){this.trigger("scrollModChange",{type:"both"})}}},getDefaultParams:function(){return{itemMarginRight:16}},destruct:function(){BEM.blocks["b-page"].un("resize",this._onResize,this),this.__base.apply(this,arguments)},getCarouselScrollStep:function(){if(this._isDestructing)return 0;var t,e=this.elem("item");t=this.params.itemWidth?this.params.itemWidth:e?e.width()+this.params.itemMarginRight:0;var i=(this.domElem.width()||0)-30,n=Math.floor(i/t),o=this._getScrollItemsCorrection();return n+=Number(o),t?n*t:0},setScrollMod:function(){var t,e=this.scrollLeft(),i=this._getWrapHiddenWidth();return t=i<=0?"":0===e?"right":e<i?"both":"left",this.setMod("scroll",t)},checkEndOfList:function(){if(!this.params.offset)return this;var t=this.scrollLeft(),e=this._getWrapHiddenWidth();return t<=this.params.offset&&this.trigger("listOut","left"),t>e-this.params.offset&&this.trigger("listOut","right"),this},scrollToStart:function(){this.scrollLeft(0)},setItemsInList:function(t){this.getList().html(t)},getItemsFromList:function(){return this.getList().html()},setItemsInListWithInit:function(t){BEM.DOM.update(this.getList(),t)},appendItemsInList:function(t){this.getList().append(t)},appendItemsInListWithInit:function(t){BEM.DOM.append(this.getList(),t)},prependItemsInList:function(t){this.getList().prepend(t)},prependItemsInListWithInit:function(t){BEM.DOM.prepend(this.getList(),t)},getList:function(){return this.list||(this.list=this.elem("list"))},getContentWidth:function(){return this.getList().width()},getControlWidth:function(t){return this.elem("control","side",t).width()},getWrapperWidth:function(){return this.elem("wrap").width()},scrollLeft:function(t){return void 0!==t?this.elem("wrap").scrollLeft(t):Math.ceil(this.elem("wrap").scrollLeft())},flatten:$.noop,_getScrollItemsCorrection:function(){return 0},_onScroll:function(){this.setScrollMod().checkEndOfList()},_onResize:function(){this.hasMod("calculatingScrollStep")&&(this.params.calculatedScrollStep=this.getCarouselScrollStep()),this.setScrollMod()},_getWrapHiddenWidth:function(){return Math.ceil(this.elem("wrap").get(0).scrollWidth-this.elem("wrap").outerWidth())}},{live:!0}),BEM.DOM.decl("carousel",{_onMouseMove:function(t){this.setMod(t.data.domElem,"hovered","yes")},_onMouseLeave:function(){this.delMod(this.elem("control"),"hovered")}},{live:function(){this.__base(),this.liveBindTo("control","mouseover",function(t){this._onMouseMove(t)}).liveBindTo("control","mouseout",function(){this._onMouseLeave()})}}),BEM.DOM.decl({block:"carousel",modName:"multiple-rows",modVal:"yes"},{MIN_HEIGHT:130,SCROLL_HEIGHT:20,onSetMod:{js:{inited:function(){this.groupItems(),this.__base.apply(this,arguments)}}},groupItems:function(){var t,e,i=this.elem("list"),n=this.findElem(i,"item").toArray(),o=[];n.length&&(t=BEMHTML.apply({block:"carousel",elem:"column"}),i.empty(),n.reduce(function(t,e,i){return o.push(e),o.length%2!=0&&i!==n.length-1||(t.push(o),o=[]),t},[]).forEach(function(n){e=BEM.DOM.append(i,t),n.forEach(function(t){BEM.DOM.append(e,t)})}),this._resize(e.height()))},_resize:function(t){var e=Math.max(t-this.SCROLL_HEIGHT,this.MIN_HEIGHT),i=e+this.SCROLL_HEIGHT;this.elem("wrap").height(i),this.domElem.height(e)}}),BEM.DOM.decl({block:"carousel",modName:"controls",modVal:!0},{onSetMod:{scroll:{left:function(){var t=this.elem("control","side","right");this.hasMod(t,"hovered","yes")&&this.setMod(t,"disable","yes")},right:function(){var t=this.elem("control","side","left");this.hasMod(t,"hovered","yes")&&this.setMod(t,"disable","yes")}}},onElemSetMod:{control:{hovered:{"":function(){this.delMod(this.elem("control"),"disable")}}}},getDefaultParams:function(){var t=this.__base();return t.animationTime=300,t.finishBeforeMove=!1,t.offset=null,t},_onControlClick:function(t){if(!this.hasMod(this.elem("control"),"disable","yes")){var e=this.getMod(t.data.domElem,"side");this.canScrollTo(e)&&this.move(e)}},_onControlPress:function(t){this.setMod(t.data.domElem,"pressed","yes")},_onPointerRelease:function(t){this.delMod(t.data.domElem,"pressed")},canScrollTo:function(t){var e=this.getMod("scroll");return"both"===e||e===t},move:function(t){this.params.finishBeforeMove&&this.elem("wrap").finish();var e=this.elem("wrap").scrollLeft()+this.getOffset(t);this.elem("wrap").animate({scrollLeft:e},this.params.animationTime,this.setScrollMod.bind(this))},getOffset:function(t){var e=this.params.calculatedScrollStep||this.params.step;return("left"===t?-1:1)*e}},{live:function(){this.__base(),this.liveBindTo("control","pointerclick",function(t){this._onControlClick(t)}).liveBindTo("control","pointerpress",function(t){this._onControlPress(t)}).liveBindTo("control","pointerrelease",function(t){this._onPointerRelease(t)}).liveBindTo("control","dblclick",function(t){t.preventDefault()})},liveMod:!1}),BEM.DOM.decl("display-counter",{onSetMod:{displayed:function(){w(this,JSON.parse(this.params.displayCounter.path)[1],this.params.displayCounter.counterParams)}},displayed:function(){this.setMod("displayed",!0)},offsetLeft:function(){return this.domElem[0].offsetLeft},width:function(){return this.domElem[0].clientWidth}}),BEM.DOM.decl("restore-item-panel",{},{live:function(){this.liveBindTo("pointerclick",function(t){t.stopPropagation(),t.preventDefault(),this.elem("restore-btn").is(t.target)&&this.trigger("restore")})}}),BEM.DOM.decl("related-object",{_onListOut:function(t,e){this.params.loadNext&&"right"===e&&!this._loading&&this.params.entfrom>0&&(this.setMod(this.elem("spinner-wrapper"),"progress","yes"),this._loading=1,this.setMod("loading","yes"),this._loadNextPage())},_loadNextPage:function(){this._countRelatedRequests||(this._countRelatedRequests=0),this._countRelatedRequests++,this._countRelatedRequests>2||this._makeNextPageRequest()},_makeNextPageRequest:function(){this._relatedRequest=BEM.create("i-request_type_bem",{url:BEM.blocks.uri.setParams(BEM.blocks["i-global"].param("router").index+"db",this._getItemParams()),ctx:this}).block({block:"related-object",mods:{ajax:"yes","data-source":this.getMod("data-source")}},this._onNextPageLoaded,{startIndex:this.params.entfrom,type:this.params.type,isFirst:this.hasMod("first")}).get()},_loadThumbs:function(){window.Ya.Video.loadThumbs&&window.Ya.Video.loadThumbs()},_onNextPageLoaded:function(t){if(this.setMod(this.elem("spinner-wrapper"),"progress","no"),this.delMod("loading"),t.html){if(this.params.entfrom=t.params.entfrom,this._isDestructing)return void this._relatedRequest.abort();this._appendContent(t.html),this._countRelatedRequests=0,this._carousel.setScrollMod(),this._loadThumbs()}},_getItemParams:function(){var t=this.params.entref,e={entfrom:this.params.entfrom,text:this._getQueryText(),page:BEM.blocks["i-global"].param("page"),entref:t,"parent-reqid":BEM.blocks.location.getInstance().getParamValue("parent-reqid")};return this.params.vital&&(e.vital=this.params.vital),BEM.blocks["i-url-controller"].mergePassedUrlParams(e)},_getQueryText:function(){return this.params.vital?this.params.vital:decodeURIComponent(BEM.blocks["i-global"].param("query"))},_appendContent:function(t){BEM.DOM.before(this.elem("spinner-wrapper"),t),this._loading=0},_getFiltersParams:function(){return this._filtersParams||(this._filtersParams=this.elemParams("filters")),this._filtersParams},_updateFilter:function(t,e){this._getFiltersParams().filters.some(function(i){return i.type===t&&(i.text=e,i.val=i.items[e],!0)})},_getUrlParamsFromFilters:function(){var t=this._getFiltersParams(),e=[],i=[],n=void 0===this.params.makeSearchRequest||this.params.makeSearchRequest;return n||(e=BEM.blocks.uri.parse(window.location.href).getParam("text")),t.filters.forEach(function(o){o.text&&n&&e.push(o.text),i.push(o.key+t.valSeparator+o.val)}),{text:e.join(" "),entref:t.key+"="+i.join(t.fieldSeparator)}},_updateUrlParams:function(t){var e=BEM.blocks["i-global"].param("router").search;t=BEM.blocks["i-url-controller"].mergePassedUrlParams(t,{source:"oo"}),BEM.blocks.location.getInstance().change({url:BEM.blocks.uri.setParams(e,t)})},_onSelectChange:function(t){var e=this.getMod(t.block.domElem,"type"),i=t.block.getVal();this._updateFilter(e,i),this._updateUrlParams(this._getUrlParamsFromFilters())}},{live:function(){this.liveInitOnBlockInsideEvent("listOut","carousel",function(t,e){this.params.entfrom>0&&(this._carousel||(this._carousel=t.block),this._onListOut(t,e))}),this.liveInitOnBlockInsideEvent("change","select2",function(t){this._onSelectChange(t)})}}),BEM.DOM.decl("related-object",{},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("filter","pointerclick",function(t){var e=t.data.domElem,i=e.position().left;i<0?e.parent().scrollLeft(0):i+e.width()>e.offsetParent().width()&&e.parent().scrollLeft(i)})}}),BEM.DOM.decl("top-serials",{onSetMod:{js:{inited:function(){this._langs=(this.params.letters||[]).map(function(t){return t.lang}),this._curLang=this.params.defaultLang,this._curPage=this.params.curPage,this._curLetter=this.params.curLetter,this._location=BEM.blocks.location.getInstance(),this._page=this.findBlockOutside("b-page"),this.params.autoOpen&&(this._renderExtraContent(),this._actualizeShowMoreBtnState(),this._actualizeBackToTopBtnState()),this.params.needScroll&&setTimeout(this.changeThis(function(){this._page.scrollTo(this.domElem,this.__self.SCROLL_SPEED)}),this.__self.SCROLL_DELAY)}}},_renderExtraContent:function(t){var e={},i=this.elem("extra-content"),n=this.params.extraSerials.length?this.params.extraSerials:this.params.topSerials;t=t||{},this.hasMod("extra-content","hidden")?(this._curLetter?(e.letter=this._curLetter,e.letter_page=this._curPage):e.top="1",this._addCGI(e)):this._removeCgi(["top","letter","letter_page"]),i.length?t.forceRender?(this.delMod("extra-content"),this._replaceSerialsList(BEMHTML.apply({block:"top-serials",elem:"extra-list",itemsLists:n}))):this.toggleMod("extra-content","hidden",""):(this.delMod("extra-content"),BEM.DOM.append(this.domElem,BEMHTML.apply({block:"top-serials",elem:"extra-content",theme:this.getMod("theme"),letters:this.params.letters,itemsLists:n,curLetter:this._curLetter,defaultLang:this._curLang,isNativeSelect:this.params.isNativeSelect})),w(this.domElem[0],this.params.extraShowedCounterPath)),this.dropElemCache(),this._triggerHeightChange()},_triggerHeightChange:function(){BEM.channel("top-serials").trigger("height:change")},_onSelectChange:function(t,e){this._curLang=this._langs[e.index],this.setMod("lang",this._curLang);var i=this.findBlockInside("carousel-"+this._curLang,"carousel");i&&i.setScrollMod(),this.blockInside({block:"radio-button-carousel",modName:"lang",modVal:this._curLang}).uncheckAll()},_onRadioCarouselChange:function(t,e){e&&(this._curPage=0,this._curLetter=e,this._fetchSerials(this._curLetter,this._curPage),this._addCGI({letter:this._curLetter,letter_page:this._curPage}),this._removeCgi("top"),this._actualizeBackToTopBtnState())},_onShowMoreBtnClick:function(){this._fetchSerials(this._curLetter,++this._curPage),this._addCGI({letter_page:this._curPage})},_returnToPopular:function(){this.blockInside({block:"radio-button-carousel",modName:"lang",modVal:this._curLang}).uncheckAll(),this._curLetter="",this._curPage="",this._replaceSerialsList(BEMHTML.apply({block:"top-serials",elem:"extra-list",itemsLists:this.params.topSerials})),this._actualizeShowMoreBtnState(),this._actualizeBackToTopBtnState(),this._removeCgi(["letter","letter_page"]),this._addCGI({top:"1"})},_fetchSerials:function(t,e){this.blockInside("fade").show();var i={};BEM.blocks.utils.forOwn(BEM.blocks.location.getInstance().getState().params,function(t,e){-1!==BEM.blocks["i-url-controller"].passedParams.indexOf(e)&&(i[e]=t)}),Object.assign(i,{letter:t,letter_page:e,page:BEM.blocks["i-global"].param("page")}),BEM.create("i-request_type_bem",{url:BEM.blocks.uri.setParams(BEM.blocks["i-global"].param("router").index+"series",i),ctx:this}).block({block:"top-serials",mods:{ajax:"yes"}},$.noop).get(this._onFetchDone,this._onFetchError)},_onFetchDone:function(t){var e=t["top-serials"][0].html;this._actualizeShowMoreBtnState(),0===this._curPage?this._replaceSerialsList(e):this._appendSerialsList(e),this._triggerHeightChange(),this.blockInside("fade").hide()},_onFetchError:function(){this.blockInside("fade").hide()},_actualizeShowMoreBtnState:function(){var t=this._hasMorePages(this._curLetter,parseInt(this._curPage,10));this.toggleMod(this.elem("show-more-btn"),"hidden","","yes",t),this._actualizeSpacer(t)},_actualizeBackToTopBtnState:function(){this.setMod(this.elem("back-to-top"),"hidden",this._curLetter?"":"yes"),this._toggleFooter(Boolean(this._curLetter))},_actualizeSpacer:function(t){this.toggleMod(this.elem("spacer"),"hidden","yes","",t||!this._curLetter)},_toggleFooter:function(t){this.toggleMod(this.elem("footer"),"hidden","","yes",t)},_hasMorePages:function(t,e){return this._getLetterPagesCount(t)>e+1},_getLetterPagesCount:function(t){var e=0,i=this._curLang,n=[];return(this.params.letters||[]).some(function(t){if(t.lang===i)return n=t.list,!0}),n.some(function(i){if(i.title===t)return e=i.number,!0}),e},_replaceSerialsList:function(t){BEM.DOM.replace(this.elem("extra-list"),t),this.dropElemCache()},_appendSerialsList:function(t){BEM.DOM.append(this.elem("extra-list"),$(t).contents().unwrap()),this.dropElemCache()},_addCGI:function(t){t=t||{},this.params.vital&&(t.vital=this.params.vital),this._location.change({url:BEM.blocks.uri.setParams(location.href,t),trigger:!1,history:!1})},_removeCgi:function(t){this._location.change({url:BEM.blocks.uri.delParams(location.href,t),trigger:!1,history:!1})},destruct:function(){BEM.blocks["related-serp"].un("more"),this.__base.apply(this,arguments)}},{SCROLL_SPEED:500,SCROLL_DELAY:200,live:function(){this.liveBindTo("back-to-top","pointerclick",function(){this._returnToPopular()}).liveInitOnBlockEvent("more-btn-click","related-serp",function(){this._renderExtraContent()}).liveInitOnBlockInsideEvent("change","select",function(t,e){this._onSelectChange(t,e)}).liveInitOnBlockInsideElemEvent("show-more-btn","click","button",function(){this._onShowMoreBtnClick()}).liveInitOnBlockInsideElemEvent("controls","change","radio-button-carousel",function(t,e){this._onRadioCarouselChange(t,e)})}}),BEM.DOM.decl("select",{onSetMod:{js:{inited:function(){this._items=[],this._curItemIndex=-1,this._scrollableElemOutsidePopup=null,this._rowHeight=22,this.on("change",this._redrawParentPopup);var t=this._getSelectedText();t&&t!==this._getButtonText()&&this.elem("control").trigger("change")}},disabled:function(t,e){this.elem("control").prop("disabled",e),this._getButton().setMod(t,e),e&&this.delMod("opened").delMod("focused")},focused:{yes:function(){if(this.hasMod("disabled"))return!1;this._useNativeControl()||this.bindTo("keydown",this._onKeyDown),this.afterCurrentEvent(function(){this.domElem&&this.trigger("focus")})},"":function(){this._useNativeControl()||this.delMod("opened").unbindFrom("keydown"),this.afterCurrentEvent(function(){this.domElem&&this.trigger("blur")})}},opened:function(t,e){this._getButton()&&this._getButton().domElem&&this._getButton().toggleMod("arrow","up","down",Boolean(e))}},isDisabled:function(){return this.hasMod("disabled","yes")},isOpened:function(){return this.hasMod("opened","yes")},open:function(){return this.setMod("opened","yes")},close:function(){return this.delMod("opened")},val:function(t,e){if(void 0===t)return this.elem("control").val();var i,n=-1;return this.findElem("option").each(function(e){this.value===t&&!this.disabled&&(!(i=$(this).parent("optgroup")[0])||!i.disabled)&&(n=e)}),n>-1&&this._selectedIndex(n,e),this},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},_selectedIndex:function(t,e){var i=this._getSelectedIndex();return void 0===t||t===i?i:(this.elem("control").prop("selectedIndex",t),this._useNativeControl()||(this._setButtonText(this._getSelectedText()),this._items[0]&&this.delMod(this._items,"selected").setMod(this._items.eq(t),"selected","yes")),this.trigger("change",$.extend({index:t,prev:i},e)),t)},setOptions:function(t){return t?(BEM.DOM.update(this.elem("control"),BEMHTML.apply($.map(t,this.__self._buildOption))),this.redraw()):this},redraw:function(){return this._popup&&this._redrawList(),this.elem("control").trigger("change"),this},_useNativeControl:function(){return null!==this.__self.useNativeControl?this.__self.useNativeControl:this.__self.useNativeControl="none"!==this.elem("control").css("display")},_redrawParentPopup:function(){var t;return this._isParentPopup()&&((t=this._popup._parent).repaint||t.redraw).call(t),this},_isParentPopup:function(){return this._popup&&this._popup._parent&&!this.hasMod("layout","fixed")},_onSelectChange:function(){this._setButtonText(this._getSelectedText()),this.trigger("change",{index:this._getSelectedIndex(),prev:-1})},_onControlFocusInOut:function(t){this._useNativeControl()&&this.toggleMod("focused","yes","","focusin"===t.type)},_onMouseDown:function(t){this._isControlFocused()&&t.preventDefault()},_onKeyDown:function(t){var e=BEM.blocks.keycodes,i=t.keyCode===e.UP,n=t.keyCode===e.DOWN,o=t.keyCode===e.ENTER,s=t.keyCode===e.SPACE;if(i||n){if(t.preventDefault(),!this.isOpened())return this.open();var r=this._items.length,a=this._curItemIndex;if(i&&0===a||n&&a>r-2)return;if(r){var c,l=n?1:-1;for(c=a;c>=0&&c<=r;)if(c+=l,this._isSelectableItem(this._items.eq(c))){a=c;break}this._onEnterItem(this._items.eq(a),!0)}}(o||s)&&this._onEnterItem(this._items.eq(this._curItemIndex),!0,!0)},_onEnterItem:function(t,e,i){this.elem("button").attr("aria-activedescendant",t.attr("id"));var n=this._curItemIndex,o=this._getItemIndex(t),s=this._items;n>-1&&this.delMod(s.eq(n),"hovered"),o>-1&&(this._curItemIndex=o,this.setMod(s.eq(o),"hovered","yes")),i&&this._selectedIndex(this._curItemIndex),e&&this._scrollToCurrent()},_onLeaveItem:function(t){var e=this._curItemIndex;e>-1&&e===this._getItemIndex(t)&&(this.delMod(this._items.eq(e),"hovered")._curItemIndex=-1)},_onSelectItem:function(t){return this._isSelectableItem(t)&&this._selectedIndex(this._curItemIndex),this.close()},_onButtonFocus:function(){this.setMod("focused","yes")},_findScrollableElemOutsidePopup:function(){if(null===this._scrollableElemOutsidePopup){var t,e=this._getPopup().domElem;do{t=(e=e.parent()).css("overflow-y")}while("scroll"!==t&&"auto"!==t&&"HTML"!==e.prop("tagName"));this._scrollableElemOutsidePopup=e}return this._scrollableElemOutsidePopup},_onButtonBlur:function(){if(this.isOpened()&&this._isPopupFocused())if(8===BEM.blocks["i-ua"].ie){var t=this._findScrollableElemOutsidePopup(),e=t.scrollTop();this._focusButton(),t.scrollTop(e)}else this._focusButton();else this.delMod("focused")},_onButtonPress:function(){this.toggleMod("opened","yes","")},_focusButton:function(){return this._getButton().setMod("focused","yes"),this},_blurButton:function(){return this._getButton().delMod("focused"),this},_isPopupFocused:function(){try{return this._getPopup().containsDomElem($(document.activeElement))}catch(t){return!1}},_getButtonText:function(){return this._getButton().elem("text").text()},_setButtonText:function(t){t.length&&(this._getButton().elem("text").text(t),BEM.blocks["i-ua"].ie<10&&this.domElem.parent().css("outline",""))},_isOutsideClicked:function(t,e){return this.containsDomElem($(e.target))},_getItemIndex:function(t){return $.inArray(t.get(0),this._items)},_getSelectedText:function(){return this.elem("control").find(":selected").text()},_getSelectedIndex:function(){return this.elem("control").prop("selectedIndex")},_isSelectableItem:function(t){return!this.hasMod(t,"disabled","yes")&&!this.hasMod(t,"label","yes")},_getButton:function(){return this._button||(this._button=this.findBlockOn("button","button"))},_getRowHeight:function(){return this.findElem(this._getPopup().domElem,"item").outerHeight()},_isControlFocused:function(){try{return this.containsDomElem($(this.__self.doc[0].activeElement))}catch(t){return!1}},destruct:function(){this._outPopup&&this._outPopup.un("outside-click"),this.delMod("opened"),this._popup&&this._popup.domElem&&BEM.DOM.destruct(this._popup.domElem),this.__base.apply(this,arguments)},getDefaultParams:function(){return{rows:15,popupMods:{direction:"down"}}}},{live:function(){this.liveBindTo("control","change",function(t){this._onSelectChange()}),this.liveBindTo("control","focusin focusout",function(t){this._onControlFocusInOut(t)}),this.liveBindTo("mousedown",function(t){this._onMouseDown(t)}),this.liveInitOnBlockInsideEvent("focus","button",function(){this._onButtonFocus()}).liveInitOnBlockInsideEvent("blur","button",function(){this._onButtonBlur()})},useNativeControl:null,_buildOption:function t(e,i,n){var o={};return"option"===e.item?(o={block:"select",elem:"option",tag:"option",attrs:{value:e.value},content:e.content},e.disabled&&(o.attrs.disabled="disabled"),e.selected&&(o.attrs.selected="selected")):"optgroup"===e.item&&(o={elem:"option-group",tag:"optgroup",attrs:{label:e.label}},e.disabled&&(o.attrs.disabled="disabled"),o.content=Array.isArray(e.content)?e.content.map(t):e.content),o.block="select",o}}),BEM.DOM.decl("select",{onElemSetMod:{item:{hovered:function(){BEM.blocks["i-ua"].opera<13&&this._popup.domElem.css("display","inline").css("display","")}}}},{live:function(){return this.liveInitOnBlockInsideEvent("press","button",function(){this._onButtonPress()}),this.__base.apply(this,arguments)}}),BEM.DOM.decl("select",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._initButton()}}},_initButton:function(){},_redrawList:function(){var t,e=this,i=this._getPopup().domElem;return BEM.DOM.update(this.findElem(i,"list"),this.__self._buildItemsHtml(this.elem("control").children())),t=this.findElem(i,"item"),this._curItemIndex=-1,this._items=t.filter(function(){return!e.hasMod($(this),"label","yes")}),this.bindTo(e._items,{pointerclick:function(t){t.preventDefault(),e._onSelectItem(t.data.domElem)},pointerover:function(t){e._onEnterItem(t.data.domElem)},pointerout:function(t){e._onLeaveItem(t.data.domElem)}}),this}},{_buildItemsHtml:function(t){var e={block:"select",elem:"separator",tag:"i"},i=[],n=[];function o(t,e,i){var n={block:"select",elem:"item",content:{elem:"text",tag:"span",content:{tag:!1,html:e}||"   "},elemMods:{}};return i&&(n.elemMods=i),n}return function t(s,r){var a=s.length;if(a){var c=0;do{var l=$(s[c]),h=l.attr("disabled")&&{disabled:"yes"};if(l.is("optgroup")){!0,!l.prev().is("optgroup")&&c>0&&i.push(e),n.push(i),(i=[]).push(o(0,l.attr("label"),$.extend({label:"yes"},h,r))),t(l.children(),$.extend({inner:"yes"},h,r));var u=i;(i=n.pop()).push({block:"select",elem:"group",content:u})}else i.push(o(0,l.html(),$.extend(h,l.is(":selected")&&{selected:"yes"},r)))}while(++c<a||!1)}}(t),BEMHTML.apply(i)}}),BEM.DOM.decl("select",{onSetMod:{opened:{yes:function(){if(this.hasMod("disabled"))return!1;this._drawPopup();var t=this.findElem(this._popup.domElem,"item","selected","yes");this.elem("button").attr({"aria-activedescendant":t.attr("id"),"aria-expanded":!0})},"":function(){this.elem("button").attr("aria-expanded",!1).removeAttr("aria-activedescendant"),this._getPopup().hide()}}},_getPopupContent:function(t){return{block:t,elem:"list"}},_getPopupMix:function(t){return{block:t,elem:"popup",elemMods:{}}},_getPopup:function(){if(this._popup)return this._popup;var t=this,e=t.params,i=t.__self.getName(),n=this._getPopupContent(i),o=this._getPopupMix(i),s={animate:"no"},r={directions:[{to:"bottom",axis:"left",offset:{top:8}},{to:"top",axis:"left",offset:{bottom:8}}]};["size","layout","theme","width"].forEach(function(e){t.hasMod(e)&&(o.elemMods[e]=t.getMod(e))}),$.extend(o.elemMods,e.elemPopupMods),$.extend(s,e.popupMods),$.extend(r,e.popupParams);var a=$(BEMHTML.apply({block:"popup",mods:s,mix:o,js:r,content:{elem:"content",content:n}}));return this._popup=this.findBlockOn(a,"popup"),this._popup.on({show:function(){t._curItemIndex=t._getSelectedIndex();var e=t._items.eq(t._curItemIndex);t.delMod(t._items,"selected").setMod(e,"hovered","yes").setMod(e,"selected","yes")},"outside-click":function(e,i){t._isOutsideClicked(e,i)?e.preventDefault():t._blurButton()},hide:function(){t.delMod("opened").delMod(t._items,"hovered").delMod(t.findElem(t._popup.domElem,"popup"),"scrollable")}}).bindTo("mousedown",function(t){t.preventDefault()}),BEM.DOM.append(BEM.DOM.scope,t._popup.domElem),t._redrawList(),t._outPopup=t.findBlockOutside("button","popup"),t._outPopup&&t._outPopup.on("outside-click",function(e,i){t._popup.containsDomElem($(i.target))&&e.preventDefault()}),t._popup},_calcPopupDimensions:function(){this._popupContent||(this._popupContent=this._getPopup().findBlockInside("popup").elem("content"));var t=parseInt(this.params.rows,10),e=this._getPopup();if(t&&this.findElem(this._popupContent,"item").size()>t){this._rowHeight=this._getRowHeight();var i=parseInt(e.domElem.css("height"),10),n=t*this._rowHeight;i!==n&&(e.setSize({height:n}),i>n&&this.setMod(this.findElem(e.domElem,"popup"),"scrollable","yes"))}else e.setSize({height:"auto"})},_drawPopup:function(){var t=this.findBlockInside("select");this._getPopup().show(t),this._calcPopupDimensions(),this._scrollToCurrent()},_scrollToCurrent:function(){if(this._popupContent&&!(this._curItemIndex<0)){var t,e=this._items.eq(this._curItemIndex).get(0).offsetTop,i=this._popupContent,n=i.scrollTop(),o=e-n,s=2*this._rowHeight;o>i.height()-s?t=e-s:n&&o<s&&(t=e-i.height()+s),t&&i.scrollTop(t)}}},{SHADOW_OFFSET:1}),BEM.DOM.decl("popup",{getDefaultParams:function(){return{zIndexGroupLevel:0,directions:[{to:"bottom",axis:"center",tail:{axis:"center"}},{to:"top",axis:"center",tail:{axis:"center"}},{to:"right",axis:"middle",tail:{axis:"middle"}},{to:"left",axis:"middle",tail:{axis:"middle"}}],tail:{width:24.04,height:12.02,offset:{left:15,right:15,top:15,bottom:15}},duration:150}},onSetMod:{js:{inited:function(){this._cache={},this._viewport=BEM.DOM.win,this._scope=BEM.DOM.scope,this._channel=BEM.channel("popups"),this._inContainer=!1,this._isParentFixed=!1,this._owner=null,this._destructor=null,this._userPosition=null,this._parent=null,this._childs=[],this._isShown=!1,this._isHiding=!1,this._positions={},this._currPos={},this._visibilityFactor=null,this._direction=!1,this._directions={};var t=this.getDefaultParams(),e=this.params,i=this._repackDirParams(t.directions),n=e.generateDirections?this._generateDirections:e.directions,o=this._repackDirParams(n);e.tail&&(this.params.tail=this._mergeParams(t.tail,e.tail)),this._order=o.keys.map(function(t){var e=o.directions[t],n=i.directions[t];return n||(n=i.directions[e.to]),this._directions[t]=this._mergeParams(n,e,{tail:this._tailParamsHook}),t},this),this._zIndex=null,this._zIndexGroupLevel=null}},visibility:{visible:function(){this._onShown()},"":function(){this._onHidden()}}},show:function(t){var e;if(t instanceof BEM)e=t.domElem.eq(0);else if(t instanceof $)e=t;else if(!t)return;if(e){if(this._owner&&e[0]!==this._owner[0]&&this.delMod("visibility"),this._owner=e,e.length){var i="_"+this.__self.getName()+"-destructor";this._destructor=e.addClass("i-bem "+i).bem(i)}var n=this._findParent(e);n&&this.setParent(n)}else this._userPosition=t;return this.setMod("visibility","outside").repaint()},hide:function(t){if(this._isHiding)return this;if(this._isShown){var e=$.Event("before-hide");if(this.trigger(e,t),e.isDefaultPrevented())return this;if(this._isHiding=!0,this._childs.forEach(function(t){t.hide&&t.hide(),t.delMod("visible")}),this.hasMod("animate","yes")&&!this.hasMod("fade-out","no")){var i=this;return this.beforeHide(function(){i.domElem&&i.delMod("visibility")}),this}}return this.delMod("visibility")},toggle:function(t,e){return this._isShown&&!this._isHiding?this.hide(e):this.show(t||this._owner)},repaint:function(){this._moveToContainer();var t=this._pickDirection();return this.setMod("to",t.to)._show(this._positions[t.key],this._tailPos&&this._tailPos[t.key]),this},getCurrPos:function(){return this._currPos},getCurrDirection:function(){return this._direction},setScope:function(t){return this._scope=t,this._inContainer=!1,this},setContent:function(t){return BEM.DOM.update(this.elem("content"),t),this._resetDefault(),this._isShown&&this.repaint(),this},isShown:function(){return this._isShown},setParent:function(t){return this._parent=t,this._isParentFixed=t.hasMod("position","fixed"),t.addChild&&t.addChild(this),this},addChild:function(t){for(var e=this._childs,i=e.length,n=0;n<i;n++)if(e[n]._uniqId===t._uniqId)return;t.on("hide",function(){this.removeChild(t)},this),t.on("beforeClose",function(){this.afterCurrentEvent(function(){this.removeChild(t)})},this),e.push(t)},_getParentPopup:function(){return this._parent},removeChild:function(t){for(var e=this._childs,i=e.length,n=0;n<i;n++)if(e[n]._uniqId===t._uniqId)return void e.splice(n,1)},setSize:function(t){return t&&(this._resetDefault(),this.domElem.css(t),this._isShown&&!this._isHiding&&this.repaint()),this},_show:function(t,e){return this._currPos=t,e&&this.elem("tail").removeAttr("style").css(e),this.domElem.css(t),(!this._isShown||this._isHiding)&&this.hasMod("animate","yes")&&!this.hasMod("fade-in","no")&&this.afterShow(),this._isHiding=!1,this.setMod("visibility","visible"),this},_onShown:function(){this._isShown||this._bindCompatibility(),this.bindToDoc("keydown",function(t){t.which===BEM.blocks.keycodes.ESC&&0===this._childs.length&&this.hide({source:"esc-key"})}),this._attachRepaintOnResize(),this._bindFocusEvents(),this._attachUnder(),this._isShown=!0,this.hasMod("autoclosable","yes")&&this.afterCurrentEvent(function(){this.domElem&&this._enableAutoclosable()}),this.hasMod("adaptive","yes")&&this._enableAdaptive(),this._channel.on("hide",this.hide,this),this.trigger("show")},_bindCompatibility:function(){this._captureZIndex(),this.__self._visiblePopupsStack.unshift(this),this.trigger("beforeOpen")},_unbindCompatibility:function(){this.trigger("beforeClose");var t=this.__self._visiblePopupsStack;t.splice(t.indexOf(this),1),this._releaseZIndex()},_onHidden:function(){this._isShown&&this._unbindCompatibility(),this.unbindFromDoc("keydown"),this._detachRepaintOnResize(),this._unbindFocusEvents(),this.hasMod("autoclosable","yes")&&this._disableAutoclosable(),this.hasMod("adaptive","yes")&&this._disableAdaptive(),this._detachUnder(),this._cache={},this._isShown=!1,this._isHiding=!1,this._channel.un("hide"),this._returnFocus(),this.trigger("hide")},_attachRepaintOnResize:function(){window.attachEvent&&this.domElem[0].attachEvent("onresize",this.__self._enforcePageRepaint)},_detachRepaintOnResize:function(){window.detachEvent&&this.domElem[0].detachEvent("onresize",this.__self._enforcePageRepaint)},_bindFocusEvents:function(){this._lastFocused=$($.dom.getActiveElement()[0]||this._scope);var t=this.__self._getFocusable(this.elem("content"));this._firstFocusable=t.first(),this._lastFocusable=t.last(),this._skipReturnFocus=!1,0!==this._firstFocusable.length?this.bindTo(this._lastFocused,"keydown",this._onLastFocusedKeyDown).bindTo(this._firstFocusable,"keydown",this._onFirstFocusableKeyDown).bindTo(this._lastFocusable,"keydown",this._onLastFocusableKeyDown):this._skipReturnFocus=!0},_unbindFocusEvents:function(){this.unbindFrom(this._firstFocusable,"keydown"),this.unbindFrom(this._lastFocusable,"keydown"),this.unbindFrom(this._lastFocused,"keydown")},_onLastFocusedKeyDown:function(t){this._lastFocused.is(this._scope)&&!this._lastFocused.is(t.target)||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this[t.shiftKey?"_lastFocusable":"_firstFocusable"].focus())},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocused.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocused.focus())},_returnFocus:function(){(this._parent||{})._skipReturnFocus||this._skipReturnFocus||this._lastFocused.focus()},_mergeParams:function(t,e,i){var n={},o=Object.prototype.hasOwnProperty;return i||(i={}),t&&"object"==typeof t&&Object.keys(t).forEach(function(e){n[e]=t[e]}),Object.keys(e).forEach(function(s){var r=o.call(i,s)?i[s].call(this,t[s],e[s]):e[s];!r||"object"!=typeof r||Array.isArray(r)?n[s]=r:t[s]?n[s]=this._mergeParams(t[s],r,i):n[s]=r},this),n},_tailParamsHook:function(t,e){return e.offset||(e.offset=this.params.tail.offset),"number"==typeof e.offset?{offset:{left:e.offset,top:e.offset}}:e},_generateDirections:function(){if(this.__self._generateDirectionsCache)return this.__self._generateDirectionsCache;for(var t=[["bottom","top"],["left","right"]],e=[["center","left","right"],["middle","top","bottom"]],i=e,n=t.length,o=[],s=0;s<n;s++)for(var r=t[s],a=r.length,c=0;c<a;c++)for(var l=e[s],h=l.length,u=0;u<h;u++)for(var d=i[s],p=d.length,f=0;f<p;f++)o.push({direction:r[c],axis:l[u],tail:{axis:d[f]}});return this.__self._generateDirectionsCache=o,o},_repackDirParams:function(t){var e,i={};return("string"==typeof t||$.isPlainObject(t))&&(t=[t]),e=t.map(function(t){if("string"==typeof t){var e=t.split("-");t={to:e[0],tail:{}},e[1]&&(t.axis=e[1]),e[2]&&(t.tail.axis=e[2])}var n=t.to;return i[n]||(i[n]=t),t.axis&&(n+="-"+t.axis),t.key=n,i[n]=t,n},this),{directions:i,keys:e}},setViewport:function(t){return this._viewport=t,this},_pickDirection:function(){var t,e=this._order,i=this.hasMod("adaptive","yes")?e.length:1;for(this._visibilityFactor=0,t=0;t<i;t++){var n=e[t],o=this._directions[n];this._resetPos(n)._pushPos(n,this._calcPos(o))._pushPos(n,this._calcOffsets(o)),this._hasTail()&&this._resetTailPos(n)._pushTailPos(n,this._calcTailPos(o))._pushTailPos(n,this._calcTailOffset(o))._pushPos(n,this._calcOffsetByTail(o)),this._pushPos(n,this._getParentOffset());var s=this._calcVisibilityFactor(o);if((s>this._visibilityFactor||!this._direction)&&(this._visibilityFactor=s,this._direction=this._directions[n],this.size=this.getPlacingSize(),100===s))break}return this._direction},_getParentOffset:function(){var t=this.domElem.offsetParent().offset();return t.left*=-1,t.top*=-1,t},_calcPos:function(t){this._calcPlacingSize(t);var e=this.getOwnerPos(),i=this.getOwnerSize(),n=this.getPlacingSize(),o=t.axis,s=this.params.position||{},r={},a=Object.prototype.hasOwnProperty;switch(t.to){case"bottom":r={top:a.call(s,"top")?s.top:e.top+i.height,left:a.call(s,"left")?s.left:this._calcLeft(o)};break;case"top":r={top:a.call(s,"top")?s.top:e.top-n.height,left:a.call(s,"left")?s.left:this._calcLeft(o)};break;case"left":r={top:a.call(s,"top")?s.top:this._calcTop(o),left:a.call(s,"left")?s.left:e.left-n.width};break;case"right":r={top:a.call(s,"top")?s.top:this._calcTop(o),left:a.call(s,"left")?s.left:e.left+i.width}}return r},_calcTop:function(t){var e=0,i=this.getPlacingSize(),n=this.getOwnerPos(),o=this.getOwnerSize();return"top"===t?e+=n.top:"middle"===t?e+=n.top+o.height/2-i.height/2:"bottom"===t&&(e+=n.top+o.height-i.height),e},_calcLeft:function(t){var e=0,i=this.getPlacingSize(),n=this.getOwnerPos(),o=this.getOwnerSize();return"left"===t?e+=n.left:"center"===t?e+=n.left+o.width/2-i.width/2:"right"===t&&(e+=n.left+o.width-i.width),e},getPlacingSize:function(){return this.getPopupSize()},_calcOffsets:function(t){var e,i=this._cache.offset||(this._cache.offset={}),n=t.key,o=t.offset;if(i[n])return i[n];if(!o)return!1;if(e={left:0,top:0},"number"==typeof o)switch(n){case"left":e.left+=o;break;case"right":e.left-=o;break;case"top":e.top+=o;break;case"bottom":e.top-=o}else o.left&&(e.left+=o.left),o.right&&(e.left-=o.right),o.top&&(e.top+=o.top),o.bottom&&(e.top-=o.bottom);return i[n]=e,e},_hasTail:function(){return 0!==this.elem("tail").length},_moveToContainer:function(t){if(t)this._inContainer=!1;else{if(this._isShown)return;t=this._parent?this._parent.domElem:this._scope}this.domElem.appendTo(t),this._inContainer=!0},_resetPos:function(t){return t?this._positions[t]=null:this._positions={},this},_pushPosTo:function(t,e,i){!1!==i&&("string"==typeof e?this._sum(t[e]||(t[e]={}),i):(i=e,Object.keys(t).forEach(function(e){this._sum(t[e],i)},this)))},_pushPos:function(t,e){return this._pushPosTo(this._positions,t,e),this},_sum:function(t,e){Object.keys(e).forEach(function(i){t[i]=(t[i]||0)+e[i]})},_getSizeOf:function(t){return{height:t.outerHeight(),width:t.outerWidth()}},getOwnerSize:function(){return this._owner?this._cache.ownerSize||(this._cache.ownerSize=this._getSizeOf(this._owner)):{height:0,width:0}},getPopupSize:function(){return this._getSizeOf(this.domElem)},_getPosOf:function(t){return t.offset()||{left:0,top:0}},getOwnerPos:function(){var t;return this._owner&&(t=this._getPosOf(this._owner),"pageYOffset"in window&&(t.top-=window.pageYOffset-(document.documentElement.scrollTop||document.body.scrollTop),t.left-=window.pageXOffset-(document.documentElement.scrollLeft||document.body.scrollLeft))),t||this._userPosition},_calcVisibilityFactor:function(t){var e,i,n=this._viewport,o=this._getSizeOf(n),s=this.getPopupSize(),r=this._positions[t.key],a=this._parent&&this._isParentFixed?this._parent.domElem.offset():{top:0,left:0},c=this.hasMod("position","fixed")?{top:0,left:0}:{top:n.scrollTop(),left:n.scrollLeft()},l=r.top+a.top-c.top,h=r.left+a.left-c.left,u=h+s.width-o.width,d=l+s.height-o.height,p={height:s.height,width:s.width},f=100;return d>0&&(p.height-=d),l<0&&(p.height+=l),h<0&&(p.width+=h),u>0&&(p.width-=u),p.height<0||p.width<0?f=0:(i=Math.abs(p.height*p.width),(e=s.height*s.width)!==i&&(f=i/e*100)),f},_findParent:function(t){var e=t.closest(".popup, .popup2");return this.findBlockOn(e,"popup")||this.findBlockOn(e,"popup2")},destruct:function(){return this._childs.forEach(function(t){t.domElem&&BEM.DOM.destruct(t.domElem)}),this.setMod("fade-out","no"),this.hide(),this._isShown&&this._unbindCompatibility(),this.__base.apply(this,arguments)},_calcZIndexGroupLevel:function(){var t=this.params.zIndexGroupLevel,e=this._getParentPopup();return e&&(t+=e._zIndexGroupLevel),this._destructor?this._destructor.findBlocksOutside("z-index-group").reduce(function(t,e){return t+Number(e.getMod("level"))},t):t},_captureZIndex:function(){null===this._zIndexGroupLevel&&(this._zIndexGroupLevel=this._calcZIndexGroupLevel());var t=this.__self._visiblePopupsZIndexes,e=this._zIndexGroupLevel,i=t[e],n=this._zIndex;return i||(i=t[e]=[(e+1)*this.__self.ZINDEX_FACTOR]),this._zIndex=i[i.length-1]+1,i.push(this._zIndex),this._zIndex!==n&&this.domElem.css("z-index",this._zIndex),this},_releaseZIndex:function(){var t=this.__self._visiblePopupsZIndexes[this._zIndexGroupLevel];return t.splice(t.indexOf(this._zIndex),1),this},_resetDefault:function(){},_calcPlacingSize:function(){}},{live:function(){this.liveBindTo("close","pointerclick",function(){this.hide({source:"close-click"})})},_visiblePopupsStack:(BEM.blocks.popup2||{})._visiblePopupsStack||[],_visiblePopupsZIndexes:(BEM.blocks.popup2||{})._visiblePopupsZIndexes||{},ZINDEX_FACTOR:1e3,_getFocusable:function(t){var e=$.data(t,"popup-getFocusable-id");e||(e=$.identify(),$.data(t,"popup-getFocusable-id",e)),e='*[data-popup-getFocusable-id="'+e+'"]';var i="a[href], link, ";return BEM.blocks["i-ua"].opera<13&&(i=""),t.find(i+'*[tabindex], button, input:not([type="hidden"]), textarea, select, menuitem').filter(function(){var t=$(this),i=!0;return!(parseInt(t.prop("tabindex"),10)<0||"hidden"===t.css("visibility"))&&($(this).parentsUntil(e).each(function(){if("none"===$(this).css("display"))return i=!1}),i)})},_enforcePageRepaint:function(){document.body.className+=""},_generateDirectionsCache:null}),BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.findBlockOn("share-dropdown")&&(this._isParentFixed=!0)}}}}),BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),BEM.blocks["b-page"].on("load:start",this._onPageChange,this)}}},destruct:function(){BEM.blocks["b-page"].un("load:start",this._onPageChange,this),this.__base.apply(this,arguments)},_onPageChange:function(){this.hide()}}),BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base.call(this);var t=this.findElem("under").first();this._underClassAttr=t.attr("class"),this.isDivEnough()?this._under=t:(t.remove(),this._under=null),this._underInPool=!1}}},isDivEnough:function(){return!0},_createUnder:function(){return $('<iframe frameBorder="0" tabindex="-1" src="about:blank"/>')},_getUnder:function(){if(this._under)return this._under;var t=this.__self._underPool.pop();return t&&(this._underInPool=!1),this._under=t,t||this._createUnder()},_attachUnder:function(){var t=this._under=this._getUnder();t.attr("class",this._underClassAttr),this.hasMod(t,"type","paranja")?t.detach().insertBefore(this.domElem).css("z-index",this._zIndex):t.prependTo(this.domElem)},_detachUnder:function(){var t=this._under;t.removeAttr("style"),this.__self._underPool.push(t.detach()),this._under=null,this._underInPool=!0},destruct:function(){var t=this.__base.apply(this,arguments);return this._underInPool&&this.__self._underPool.pop(),this._under&&this._under.remove(),t}},{_underPool:[]}),BEM.DOM.decl("popup",{isDivEnough:function(){return BEM.blocks["i-global"].param("mobile")}}),BEM.DOM.decl("popup",{onSetMod:{autoclosable:{yes:function(){this._enableAutoclosable()},"":function(){this._disableAutoclosable()}}},_enableAutoclosable:function(){if(this.domElem){var t=this._under;this.hasMod(t,"type","paranja")&&(t.is("iframe")&&(t=$([t[0].contentWindow,t[0].contentWindow.document])),this.bindTo(t,"pointerclick",function(t){t.stopPropagation(),this.hide({source:"outside-click"})}),this.bindTo(t,"pointerdown",function(){this._skipReturnFocus=!0})),this.bindTo("pointerdown pointerclick",function(){var t=this;do{t._preventHideByClick=!0,t=t._getParentPopup()}while(t)}),this.bindToDoc("pointerclick",function(t){if(this._preventHideByClick)this._preventHideByClick=null;else if(!this._isRelatedNode($(t.target))){var e=$.Event("outside-click");this.trigger(e,t),e.isDefaultPrevented()||this.hide({source:"outside-click"})}}),this.bindToDoc("pointerdown",function(){this._skipReturnFocus=!0})}},_disableAutoclosable:function(){var t=this._under;this.hasMod(t,"type","paranja")&&(t.is("iframe")&&(t=$([t[0].contentWindow,t[0].contentWindow.document])),this.unbindFrom(t,"pointerclick pointerdown")),this.unbindFromDoc("pointerclick pointerdown")},_isRelatedNode:function(t){var e=this.containsDomElem(t);if(e||(e=Boolean(this._owner)&&this.containsDomElem.call({domElem:this._owner},t)),e)return!0;var i,n=this._childs.length;for(i=0;i<n;i++)if(this.containsDomElem.call({domElem:this._childs[i].domElem},t))return!0;return!1}}),BEM.DOM.decl({block:"popup",modName:"adaptive",modVal:"yes"},{onSetMod:{adaptive:{yes:function(){this._enableAdaptive()},no:function(){this._disableAdaptive()}},"watch-scroll":{yes:function(){this._watchScroll()},no:function(){this._unwatchScroll()}}},_enableAdaptive:function(){this.afterCurrentEvent(function(){this.domElem&&this.bindToWin("resize",this.onResize)}),this._watchScroll()},_disableAdaptive:function(){this.unbindFromWin("resize")._unwatchScroll()},getScrollEvents:function(){return["scroll"]},_watchScroll:function(){this._owner&&!this.hasMod("watch-scroll","no")&&this.bindTo(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "),this.onScroll,this)},_unwatchScroll:function(){this._owner&&this.unbindFromDomElem(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "))},onResize:function(t){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},onScroll:function(t){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},destruct:function(){this._disableAdaptive(),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"popup",modName:"animate",modVal:"yes"},{afterShow:function(){var t=this.getCurrDirection();if(t){var e=t.to,i=this.getCurrPos(),n={opacity:1,top:i.top,left:i.left},o={opacity:0,top:i.top,left:i.left};"bottom"===e?o.top+=10:"top"===e?o.top-=10:"left"===e?o.left-=10:"right"===e&&(o.left+=10),this.domElem.stop(!0).css(o).animate(n,this.params.duration)}},beforeHide:function(t){var e=this.getCurrDirection();if(!e)return t();var i=e.to,n=this.getCurrPos(),o=this.domElem,s={top:n.top,left:n.left,opacity:0};return"bottom"===i?s.top+=10:"top"===i?s.top-=10:"left"===i?s.left-=10:"right"===i&&(s.left+=10),o.stop(!0,!0).animate(s,this.params.duration,function(){t(),o.css("opacity","")})}}),BEM.DOM.decl({block:"select",modName:"native",modVal:"yes"},{_useNativeControl:function(){return!0},_onMouseDown:$.noop,_selectedIndex:function(){var t=this.__base.apply(this,arguments);return this._setButtonText(this._getSelectedText()),t}}),BEM.DOM.decl("radio-button-carousel",{onSetMod:{js:{inited:function(){this._scrollToChecked()}}},val:function(t){var e=this.blockInside("radio-button").val(t);return void 0!==t&&this._scrollToChecked(),e},uncheckAll:function(){this.blockInside("radio-button").uncheckAll()},_onRadioChange:function(t,e){this.trigger("change",e.currentVal)},_scrollToChecked:function(){var t=this.blockInside("radio-button").getCurrent();if(t.length){var e=this.blockInside("carousel");e.scrollLeft(0),e.scrollLeft(t.position().left-e.getWrapperWidth()/2)}}},{live:function(){return this.liveInitOnBlockInsideEvent("change","radio-button",function(t,e){this.hasMod("js","inited")?this._onRadioChange(t,e):setTimeout(function(){this._onRadioChange(t,e)}.bind(this),0)}),!1}}),BEM.DOM.decl("radiobox",{onSetMod:{js:{inited:function(){this._val=this.findElem(this.elem("radio","checked","yes"),"control").val(),this.elem("control").each(function(t,e){var i=$(e),n=this.__self._getRadioByElem(i);i.isFocused()&&this.setMod(n,"focused","yes"),i.prop("checked")&&this.setMod(n,"checked","yes")}.bind(this))}},disabled:{yes:function(){this.setMod(this.elem("radio"),"disabled","yes")},"":function(){this.delMod(this.elem("radio"),"disabled")}}},onElemSetMod:{radio:{focused:{yes:function(t){this.delMod(this.elem("radio","focused","yes"),"focused");var e=this.findElem(t,"control");e.isFocused()||e.focus(),this.afterCurrentEvent(function(){this.domElem&&this.trigger("focus",{current:t})})},"":function(t){this.afterCurrentEvent(function(){this.domElem&&this.trigger("blur",{prev:t})})}},checked:{yes:function(t){var e=this.elem("radio","checked","yes"),i=this.findElem(t,"control"),n=this._val;this._willSwitch=!0,this.delMod(e,"checked"),this._willSwitch=!1,i.prop("checked",!0),this._val=i.val(),this.trigger("change",{current:t,currentVal:this._val,prev:e,prevVal:n})},"":function(t){var e=this.findElem(t,"control"),i=this._val;e.prop("checked",!1),this._val=void 0,this._willSwitch||this.trigger("change",{current:$(),currentVal:void 0,prev:t,prevVal:i})}},hovered:function(t){return!this.isDisabled(t)},pressed:function(t){return!this.isDisabled(t)},disabled:function(t,e,i){t.find(this.buildSelector("control")).prop("disabled",i),i&&this.delMod(t,"hovered").delMod(t,"pressed")}}},isDisabled:function(t){return this.hasMod(t,"disabled","yes")},val:function(t){if(void 0===t)return this._val;var e=this;return this.elem("control").each(function(i,n){if(n.value===t)return e.setMod(e.__self._getRadioByElem($(n)),"checked","yes"),!1}),e},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},getCurrent:function(){return this.findElem("radio","checked","yes")},uncheckAll:function(){return this.delMod(this.elem("radio","checked","yes"),"checked"),this},_onRadioEnter:function(t){this.setMod(t.data.domElem,"hovered","yes")},_onRadioLeave:function(t){this.delMod(t.data.domElem,"hovered")},_onRadioClick:function(t,e){this.isDisabled(t)||this.setMod(t,"focused","yes")},_onChange:function(t){this.setMod(this.__self._getRadioByElem(t.data.domElem),"checked","yes")},_onPointerpress:function(t){var e=t.data.domElem;this.setMod(e,"pressed","yes").bindToDoc("pointerrelease",function(){this.delMod(e,"pressed").unbindFromDoc("pointerrelease")})}},{live:function(){this.liveBindTo("radio","pointerclick",function(t){this._onRadioClick(t.data.domElem,t)}).liveBindTo("control","change",function(t){this._onChange(t)}).liveBindTo("radio","pointerover pointerout",function(t){t.data.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onRadioEnter(t):this._onRadioLeave(t))}).liveBindTo("control","focusin focusout",function(t){var e=this.__self._getRadioByElem(t.data.domElem);this.setMod(e,"focused","focusin"===t.type?"yes":""),parseInt(BEM.blocks["i-ua"].ios,10)>=8&&t.preventDefault()}).liveBindTo("radio","pointerpress",function(t){this.hasMod(t.data.domElem,"disabled")||this._onPointerpress(t)})},_getRadioByElem:function(t){return t.closest(this.buildSelector("radio"))}}),BEM.DOM.decl("radiobox",{_onRadioClick:function(t,e){this.__base.apply(this,arguments),this._onChange(e),e.preventDefault()}}),BEM.DOM.decl("radiobox",{getHighlighted:function(){return this.findElem("radio","highlighted","yes")}}),BEM.DOM.decl({block:"radio-button",baseBlock:"radiobox"},{onSetMod:{disabled:{yes:function(){this.delMod("focused"),this.__base.apply(this,arguments)}}},onElemSetMod:{radio:{pressed:{yes:function(){this.delMod(this.elem("radio","pressed","yes"),"pressed")}}}},_onPointerPress:function(t){this._pressedRadio=t.data.domElem,this.isDisabled(this._pressedRadio)||(this.setMod(this._pressedRadio,"pressed","yes"),this.bindToDoc("pointerrelease",this._onPointerRelease))},_onPointerRelease:function(t){var e=this._pressedRadio;delete this._pressedRadio,this.delMod(e,"pressed"),this.afterCurrentEvent(function(){if(this.domElem){var i=this.findElem(e,"control");i.prop("checked")||!e.is(t.target)&&!e.find(t.target).length||i.trigger("change").focus()}}),this.unbindFromDoc("pointerrelease")}},{live:function(){return this.liveBindTo("radio","pointerpress",function(t){this._onPointerPress(t)}).liveBindTo("control","focusin focusout",function(t){!this.hasMod("disabled")&&this.toggleMod("focused","yes","focusin"===t.type)}),this.__base()}}),BEM.DOM.decl({name:"radio-button",modName:"adaptive",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base(),this._select=this.findBlockInside("select"),this._selectButton=this._select.findBlockInside("button"),this.on("change",this._onRadioChange.bind(this)),this._select.on("change",this._onSelectChange.bind(this)),this.reflow(),this.setMod("visibility","visible")}}},_onRadioChange:function(t,e){e.current.index()<this._lastVisible&&(this._selectedIndex=-1,this.reflow(),this._setSelectPressed(!1))},_onSelectChange:function(){this._selectedIndex=this._select.val(),"-1"!==this._selectedIndex&&(this.setMod($(this.elem("radio")[Number(this._selectedIndex)]),"checked","yes"),this._setSelectPressed(!0),this._checkReflow())},_setSelectPressed:function(t){this._select.toggleMod(this._select.elem("button"),"pressed","yes","",t),this._selectButton.toggleMod("pseudo-pressed","yes","",t).delMod("focused")},reflow:function(){var t=this.domElem.width();this._getTotalWidth()<=t?(this.setMod("has-hidden","no"),this.setMod(this.elem("radio"),"visibility","visible"),this.setMod($(this.elem("radio")[this.elem("radio").length-1]),"side","right"),this.setMod(this.elem("more"),"visibility","hidden")):(this.setMod("has-hidden","yes"),this._lastVisible=this._getLastVisible(t),this.elem("radio").each(function(t,e){t<this._lastVisible?this.setMod($(e),"visibility","visible"):this.setMod($(e),"visibility","hidden")}.bind(this)),this._reflowSelect(this._lastVisible-1),this.setMod(this.elem("more"),"visibility","visible"),this._checkReflow())},_reflowSelect:function(t){var e=[{item:"option",value:-1,content:this.params.moreLabel,selected:-1===this._selectedIndex}];this.elem("radio:gt("+t+")").each(function(i,n){var o=$(n);e.push({item:"option",value:t+i+1,content:o.text(),selected:this.hasMod(o,"checked")})}.bind(this)),this._select.setOptions(e)},_getItemWidth:function(t){return this._itemWidths=this.itemWidths||[],this._itemWidths[t]||(this._itemWidths[t]=this.elem("radio:eq("+t+")").outerWidth())},_getTotalWidth:function(){return this._totalWidth||(this._totalWidth=0,this.elem("radio").each(function(t){this._totalWidth+=this._getItemWidth(t)}.bind(this))),this._totalWidth},_checkReflow:function(){for(var t=this.elem("more").outerWidth(),e=0;e<this._lastVisible;e++)t+=this._getItemWidth(e);t>this.domElem.width()&&this.reflow()},_getLastVisible:function(t){var e,i=this.elem("radio"),n=0;for(e=0;e<i.length;e++)if((n+=this._getItemWidth(e))+this._calcMoreWidth(e)>t)return e},_calcMoreWidth:function(t){var e=this.elem("radio").slice(t+1).sort(function(t,e){return 1/$(t).text().length-1/$(e).text().length}),i=$(e[0]).text();return Math.max(this.elem("more").outerWidth(),this._getMoreClone().text(i).outerWidth())},_getMoreClone:function(){return this._moreClone||(this._moreClone=this.elem("more").clone().hide().appendTo("body"))}}),BEM.DOM.decl({name:"button",modName:"pseudo",modVal:"yes"},{_onClick:function(t){this.__base.apply(this,arguments),this._href&&t.preventDefault()}}),BEM.DOM.decl("fade",{onSetMod:{progress:function(t,e){this.getSpin().setMod(t,e)}},getSpin:function(){return this._spin||(this._spin=this.findBlockInside("spin2")),this._spin},show:function(){this.setMod("progress","yes")},hide:function(){this.delMod("progress")}}),function(t){var e=t.innerWidth>t.innerHeight,i=t.innerWidth,n=$.throttle(function(){var n=t.innerWidth,o=t.innerHeight,s=n>o;s!==e&&n!==i&&($(t).trigger("orientchange",{landscape:s,width:n,height:o}),e=s,i=n)},400);BEM.DOM.win.bind("resize",n),BEM.DOM.decl("i-ua",{onSetMod:{js:{inited:function(){this.bindToWin("orientchange",this._onOrientChange,this).__base.apply(this,arguments)}}},_onOrientChange:function(t,e){var i=this.__self,n=document.documentElement,o=n.className,s="i-ua_orient_"+(e.landscape?"landscape":"portrait");-1===o.indexOf(s)&&(n.className=o.replace(/\bi-ua_orient_\w+\b/,s)),i.width=e.width,i.height=e.height,i.landscape=e.landscape}},{width:t.innerWidth,height:t.innerHeight,landscape:e})}(window),BEM.DOM.decl("serp-header",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.__self.instance=this}}}},{get:function(){if(this.instance)return this.instance;var t=$(this.buildSelector());return t.length?(this.instance=t.bem(this.getName()),this.instance):void 0},replacePlaceholder:function(t,e){var i=e.domElem,n=this.get(),o=n&&n.elem(t+"-container");o&&(o.replaceWith(i.detach()),e.delMod("hidden"))}}),BEM.DOM.decl("serp-header",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.__self.searchBlock=this.findBlockInside("search2")}}}},{getSearch:function(){return this.searchBlock||$(".search2").length&&$(".search2").bem("search2")}}),BEM.DOM.decl("header",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindToWin("resize",$.throttle(this._onResize,150)),this._collapseUserIfNeeded()}}},_onResize:function(){this._collapseUserIfNeeded()},_onUserUpdatesName:function(){this._collapseBreakpoint=null,this._collapseUserIfNeeded()},_collapseUserIfNeeded:function(){var t=this._getUser();t&&t.toggleCollapsed(this._getCollapseBreakpoint()>=this.elem("nav").width())},_getCollapseBreakpoint:function(){return this._collapseBreakpoint||(this._collapseBreakpoint=this._getNavItemsWidth()+this.__self.NAV_ITEMS_GAP),this._collapseBreakpoint},_getNavItemsWidth:function(){var t=0;return this.elem("nav").children().each(function(){t+=$(this).outerWidth(!0)}),t},_getUser:function(){return this._user?this._user._isDestructing&&(this._collapseBreakpoint=null,this._user=this.findBlockInside("user")):(this._user=this.findBlockInside("user"),this._user&&this._user.on("update-name",this._onUserUpdatesName,this)),this._user}},{NAV_ITEMS_GAP:10,live:!1}),BEM.DOM.decl("header",{},{live:function(){return this.liveBindTo("action","click",function(t){t.preventDefault()}),this.__base.apply(this,arguments)}}),BEM.DOM.decl("header",{onSetMod:{js:{inited:function(){this.__self.instance=this}}}},{get:function(){return this.instance||(this.instance=$(this.buildSelector()).bem(this.getName()))},replacePlaceholder:function(t,e){var i=e.domElem,n=this.get().elem(t+"-container");n&&(n.replaceWith(i.detach()),e.delMod("hidden"))}}),BEM.DOM.decl("header",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.__self.searchBlock=this.findBlockInside("search2"),this._syncState().bindEvents()}}},_syncState:function(){var t=this.getFiltersCount();return t>0&&this._isFiltersCountHidden()&&(this.params.filtersAutoopen=t),this},_getAdvanced:function(){return this._advancedSearch||(this._advancedSearch=this.findBlockInside("advanced-search"))},getHeight:function(){return this.domElem.height()},_getNavItemsWidth:function(){var t,e=0;return this.elem("nav").children().each(function(){(t=$(this)).is(":visible")&&(e+=t.outerWidth(!0))}),e}},{getSearch:function(){return this.searchBlock||$(".search2").length&&$(".search2").bem("search2")}}),BEM.DOM.decl("header",{bindEvents:function(){return this.__base.apply(this,arguments),BEM.blocks["advanced-search"].on("countUpdate",this._onCountUpdate,this),this},_onCountUpdate:function(t,e){this.setFiltersCount(e.count)},_isFiltersCountHidden:function(){return this.hasMod(this.getFiltersCountElem(),"hidden","yes")},setFiltersCount:function(t){return this.getFiltersCountElem().text(t),this.setMod(this.getFiltersCountElem(),"hidden",t?"":"yes")},getFiltersCount:function(){return Number(this.getFiltersCountElem().text())},getFiltersCountElem:function(){return this._filtersCount||(this._filtersCount=this.elem("filters-count"))}}),BEM.DOM.decl("header",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._openedSlide=null}}},onElemSetMod:{action:{pressed:{"":function(t){this.elemParams(t).releaseByDocumentScroll&&this.unbindFromWin("scroll"),this._openedSlide&&(this._openedSlide.unbindFromDoc("pointerclick"),this._openedSlide=null),this.unbindFromWin("closeUnder"),t.attr({"aria-pressed":!1,"aria-expanded":!1}),t.trigger("released")},yes:function(t,e){var i=this;i.delMod(this.elem("action"),e).bindToWin("closeUnder",function(){i.delMod(t,e)}),i.elemParams(t).releaseByHeaderOutsideClick&&i.afterCurrentEvent(function(){if(i.domElem){var e=i._openedSlide=i._getOpenedSlide(t);e&&i._slideOnClick(e,t)}}),i.elemParams(t).releaseByDocumentScroll&&this.bindToWin("scroll",function(){i._onScroll(t)}),t.attr({"aria-pressed":!0,"aria-expanded":!0}),t.trigger("pressed")}}}},_getOpenedSlide:function(t){var e,i=this.buildSelector("action","type",this.getMod(t,"type"));return this.findBlocksInside("slide").some(function(t){return!(!t.params.rel||t.params.rel[0].elem!==i)&&(e=t,!0)}),e},_onScroll:function(t){this.delMod(t,"pressed")},_slideOnClick:function(t,e){var i=this;t.bindToDoc("pointerclick",function(n){var o=$(n.target);t.containsDomElem(o)||o.is(i.elem("main"))||o.is(i.elem("action-i"))||i.delMod(e,"pressed")})},_onActionClick:function(t){t.preventDefault(),BEM.blocks["i-ua"].opera<13&&t.stopPropagation(),this.toggleMod(t.data.domElem,"pressed","yes","")},_onActionKeyup:function(t){var e=BEM.blocks["i-ua"].opera<13,i=BEM.blocks.keycodes;(!e&&t.keyCode===i.ENTER||t.keyCode===i.SPACE)&&(t.preventDefault(),this.toggleMod(t.data.domElem,"pressed","yes",""))},destruct:function(){this._openedSlide&&(this._openedSlide.unbindFromDoc("pointerclick"),this._openedSlide=null),this.__base.apply(this,arguments)}},{live:function(){return this.liveBindTo("action","pointerclick",function(t){this._onActionClick(t)}).liveBindTo("action","keyup",function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||this._onActionKeyup(t)}),this.__base()}}),BEM.DOM.decl("paranja",{onSetMod:{js:{inited:function(){[].concat(this.params.rel||[]).forEach(function(t){$(t.elem||this.domElem).on(t.event,this[t.method].bind(this))},this),this.bindTo("pointerclick",function(){this.trigger("click")})}},state:{open:function(){this.trigger("open")},close:function(){this.trigger("close")}}},open:function(t){this.setMod("state","open")},close:function(t){this.setMod("state","close")}},{live:!1}),BEM.DOM.decl("i-services",{getServiceUrl:function(t,e){var i=this.params[t],n="";if(!i)return"";i.search&&e&&(n=i.search+encodeURIComponent(e));var o=i.params||"";return n?n+=o:n=i.baseUrl&&-1===i.baseUrl.indexOf("?")?o?"/?"+o.replace(/^\&/,""):"/":"all"===t?o.replace(/^\&/,""):o,i.baseUrl+n}},{getInstance:function(){return this._instance||(this._instance=$(this.buildSelector()).bem(this.getName())),this._instance},getServiceUrl:function(t,e){return this.getInstance().getServiceUrl(t,e)},live:!0}),BEM.DOM.decl("tabs-navigation",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindToWin("resize",this._setNavigationRegionWidth)}}},destruct:function(){this.unbindFromWin("resize"),this.__base.apply(this,arguments)},_getElemWidth:function(t){var e=getComputedStyle(t);return t.getBoundingClientRect().width+(parseFloat(e.marginLeft)||0)+(parseFloat(e.marginRight)||0)},_setNavigationRegionWidth:function(){var t=this.elem("tab","name","all")[0];if(t){for(var e=0,i=this._getElemWidth(t),n=this.elem("tab"),o=Math.max(document.body.clientWidth-(parseFloat(getComputedStyle(this.domElem[0]).paddingLeft)||0),this._getElemWidth(n[0])+i),s=0;s<n.length-1;s++){var r=this._getElemWidth(n[s]);if(!(e+r+i<=o))break;e+=r}var a=this.elem("content")[0].style,c=Math.ceil(e)-e;a.paddingRight=i-c+"px",a.width=Math.ceil(e)+"px",t.style.position="absolute"}}},{live:function(){this.liveInitOnChannelEvent("i-bem","init",function(){setTimeout(this._setNavigationRegionWidth.bind(this),200)})}}),BEM.DOM.decl("search2",{onSetMod:{js:{inited:function(){this.findBlocks().bindEvents()}}},_onInputChange:function(){BEM.blocks["i-global"].setParams({searchInputText:BEM.blocks.utils.escape(this._input.val())})},reset:function(){return this._input.reset(),this},focus:function(){return this._input.elem("control").focus(),this},findBlocks:function(){return this._location=BEM.blocks.location.getInstance(),this._input=this.findBlockInside("input"),this},bindEvents:function(){return this._location.on("change",this._onChange,this),this._input.on("change",this._onInputChange,this),this._input.on("focus",this._onInputFocus,this),BEM.blocks["b-page"].on("search:input:update",this.updateSearchPage,this),this.bindTo("submit",this._onSubmit),this},_onInputFocus:function(){this.trigger("input:focus")},_onSubmit:function(t,e){this.submit(t,e),t.preventDefault()},submit:function(t,e){var i=BEM.blocks["i-global"].getFlag("suggest_context_redirect"),n=BEM.blocks["i-global"].param("tld");i&&"ru"===n?this._checkRedirectURL(t,i):(this.val()!==BEM.blocks.uri.getParamValue("text")&&this.trigger("search:query:changed"),this._ajaxSubmit(t,e&&e.cgiQuerySource))},_ajaxSubmit:function(t,e){this._location.change({url:this._buildUrl(e)},t)},_checkRedirectURL:function(t,e){var i=BEM.blocks["i-global"].param("id"),n=this._input.val(),o="images"===i?40:197,s="images"===i?72863:72894,r=2===e?"control-":"",a=this;$.ajax({url:"//yandex.ru/suggest/suggest-redir",data:{current:i,part:n,lr:BEM.blocks["i-global"].param("lr")},dataType:"json",context:this,cache:!1}).then(function(t,e,i){var n=BEM.blocks.utils.get(t,"redirect_info.url"),o=$.Deferred();return n?o.resolve(n):o.reject(i,"no"),o.promise()}).then(function(c){cp({pid:o,cid:s,path:r+"yes",text:n,service:i},{href:c}),2===e?a._ajaxSubmit(t):location.href=c},function(e,c){cp({pid:o,cid:s,path:r+c,text:n,service:i}),a._ajaxSubmit(t)})},_buildUrl:function(t){var e=this.getAdvancedSearch();return this.domElem.attr("action")+"?"+this.domElem.serialize()+(e?"&"+e.getParams():"")+(t?"&query_source="+t:"")},_onChange:function(t,e){switch(this.__self.win.scrollTop(0),e.block){case"b-page_type_index":case"b-page_type_favorites":this.updateIndexPage(t,e);break;case"b-page_type_search":this.updateSearchPage(t,e)}},updateIndexPage:function(){this.reset().focus()},updateSearchPage:function(t,e){this.fill(e.params.text),this._input._updateClear(),this._input.delMod("focused")},fill:function(t){var e=Array.isArray(t)?t[0]:t;return this._input&&this._input.updateData(e),this},getAdvancedSearch:function(){if(!this._advancedSearch){var t=$(".advanced-search");this._advancedSearch=!BEM.blocks.utils.isEmpty(t)&&t.bem("advanced-search")}return this._advancedSearch},val:function(){return this._input.val()}}),BEM.DOM.decl("search2",{_onSubmit:function(t){return"index"===BEM.blocks["i-global"].param("page")&&this._isEmptyVal()?(t.preventDefault(),!1):this.__base.apply(this,arguments)},_needMordaRedirect:function(){return this._isEmptyVal()},_isEmptyVal:function(){return!this.val().replace(/\s/g,"")},_buildUrl:function(){var t,e=BEM.blocks["i-global"];return this._needMordaRedirect()?e.param("router").index:(t=this.__base.apply(this,arguments),"index"===e.param("page")?t+="&path=main":t)}}),BEM.DOM.decl("search2",{},{getInstance:function(){var t;return void 0===this._instance&&(t=$(this.buildSelector()),this._instance=t.length?t.bem(this.getName()):null),this._instance}}),BEM.DOM.decl("search2",{bindEvents:function(){return this.__base.apply(this,arguments),BEM.channel("mini-suggest").on({submit:this._onSubmit,change:this._onInputChange},this),this},destruct:function(){BEM.channel("mini-suggest").un({submit:this._onSubmit,change:this._onInputChange},this),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"search2"},{_needMordaRedirect:function(t,e){return!1},_onSubmit:function(t,e){if(!BEM.blocks["i-global"].param("mobile")&&!BEM.blocks["i-global"].param("tablet")&&"preview"!==BEM.blocks["i-global"].param("page"))return this.__base.apply(this,arguments)}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this._val=this.elem("control").val()}},disabled:{"*":function(t,e){this.elem("control").prop("disabled",e)},yes:function(){this.delMod("focused")}},focused:function(t,e){if(this.hasMod("disabled"))return!1;e?this._focused||this._focus():this._focused&&this._blur(),this.afterCurrentEvent(function(){this.domElem&&this.trigger(e?"focus":"blur")})}},isDisabled:function(){return this.hasMod("disabled")},val:function(t,e){var i=void 0!==t,n=this.elem("control");return t=i?null===t?"":t.toString():n.val(),this._val!==t&&(this._val=t,n.val()!==t&&n.val(t),this.trigger("change",e)),i?this:t},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},getSelectionEnd:function(){var t=this.elem("control")[0],e=0;if("number"==typeof t.selectionEnd)e=t.selectionEnd;else{var i=document.selection.createRange();if(i&&i.parentElement()===t){var n=t.value.length,o=t.createTextRange();o.moveToBookmark(i.getBookmark());var s=t.createTextRange();s.collapse(!1),e=o.compareEndPoints("EndToEnd",s)>-1?n:-o.moveEnd("character",-n)}}return e},_onFocus:function(){if(parseInt(BEM.blocks["i-ua"].ios,10)>=8&&!this.hasMod("type","textarea")){var t=this.elem("control")[0];t.selectionStart===t.value.length&&(t.scrollLeft=t.scrollWidth)}return this._focused=!0,this.setMod("focused","yes")},_onBlur:function(){return this._returnFocus?(this.afterCurrentEvent(function(){this.domElem&&this._focus()}),this):this.hasMod(this.elem("clear"),"pressed")?this:(this._focused=!1,this.delMod("focused"))},_focus:function(){if(this.hasMod("disabled","yes"))return!1;this.elem("control").focus()},_blur:function(){this._returnFocus=!1,this.elem("control").blur()},_updateVal:function(){this.val(this.elem("control").val())},destruct:function(){this._blur(),this.__base.apply(this,arguments)}},{live:function(){this.liveBindTo("control","focusin focusout",function(t){this["focusin"===t.type?"_onFocus":"_onBlur"](t)}),this.liveBindTo("control","input",function(){this._updateVal()})}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=this.elem("control"),e=$.dom.getActiveElement(),i=this.params.autoFocus&&!e.is("input, textarea");(e[0]===t[0]||i)&&(this.setMod("focused","yes")._focused=!0),this.params.shortcut&&this.bindToDoc("keydown",function(t){t.ctrlKey&&t.which===BEM.blocks.keycodes.UP&&!$(t.target).is("input, textarea")&&this.setMod("focused","yes")})}}},_focus:function(){if(!1===this.__base())return!1;var t=this.elem("control")[0];if(t.createTextRange&&!t.selectionStart){var e=t.createTextRange();e.move("character",t.value.length),e.select()}},destruct:function(){this.params.shortcut&&this.unbindFromDoc("keydown"),this.__base.apply(this,arguments)},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")}},{live:function(){return this.liveBindTo("box","pointerover pointerout",function(t){this.hasMod("disabled")||this.elem("box")[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),this.liveBindTo("control","dragenter"),this.__base()}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.on("change",this._updateClear)._updateClear()}}},_onClearClick:function(){return this.trigger("clear"),this.removeInsets&&this.removeInsets(),this.clearInput({source:"clear"})._focus()},clearInput:function(t){return this.val("",t),this},_updateClear:function(){return this.toggleMod(this.elem("clear"),"visibility","visible",Boolean(this._val))}},{live:function(){return this.liveBindTo("clear","pointerpress",function(t){this.setMod(this.elem("clear"),"pressed","yes")}).liveBindTo("clear","pointerover",function(t){this.setMod(this.elem("clear"),"hovered","yes")}).liveBindTo("clear","pointerout",function(t){this.delMod(this.elem("clear"),"hovered")}).liveBindTo("clear","pointerclick",function(){this.delMod(this.elem("clear"),"pressed"),this._onClearClick()}).liveBindTo("control","paste",function(){this.setMod(this.elem("clear"),"visibility","visible")}),this.__base()}}),BEM.DOM.decl({name:"input",modName:"autofocus",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindToDoc("keydown",this._autoFocusBind)}}},_autoFocusBind:function(t){if(!this.hasMod("focused","yes")&&!this.elem("control").attr("disabled")){var e;try{e=document.activeElement.tagName.toLowerCase()}catch(t){}if(function(t){if(function(t){var e=t.charCode||t.keyCode||t.which||0;return t.ctrlKey||t.altKey||t.metaKey||16===e||8===e||20===e||9===e||e>=32&&e<=40||e>=112&&e<=123||27===e||45===e||46===e||13===e||e>=91&&e<=93}(t))return!1;var e=t.charCode||t.keyCode||t.which||0;if(e>=48&&e<=57)return!0;if(e>=96&&e<=105)return!0;if(e>=65&&e<=90||e>=1025&&e<=1071)return!0;var i=t.key||"";return"хёэжбю".indexOf(i.toLowerCase())>=0}(t)&&"input"!==e&&"textarea"!==e){var i=this.elem("control")[0],n=this.val();if(n.length>0&&" "!==n.slice(-1)&&(n+=" ",this.val(n)),i.createTextRange){var o=i.createTextRange();o.collapse(!1),o.select()}else i.setSelectionRange&&i.setSelectionRange(n.length,n.length);this.setMod("focused","yes")}}}}),BEM.DOM.decl({name:"input",modName:"settings-inside",modVal:"yes"},{onSetMod:{js:{inited:function(){this._page=this.findBlockOutside("b-page"),this._page.on("change",this.onPageChange,this),this.__base.apply(this,arguments)}}},destruct:function(){this._page.un("change",this.onPageChange,this),this.__base.apply(this,arguments)},onPageChange:function(t,e){"search"!==e.type&&this.delMod(this.elem("settings"),"type","active")},onSettingsClick:function(){var t=this.hasMod(this.elem("settings"),"type","active");this.setMod(this.elem("settings"),"clicked","yes"),this.elem("control").blur(),this.toggleMod(this.elem("settings"),"type","","active",t),this.trigger("settings-clicked",t)},_onBoxClear:function(){this.hasMod(this.elem("settings"),"clicked","yes")?this.delMod(this.elem("settings"),"clicked"):this.__base.apply(this,arguments)}},{live:function(){return this.liveBindTo("settings","pointerclick",function(t){t.preventDefault(),this.onSettingsClick()}),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"input",modName:"theme",modVal:"websearch2"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.on("change",this._updateState)._updateState()}}},_updateState:function(){return this.toggleMod("empty",!0,!this._val)}}),BEM.DOM.decl({block:"input",modName:"search",modVal:"yes"},{reset:function(){this.updateData("")},updateData:function(t){this.val(t);var e=Ya.SUGGEST&&Ya.SUGGEST.main;e&&e._onInput()}}),BEM.DOM.decl({block:"header",modName:"type",modVal:"advanced"},{getHeight:function(){if(this._height)return this._height;var t=this._getAdvanced();return this._height=this.domElem.height(),t&&(this._height+=t.domElem.height()-1),this._height}}),BEM.DOM.decl("advanced-search",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._vals=[],this.findBlocks().bindEvents(),this.__self.AVAILABLE_CONTROLS.forEach(this._bindChangeCallbacks.bind(this))}}},findBlocks:function(){return this.page=this.findBlockOutside("b-page"),this.dropdowns=this.findBlocksInside({block:"dropdown",modName:"advanced",modVal:"yes"}),this.checkboxes=this.findBlocksInside({block:"check-button",modName:"advanced",modVal:"yes"}),this.filters=this.dropdowns.concat(this.checkboxes),this._resetButton=this.elem("action","type","reset"),this},show:function(){this.setMod("visible","yes")},hide:function(){this.delMod("visible").reset()},_bindChangeCallbacks:function(t){this.findBlocksInside({blockName:t,modName:"advanced",modVal:"yes"}).forEach(function(t){var e=t.getMod("type");this.__self.CONTROL_CHANGE_CALLBACK[e]&&t.on("change",this._onControlChange,this)}.bind(this))},_onControlChange:function(t){this.__self.CONTROL_CHANGE_CALLBACK[t.block.getMod("type")].call(this,t.block),this._sendBlockstatCounter(t.block)},_sendBlockstatCounter:function(t){var e=t.getMod("type"),i=this.params.counters[e];if(i){var n=(t.isChecked?t.isChecked():t.val())?"on":"off";w(this.domElem,i[n])}},updateFilters:function(t,e){this._removeFiltersChangeListeners();var i=e.params.filters;this.dropdowns.forEach(function(t){this.updateDropdown(t,i)},this),this.checkboxes.forEach(function(t){this.updateCheckButton(t,i)},this),this._addFiltersChangeListeners()},_onTouchMove:function(){this.dropdowns.forEach(function(t){t.hide()})},_addFiltersChangeListeners:function(){this.filters.forEach(function(t){t.on("change",this.submit,this)},this)},_removeFiltersChangeListeners:function(){this.filters.forEach(function(t){t.un("change",this.submit,this)},this)},bindEvents:function(){return BEM.blocks["b-page"].on("touchmove",this._onTouchMove,this),BEM.blocks.search2.on("search:query:changed",this._resetMisspell,this),this.bindTo(this.domElem,"submit",this._onSubmit),this.filters.forEach(this._initSearchControl.bind(this)),this.afterCurrentEvent(function(){this._addFiltersChangeListeners(),this._updateResetButton()}),this.dropdowns.forEach(function(t){t.on("change",this._onDropdownItemChange,this)},this),this.bindTo(this._resetButton,"click",this._onResetClick),this.page.on("change",this._onPageChange,this),this},unbindEvents:function(){return BEM.blocks["b-page"].un("touchmove",this._onTouchMove,this),BEM.blocks.search2.un("search:query:changed",this._resetMisspell,this),this.afterCurrentEvent(function(){this._removeFiltersChangeListeners(),this._updateResetButton()}),this.dropdowns.forEach(function(t){t.un("change",this._onDropdownItemChange,this)},this),this.page.un("change",this._onPageChange,this),this},destruct:function(){this.unbindEvents(),this.__base.apply(this,arguments)},_onSubmit:function(){return this.submit(),!1},_onResetClick:function(){this.reset()},_initSearchControl:function(t,e){this._vals.push(t.val()),t.on("change silentChange",function(t){this._vals[e]=t.block.val(),this._updateResetButton()},this)},_onDropdownItemChange:function(t){var e=t.block;t.target.hide(),e.setMod("applied",e.val()?"yes":"")},createMisspell:function(){var t=BEMHTML.apply([{block:"advanced-search",elem:"misspell-hidden-input",tag:"input",attrs:{type:"hidden",name:"noreask",value:1}},this._hasParam("nomisspell")?{block:"advanced-search",elem:"misspell-hidden-input",tag:"input",attrs:{type:"hidden",name:"nomisspell",value:1}}:""]);BEM.DOM.append(this.domElem,t)},_resetMisspell:function(){this.findElem("misspell-hidden-input").remove()},updateDropdown:function(t,e){t._control.val(e[t.params.name]||""),t.trigger("silentChange")},updateCheckButton:function(t,e){e[t.params.name]?t.setMod("checked","yes"):t.delMod("checked")},_onPageChange:function(t,e){"search"===e.type||this.reset()},isDefaultState:function(){return!this._vals.some(function(t){return t})},submit:function(t){if(t&&t.block&&this.__self.CONTROL_SUBMIT_CALLBACK[t.block.getMod("type")]&&this.__self.CONTROL_SUBMIT_CALLBACK[t.block.getMod("type")].call(this,t.block),this.page.hasMod("type","search")){var e=this.page.findBlockInside("search2");this._needCreateMisspell()&&this.createMisspell(),this._checkPreventAfter(t)||this.afterCurrentEvent(function(){this.afterCurrentEvent(function(){e.domElem.submit()})})}},_needCreateMisspell:function(){return BEM.blocks.utils.isEmpty(this.findElem("misspell-hidden-input"))&&(this._hasParam("nomisspell")||this._hasParam("noreask"))},_hasParam:function(t){return"1"===BEM.blocks.uri.getParamValue(t)},reset:function(){this.isDefaultState()||(this._disableCounters(),this.controlsToReset().forEach(function(t){t.reset()}),this.findBlocksInside("input").forEach(function(t){t.val("")}),this.afterCurrentEvent(function(){this.submit(),this._updateResetButton()}),this._enableCounters())},controlsToReset:function(){return this.filters},_updateResetButton:function(){this._updateSelectedCounter(),this.setMod(this._resetButton,"hidden",this.isDefaultState()?"yes":"")},_updateSelectedCounter:function(){var t=this._vals.filter(function(t){return t&&""!==t});this.trigger("countUpdate",{count:t.length})},_enableCounters:function(){this.filters.forEach(function(t){t.enableCounters()})},_disableCounters:function(){this.filters.forEach(function(t){t.disableCounters()})},getParams:function(){return this.domElem.serialize().replace(/&?[^&?]+=(?=(?:&|$))/g,"").replace(/^&/,"")},_checkPreventAfter:function(){return!1}},{live:!0,_sendCounter:function(t){var e=BEM.blocks["i-global"].param("tld").replace(".","-");cp({cid:72245,path:[e].concat(t).join(".")})},AVAILABLE_CONTROLS:["dropdown","check-button"],CONTROL_CHANGE_CALLBACK:{duration:function(t){var e=t.val()?t.val()[0].val:"all";this.__self._sendCounter(["duration",e])},fresh:function(t){this.__self._sendCounter(["within",t.isChecked()?"week":"all"])},hd:function(t){this.__self._sendCounter(["hd",t.isChecked()?"on":"off"])},vtasix:function(t){this.__self._sendCounter(["vtasix",t.isChecked()?"on":"off"])}},CONTROL_SUBMIT_CALLBACK:{vtasix:function(t){t.isChecked()?BEM.blocks["i-url-controller"].addPassedParams("vtasix"):BEM.blocks["i-url-controller"].delPassedParams("vtasix")}}}),BEM.DOM.decl("dropdown",{onSetMod:{js:{inited:function(){var t=this,e=t.params,i=t.findBlockOn(t.elem(e.popupElem),"popup");t._popup=i,i.on("show",t._onPopupShow,t).on("hide",t._onPopupHide,t),e.popupMethods.forEach(function(e){t[e]=i[e].bind(i)}),t.elem("switcher").attr({"aria-haspopup":!0,"aria-expanded":!1})}},action:function(t,e){var i="open"===e;this.elem("switcher").attr("aria-expanded",i),this._getButton()&&this._getButton().toggleMod("arrow","up","down",i)}},getPopup:function(){return this._popup},_getButton:function(){return this._button||(this._button=this.findBlockInside("switcher","button")),this._button},_toggle:function(){["button","link"].some(function(t){var e=this.findBlockOn("switcher",t);return e&&e.hasMod("disabled")},this)&&!this._popup.isShown()||this._popup.toggle(this.elem("switcher"))},_onSwitcherClick:function(){this._toggle()},_onSwitcherKeyUp:function(t){if(!(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey)){var e=this.elem("switcher")[0].tagName.toLowerCase(),i=BEM.blocks.keycodes;"button"!==e&&("a"!==e&&t.keyCode===i.ENTER||t.keyCode===i.SPACE)&&(t.preventDefault(),this._toggle())}},_onPopupShow:function(){this.setMod("action","open").trigger("show")},_onPopupHide:function(){this.setMod("action","closed").trigger("hide")},destruct:function(){this._popup.un("show",this._onPopupShow,this).un("hide",this._onPopupHide,this),this._popup.domElem&&BEM.DOM.destruct(this._popup.domElem),this.__base.apply(this,arguments)},getDefaultParams:function(){return{popupElem:"popup",popupMethods:["toggle","show","hide","setContent"]}}},{live:function(){this.liveBindTo("switcher","pointerclick",function(t){this._onSwitcherClick(t)}).liveBindTo("switcher","keyup",function(t){this._onSwitcherKeyUp(t)})}}),BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base(),this._tailPos={}}}},_calcTailPos:function(t){var e=t.to,i=this._positions[t.key],n=t.tail.axis,o={};return"top"===e||"bottom"===e?o.left=this._calcTailLeft(n,i):"left"!==e&&"right"!==e||(o.top=this._calcTailTop(n,i)),o},_calcTailTop:function(t,e){var i=0,n=this.getOwnerSize(),o=this.getOwnerPos(),s=this.params.tail.width,r=this.getPopupSize(),a=r.height,c=o.top-e.top,l=e.top+r.height-(o.top+n.height);return c>0&&(i+=c,a-=c),l>0&&(a-=l),"middle"===t?i+=(a-=s)/2:"bottom"===t&&(i+=a-=s),i<0&&(i=0),i},_calcTailLeft:function(t,e){var i=0,n=this.getOwnerSize(),o=this.getOwnerPos(),s=this.params.tail.width,r=this.getPopupSize(),a=o.left-e.left,c=r.width,l=e.left+r.width-(o.left+n.width);return a>0&&(i+=a,c-=a),l>0&&(c-=l),"center"===t?i+=(c-=s)/2:"right"===t&&(i+=c-=s),i},_calcOffsetByTail:function(t){var e=this.params.tail.height,i={};switch(t.to){case"top":i={top:-e};break;case"bottom":i={top:e};break;case"right":i={left:e};break;case"left":i={left:-e}}return i},_calcTailOffset:function(t){var e={},i=t.to,n=t.tail,o=n.offset,s=n.axis;return!!o&&("top"===i||"bottom"===i?(e.left=0,"left"===s?e.left+=o.left:"center"===s?(o.left&&(e.left+=o.left),o.right&&(e.left-=o.right)):"right"===s&&(e.left-=o.right)):"left"!==i&&"right"!==i||(e.top=0,"top"===s?e.top+=o.top:"middle"===s?(o.top&&(e.top+=o.top),o.bottom&&(e.top-=o.bottom)):"bottom"===s&&(e.top-=o.bottom)),e)},_resetTailPos:function(t){return t?this._tailPos[t]=null:this._tailPos={},this},_pushTailPos:function(t,e){return this._pushPosTo(this._tailPos,t,e),this}}),BEM.DOM.decl({block:"checkbox",baseBlock:"control"},{onSetMod:{js:{inited:function(){var t=this.elem("control");this.toggleMod("checked","yes",t.prop("checked")),this.toggleMod("focused","yes",t.isFocused())}},hovered:{yes:function(){return!this.hasMod("disabled")}},pressed:{yes:function(){return!this.hasMod("disabled")}},checked:function(t,e){var i=this.elem("control");i.prop("checked",e),i.attr("aria-checked","mixed"===i.attr("aria-checked")?"mixed":Boolean(e)),this.trigger("change",{checked:Boolean(e)})},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered").delMod("pressed")}}},isDisabled:function(){return this.hasMod("disabled")},isChecked:function(){return Boolean(this.elem("control").prop("checked"))},toggle:function(){this.toggleMod("checked","yes")},val:function(t){var e=this.elem("control");return void 0===t?e.val():(e.val(t),this)},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},_onChange:function(t){this.toggleMod("checked","yes",t.target.checked)},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onClick:function(t){var e=this.elem("label"),i=t.target;this.domElem[0]===i&&this._onChange(t),i!==e[0]&&this.trigger("click",{domEvent:t}),this.setMod("focused","yes")},_onKeydown:function(t){t.keyCode===BEM.blocks.keycodes.SPACE&&this.setMod("pressed","yes")},_onKeyup:function(t){t.keyCode===BEM.blocks.keycodes.SPACE&&this.delMod("pressed")}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.isDisabled()||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}).liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}).liveBindTo("pointerclick",function(t){this.hasMod("disabled")||this._onClick(t)}).liveBindTo("control","keydown",function(t){this.hasMod("disabled")||this._onKeydown(t)}).liveBindTo("control","keyup",function(t){this.hasMod("disabled")||this._onKeyup(t)}).liveBindTo("control","change",function(t){this._onChange(t)}),this.__base()}}),BEM.DOM.decl({block:"check-button",baseBlock:"checkbox"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments)}},checked:function(t,e){if(!1===this.__base.apply(this,arguments))return!1;this.elem("control").attr("aria-pressed",Boolean(e))}}}),BEM.DOM.decl({block:"check-button",modName:"advanced",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindEvents().initButton()}},checked:function(t,e){this.__base.apply(this,arguments),this._buttonProcess(e?this.params.values:"")}},bindEvents:function(){return this.on("change",this._onAdvancedClick),this},_onAdvancedClick:function(){this.delMod("focused")},_generateHidden:function(t,e){return BEMHTML.apply({block:"check-button",mods:{advanced:"yes"},elem:"hidden-value",tag:"input",attrs:{type:"hidden",name:t,value:e}})},initButton:function(){this._buttonProcess(this.val())},_buttonProcess:function(t){this.params.generateHidden&&(t===this.params.defaultValue?this.reset():this.val(t))},val:function(t){if(arguments.length){this.findElem("hidden-value").remove();for(var e=Object.keys(t),i=0,n=e.length;i<n;i++)this.domElem.append(this._generateHidden(e[i],t[e[i]]))}return this.isChecked()?this.params.values:""},reset:function(){"wp"!==BEM.blocks.utils.get(this.params,"state.field")&&this.findElem("hidden-value").remove(),this.delMod("checked")},enableCounters:function(){this._countersDisabled=!1},disableCounters:function(){this._countersDisabled=!0},getDefaultParams:function(){return $.extend(this.__base.apply(this,arguments),{generateHidden:!0})}}),BEM.DOM.decl({block:"dropdown",modName:"advanced",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._popup=this.findBlockInside("popup"),this._button=this.findBlockInside("button"),this._buttonText=this.findElem(this._button.domElem,"switcher-text"),0===this._buttonText.length&&(this._buttonText=this._button.elem("text")),this._buttonDefaultTitle=this._buttonText.text(),this._buttonIcon=this.findElem(this._button.domElem,"icon"),this._initControl(),this._afterInit()}}},_initControl:function(){this._control=this.findBlockInside("radiobox"),this._control.on("change",function(t,e){this._radioboxProcess(e.current,t.target.val(),this._control.name()),this.trigger("change")},this)},_afterInit:function(){this._radioboxProcess(this._control.getCurrent(),this._control.val(),this._control.name())},_buildHidden:function(t,e){return BEMHTML.apply({block:"dropdown",mods:{advanced:"yes"},elem:"hidden-value",name:e,value:t})},_radioboxProcess:function(t,e){var i=this.findElem(t,"text").text(),n=Number(e)!==this.params.defaultValue?i:this._buttonDefaultTitle;this._buttonText.empty().append(n),this.params.withIcons&&this.setMod(this._buttonIcon,"type",this.params.withIcons[e]),this._generateHidden()},_generateHidden:function(){if(this.params.generateHidden&&!this.findBlockInside("popup")){this.findElem("hidden-value").remove();var t=this._control.val();t!==this.params.defaultValue&&this.domElem.append(this._buildHidden(t,this._control.name()))}},val:function(){if(this._control.val()!==this.params.defaultValue)return[{name:this.params.name,val:this._control.val()}]},reset:function(){this.findElem("hidden-value").remove(),void 0!==this.params.defaultValue&&this._control.val(this.params.defaultValue)},getDefaultParams:function(){return Object.assign(this.__base.apply(this,arguments),{generateHidden:!0})},enableCounters:function(){this._countersDisabled=!1},disableCounters:function(){this._countersDisabled=!0}}),function(t,e){"use strict";t.ajaxPrefilter(function(t,e,i){if("iframe"===t.type.toLowerCase())return"iframe"}),t.ajaxTransport("iframe",function(e,i,n){var o,s,r=t(e.file),a="iframe-"+t.now(),c=t("<form></form>").hide().attr({action:e.url,target:a}),l=function(){s&&s.replaceWith(r),c.remove(),o.attr("src","javascript:false;").remove()};return e.dataTypes.shift(),t.each(i.data||{},function(e,i){t("<input />").attr({type:"hidden",name:e,value:i}).appendTo(c)}),r.length&&(s=r.after(r.clone().prop("disabled",!0)).next(),c.attr({enctype:"multipart/form-data",method:"POST"}),c.append(r)),{send:function(e,i){(o=t("<iframe></iframe>").hide().attr({name:a,id:a,src:"javascript:false;"})).one("load",function(){o.bind("load",function(){try{var t=this.contentWindow?this.contentWindow.document:this.contentDocument?this.contentDocument:this.document,e=t.documentElement?t.documentElement:t.body;i(200,e.innerHTML)}catch(t){i(500)}setTimeout(function(){l()},42)}),c[0].submit()}),t("body").append(c,o)},abort:function(){null!==o&&(o.unbind("load").attr("src","javascript:false;"),l())}}})}(jQuery),BEM.DOM.decl("safety-filter",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.delMod("hidden")}}}}),BEM.DOM.decl({block:"safety-filter",modName:"changable",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.blockInside("menu").on("change",function(t,e){this._onMenuChange(t,e)},this),this._currVal=NaN}},type:function(t,e){this._sendCounter(e),this._applyFilter(this._currVal)}},_onMenuChange:function(t,e){this._currVal=e.currVal,this.setMod("type",this.params.filters[e.currVal])},_sendCounter:function(t){var e=BEM.blocks["i-global"].param("tld").replace(".","-");cp({cid:72245,path:e+".safety."+t})},_applyFilter:function(t){var e=BEM.blocks["i-cookie"].get();BEM.DOM.blocks["b-page"].getInstance().showFade(),this.blockInside("dropdown2").delMod("opened"),1===t?e.ypRemove("sp"):e.yp({name:"sp",value:"family:"+t,expires:e.getExpirationDate(3650)}),requestAnimationFrame(function(){location.reload()})}}),BEM.DOM.decl({block:"dropdown2",modName:"switcher",modVal:"button2"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._tickerIcon=this.findBlockOn("arrow","icon")}},opened:function(t,e){this.__base.apply(this,arguments),this.hasMod("has-tick")&&this._tickerIcon.toggleMod("direction","top","bottom",Boolean(e))}}},{live:function(){return this.liveInitOnBlockInsideEvent("click","button2",function(t){this._onSwitcherClick(t)}),this.__base()}}),BEM.DOM.decl("my-video-button",{_onClick:function(t){var e=this.blockInside({block:"button2",modName:"type",modVal:"link"}),i=e.getUrl(),n=Math.floor(1e4*Math.random()).toString();if(!this.hasMod("to-collections")&&!BEM.blocks["i-global"].param("login"))return BEM.DOM.blocks["no-auth-popup"].getInstance().show(),void t.preventDefault();e.setUrl(BEM.blocks.uri.setParam(i,"ncrnd",n))},_setEnabled:function(t){var e=this.blockInside("button2");e&&e.toggleMod("disabled","","yes",t)}},{live:function(){return this.liveBindTo("pointerclick",function(t){this._onClick(t)}).liveInitOnBlockOutsideEvent("change","b-page",function(t,e){this._setEnabled("favorites"!==e.type)}),this.__base.apply(this,arguments)}}),BEM.DOM.decl("navigation-button",{_onPageChange:function(t,e){e.type!==this.params.page&&this._enableButton()},_enableButton:function(){this.blockInside("button2").delMod("disabled")}},{live:function(){return this.liveInitOnBlockOutsideEvent("change","b-page",function(t,e){this._onPageChange(t,e)}),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"navigation-button",modName:"hoverable",modVal:!0},{onSetMod:{js:{inited:function(){this.button=this.findBlockInside("button2"),this.tooltip=this.findBlockInside("tooltip"),this.tooltip.setOwner(this.button)}}},_onHover:function(t){var e,i,n=this.params;"mouseover"===t.type?(this.tooltip.setMod("shown","yes"),e=n["icon-active"].mod,i=n["icon-active"].modVal):(e=n["icon-default"].mod,i=n["icon-default"].modVal,this.tooltip.delMod("shown")),this.button.hasMod("disabled")||this.blockInside("icon").setMod(e,i)}},{live:function(){return this.liveBindTo("mouseover mouseout",function(t){this._onHover(t)}),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"navigation-button",modName:"selectable",modVal:!0},{_onPageChange:function(t,e){e.type!==this.params.page?this._enableButton():this._disableButton()},_enableButton:function(){this.__base.apply(this,arguments);var t=this.blockInside("icon");t&&t.setMod(this.params["icon-default"].mod,this.params["icon-default"].modVal)},_disableButton:function(){this.blockInside("button2").setMod("disabled","yes");var t=this.blockInside("icon");t&&t.setMod(this.params["icon-active"].mod,this.params["icon-active"].modVal)}}),BEM.DOM.decl({block:"safety-filter",modName:"hoverable",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.blockInside("tooltip").setOwner(this.blockInside("button2"))}}},_showTooltip:function(){this.hasMod("changable","yes")&&this.blockInside("dropdown2").hasMod("opened","yes")||this.blockInside("tooltip").setMod("shown","yes")},_hideTooltip:function(){this.blockInside("tooltip").delMod("shown")}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("pointerover",function(){this._showTooltip()}).liveBindTo("pointerout",function(){this._hideTooltip()}).liveInitOnBlockInsideEvent("beforeOpen","dropdown2",function(){this._hideTooltip()})}}),BEM.DOM.decl("tooltip",{onSetMod:{js:{inited:function(){this._popup=null,this._owner=null}},shown:{yes:function(){this._getPopup().setMod("visible","yes").unbindFromDoc("keydown")},"":function(){this._getPopup().delMod("visible")}}},getOwner:function(){return this._owner},setOwner:function(t){return this._owner=t,this._getPopup().setAnchor(t),this},setContent:function(t){return BEM.DOM.update(this.elem("content"),t),this.redraw()},redraw:function(){return this.hasMod("shown","yes")&&this._getPopup().redraw(),this},destruct:function(){this.delMod("shown"),this.__base.apply(this,arguments)},_getPopup:function(){return this._popup||(this._popup=this.findBlockOn("popup2").on("beforeOpen",this._onPopupShow,this).on("beforeClose",this._onPopupHide,this)),this._popup},_onPopupShow:function(){this.trigger("show")},_onPopupHide:function(){this.delMod("shown").trigger("hide")},_onClick:function(){this.trigger("click").delMod("shown")}},{live:function(){this.liveBindTo("click",function(){this._onClick()})}}),BEM.DOM.decl("tooltip",{syncVisible:function(){this.getOwner()&&this.hasMod("shown","yes")&&this._getPopup().syncVisible()}}),BEM.DOM.decl("tooltip",{show:function(){return this.setMod("shown","yes")},hide:function(){return this.delMod("shown")}}),BEM.DOM.decl("footer",{hide:function(){this.hasMod("hidden","yes")||(this.setMod("hidden","yes"),this.trigger("hide"))},transparent:function(){this.setMod("hidden","yes"),this.trigger("transparent")},show:function(){this.delMod("hidden"),this.trigger("show")}}),BEM.DOM.decl("footer",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),BEM.blocks["b-page"].on("change",this._onPageChange,this)}}},destruct:function(){BEM.blocks["b-page"].un("change",this._onPageChange,this),this.__base.apply(this,arguments)},_onPageChange:function(){BEM.blocks["i-global"].param("mobile")&&!BEM.blocks["i-global"].param("tablet")&&this.updateMobileLink()},updateMobileLink:function(){var t=this.elem("link","mobile","yes"),e=t.attr("href"),i=BEM.blocks.uri.getParamValue(e,"retpath"),n=BEM.blocks.uri.getParamValue("text"),o=BEM.blocks.uri.parse(i),s=BEM.blocks.utils.isEmpty(n)?o.getRoot():o.getRoot()+"/search?text="+encodeURIComponent(n);t.attr("href",BEM.blocks.uri.setParam(e,"retpath",s))}}),BEM.DOM.decl("yaplus",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.insertIntoHeader()}}},_getPage:function(){return this._page||(this._page=this.findBlockOn(BEM.DOM.scope,"b-page"))}}),BEM.DOM.decl("yaplus",{insertIntoHeader:function(){var t=BEM.blocks["serp-header"],e=t&&t.get();if(e){if(this.hasMod("available","yes")){var i=e.elem("yaplus-container");if(!i)return;e.elem("nav").prepend(i.detach())}t.replacePlaceholder("yaplus",this)}}}),BEM.DOM.decl("yaplus",{insertIntoHeader:function(){this.__base.apply(this,arguments),BEM.channel("yaplus").trigger("rendered")}}),BEM.DOM.decl("lang-switcher",{setRetpath:function(t){var e=encodeURIComponent(t),i=this.findBlockOn("dropdown2").getPopup();return this.findElem(i.domElem,"lang").map(function(){var t=$(this),i=t.attr("href");if(i){var n=i.replace(/(&retpath=)[^\&]*/,"$1"+e);n!==i&&t.attr("href",n)}}),this}},{live:!0}),BEM.DOM.decl("lang-switcher",{onSetMod:{js:{inited:function(){var t=this.findBlockOn("dropdown2").getPopup().domElem;this.langs=this.findElem(t,"lang")}}}},{live:function(){this.liveBindTo("pointerclick",function(){this.langs.each(function(){var t=$(this).attr("href"),e=BEM.blocks.uri;t&&$(this).attr("href",e.setParam(t,"retpath",e.clearHashSymbol(location.href)))})})}}),BEM.DOM.decl("lang-switcher",{onSetMod:{js:function(){this.__base.apply(this,arguments),w({},"/footer/lang"),this.elem("lang").on("click",function(){w({},"/footer/lang")})}}}),BEM.decl("favorites-counter",{},{count:function(t,e,i,n){n=n||{};var o=["reqid","yuid","serpid","service","ui"].reduce(function(t,e){return t+(n[e]?"/"+e+"="+n[e]:"")},""),s="//yandex"+(document.location.host.match(/^.*(\..+)$/)[1]||".ru")+"/clck/click/pid=902/cid="+i+"/dtype=stred"+(t?"/path="+t:"")+(e?"/vars="+e:"")+o+"/cts="+(new Date).getTime()+"/*"+document.location.href;document.createElement("IMG").src=s}}),BEM.create("favorites-counter"),BEM.DOM.decl("modal",{onSetMod:{js:{inited:function(){this._popup=this.findBlockOn("popup2")}},visible:function(t,e){var i=e?"Open":"Close",n=this.elem("content"),o=window.getComputedStyle?window.getComputedStyle(n[0]):n[0].currentStyle,s=parseFloat(o.animationDuration)>0?"animationend":parseFloat(o.webkitAnimationDuration)>0?"webkitAnimationEnd":"",r=function(){this.trigger("after"+i)};this.trigger("before"+i)._popup.setMod(t,e),s?n.one(s,r.bind(this)):this.afterCurrentEvent(r)}},destruct:function(){this.delMod("visible").__base.apply(this,arguments)},setContent:function(t){return BEM.DOM.update(this.elem("content"),t),this}},{live:!0}),BEM.DOM.decl("modal",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._enforceRepaint=this._enforceRepaint.bind(this)}},visible:{yes:function(){this.__base.apply(this,arguments),window.attachEvent&&this.elem("content")[0].attachEvent("onresize",this._enforceRepaint)},"":function(){this.__base.apply(this,arguments),window.detachEvent&&this.elem("content")[0].detachEvent("onresize",this._enforceRepaint)}}},_enforceRepaint:function(){this.domElem[0].className+=""}}),BEM.DOM.decl("modal",{attachToScope:function(t){return this._popup.attachToScope(t)}}),BEM.DOM.decl({block:"modal",modName:"theme",modVal:"normal"},{onSetMod:{visible:{yes:function(){this.setMod("has-animation","yes").__base.apply(this,arguments)}}}}),BEM.DOM.decl({block:"modal",modName:"autoclosable",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._preventHideByClick=!1}},visible:{yes:function(){this.__base.apply(this,arguments),this.bindTo("content","pointerdown",this._onPointerDownContent).bindTo("pointerclick",this._onPointerClick)._popup.on("beforeClose",this._onPopupClose,this)},"":function(){this.__base.apply(this,arguments),this.isPointerDownContent=!1,this.unbindFrom("content","pointerdown").unbindFrom("pointerclick")._popup.un("beforeClose",this._onPopupClose,this)}}},_onPointerDownContent:function(){this.isPointerDownContent=!0},_onPointerClick:function(t){var e=this._popup;$(this.buildSelector("visible","yes")).each(function(){var t=$(this).bem("popup2");t!==e&&(t._preventHideByClick=!0)}),$(t.target).closest(this.buildSelector("content")).length||this.isPointerDownContent||(this._popup._preventHideByClick=!1,this.delMod("visible")),this.isPointerDownContent=!1},_onPopupClose:function(){this.delMod("visible")}}),BEM.DOM.decl("favorites-iframe",{onSetMod:{js:{inited:function(){this.win=window,this._content=this.findElem("content"),this._data=null,this._cardData=null,this._modal=this.findBlockOn("modal","modal"),this._saved=!1;var t=this,e=this.params,i=this.params.withModal?"favorite:open-window":"favorite:open-popup";this.count=function(i,n){(BEM.blocks["favorites-counter"].count||function(){}).call(t,i,e.logged?"-authorized=1":"-authorized=0",n,e.counterParams)},this._modal.on("afterOpen",function(){BEM.channel("collections").trigger("iframe:open")}),this._modal.on("beforeClose",function(){this._saved||BEM.channel("collections").trigger("window:closed"),this._saved&&this._cardData&&BEM.channel("collections").trigger("window:saved",this._cardData),void 0!==this._rpcBridge&&this._rpcBridge.invokeMethod("pdb-close-outside")}.bind(this)),BEM.channel("collections").on(i,function(t,e){this._data=e,this._saved=!1,this._cardData=null,this._loadIframeFirstTime(),this._getModal().setMod("visible","yes")}.bind(this)),BEM.channel("collections").on("favorite:error",function(t,e){"Forbidden"===e.error&&(this._loadIframeFirstTime(e.url),this._getModal().setMod("visible","yes"))}.bind(this)),BEM.channel("collections").on("favorite:blur",function(){this.close()}.bind(this))}}},getDefaultParams:function(){return{loaderUrl:"https://yastatic.net/s3/frontend/iframe-loader/v0.1.1/index.min.js",iframeOrigin:location.origin,iframePath:"/collections/add/?bus=2"}},ready:function(){this.setMod(this._content,"loaded","yes"),this._getSpin().delMod("progress"),this._data&&this._addCard(this._data),BEM.channel("collections").trigger("window:ready")},close:function(t){this._saveCard(t),this._getModal().delMod("visible")},cardSaved:function(t){this._saveCard(t)},_saveCard:function(t){t&&t.card&&t.card.board?(this._saved=!0,this._cardData=t):(this._saved=!1,this._cardData=void 0)},_addCard:function(t){void 0!==this._rpcBridge&&(this.params.withModal||(t.card&&t.card.task_id?this.count("1352.1544.487.2818","73311"):this.count("1352.1544.487.160","73310")),this._rpcBridge.invokeMethod("pdb-add-card",t))},_loadIframeFirstTime:function(t){if(this._currentIframeUrl&&(this._currentIframeUrl&&t&&this._currentIframeUrl!==t||!t&&this._currentIframeUrl!==this._getIframeUrl())&&this._removeIfame(),void 0!==this._rpcBridge)return this.ready();this._getSpin().setMod("progress","yes"),void 0===window.LegoIframeLoader?this._insertLoaderScript(this._loadIframe.bind(this,t)):this._loadIframe(t)},_removeIfame:function(){this._atom&&(this._rpcBridge.clean(),this._rpcBridge=void 0,this._currentIframeUrl=void 0,this._atom.removeIframe(),this._atom=void 0)},_insertLoaderScript:function(t){var e=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],i=document.createElement("script");i.setAttribute("src",this._getLoaderUrl()),i.onload=t,e.insertBefore(i,e.lastChild)},_loadIframe:function(t){var e={iframeUrl:t||this._getIframeUrl(),container:this._content.get(0)};this._atom=new window.LegoIframeLoader(e),this._currentIframeUrl=e.iframeUrl,this._rpcBridge=this._atom.getRPCBridge(this),this._rpcBridge.pushMessagesToStack=!0,this._atom.on("init",this._onIframeLoad.bind(this)),this._atom.init()},_onIframeLoad:function(t,e){this._rpcBridge.contrAgent.win=e.iframeWin,this._rpcBridge.onIframeLoad()},_getLoaderUrl:function(){return this.params.loaderUrl},_getIframeUrl:function(){var t=this.params.source_type,e=this.params.iframeUrl||this.params.iframeOrigin+this.params.iframePath;return e+=t?"&source_type="+t:""},_getModal:function(){return void 0===this._modal&&(this._modal=this.findBlockOn("modal","modal")),this._modal},_getSpin:function(){return void 0===this._spin&&(this._spin=this.findBlockOn("spin","spin2")),this._spin}}),BEM.DOM.decl("favorites-iframe",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=BEM.DOM.blocks["b-page"].getInstance(),e=this._getModal();e.on("afterOpen",t.disableScroll.bind(t)),e.on("beforeClose",t.enableScroll.bind(t))}}}}),BEM.DOM.decl("b-statcounter",{onSetMod:{js:{inited:function(){this.findElem("metrika").length<1||(this.location=BEM.blocks.location.getInstance().on("change",this._onChange,this),this.__self.on("hit",this.hitMetrika,this),this.__self.on("goal",this.reachGoal,this),this.trigger("hitAndGoalInited"),this.__base.apply(this,arguments))}}},destruct:function(){this.location.un("change",this._onChange,this),this.__self.un("hit",this.hitMetrika,this),this.__self.un("goal",this.reachGoal,this),this.__base.apply(this,arguments)},_onChange:function(){this.hitMetrika()},hitMetrika:function(t,e){e||(e={});var i=this.getMetrika();i&&i.hit(e.url||window.location.href,e.title,e.referer,e.params),BEM.blocks.counter.debug("metrika hit",JSON.stringify(e.params))},reachGoal:function(t,e){e||(e={});var i=this.getMetrika();i&&i.reachGoal(e.goal,e.params),BEM.blocks.counter.debug("metrika reachGoal",JSON.stringify(e))},getMetrika:function(){return this._mc||(this._mc=window["yaCounter"+this.elemParams("metrika").id])}},{hit:function(t){this.trigger("hit",t)},goal:function(t){this.trigger("goal",t)}}),BEM.DOM.decl("b-statcounter",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.__self.on("params",this._onParamsMetrika,this),BEM.blocks["b-page"].on("contentUpdated",this._hitPage,this),this.bindToDoc("yacounter"+this.elemParams("metrika").id+"inited",this._onMetrikaInited)}}},_onMetrikaInited:function(){var t=this.getMetrika();this._hitPage(),Array.isArray(this._cachedParamsCalls)&&(this._cachedParamsCalls.forEach(function(e){t.params(e)}),delete this._cachedParamsCalls)},_onParamsMetrika:function(t,e){var i=this.getMetrika();i?i.params(e):(this._cachedParamsCalls=this._cachedParamsCalls||[],this._cachedParamsCalls.push(e))},destruct:function(){this.unbindFromDoc("yacounter"+this.elemParams("metrika").id+"inited",this._onMetrikaInited),BEM.blocks["b-page"].un("contentUpdated",this._hitPage,this),this.__self.un("params",this._onParamsMetrika,this),this.__base.apply(this,arguments)},_hitPage:function(){var t=BEM.blocks["i-global"].param("project"),e=BEM.blocks["i-global"].param("page");this._previousPage!==e&&(this.hitMetrika(null,{url:"/"+t+"-"+e}),this._previousPage=e)}},{params:function(t){BEM.blocks.counter.debug("metrika params",t),this.trigger("params",t)}}),BEM.DOM.decl("b-statcounter__metrika",{onSetMod:{js:{inited:function(){this.__self.loadMetrika(),this.addCounter(this.params)}}},addCounter:function(t){var e=window.Ya&&Ya.Metrika,i=window.yandex_metrika_callbacks||(window.yandex_metrika_callbacks=[]),n=function(){window["yaCounter"+t.id]=new Ya.Metrika(t)};if(!t.id)throw new Error(["Incorrect ID has been passed.","block: "+this.__self.getName(),"method: addCounter"].join("\n"));e?n():i.push(n)},getDefaultParams:function(){return{enableAll:!0}}},{loadMetrika:function(){var t=window.Ya&&Ya.Metrika,e="https:"===document.location.protocol?"https:":"http:";!t&&$.ajax({url:e+"//mc.yandex.ru/metrika/watch.js",dataType:"script",cache:!0}),this.loadMetrika=function(){}}}),BEM.DOM.decl("b-statcounter__metrika",{getDefaultParams:function(){return{clickmap:!0,trackLinks:!0}},onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.addSearchInputDetectClass()}}},addSearchInputDetectClass:function(){BEM.blocks["i-global"].getFlag("enable_webvisor2")&&this.params.webvisor&&this.afterCurrentEvent(function(){var t=document.querySelector(this.__self.DESKPAD_SEARCH_INPUT_SELECTOR)||document.querySelector(this.__self.TOUCH_SEARCH_INPUT_SELECTOR);t&&t.classList.add(this.__self.METRIKA_FIELD_DETECT_SELECTOR)})},addCounter:function(t){if(!t.id)throw new Error(this.getErrorMessage());this.__self.processMetrikaFn(this.__self.createYaCounter.bind(this,t))},getErrorMessage:function(){return["Incorrect ID has been passed.","block: "+this.__self.getName(),"method: addCounter"].join("\n")}},{METRIKA_FIELD_DETECT_SELECTOR:"ym-record-keys",DESKPAD_SEARCH_INPUT_SELECTOR:".search2 .search2__input .input__control",TOUCH_SEARCH_INPUT_SELECTOR:".header3 textarea.header3__input.input__control",loadMetrika:function(){var t="https:"===document.location.protocol?"https:":"http:",e=this.getScript();this.isMetrikaScriptLoaded()||this.loadMetrikaTransport(t+e),this.loadMetrika=function(){}},loadMetrikaTransport:function(t){$.ajax({url:t,dataType:"script",cache:!0})},getScript:function(){return BEM.blocks["i-global"].getFlag("enable_webvisor2")?"//mc.yandex.ru/metrika/tag_jet_beta.js":"//mc.yandex.ru/metrika/watch.js"},getMetrikaCallbacksPropName:function(){return BEM.blocks["i-global"].getFlag("enable_webvisor2")?"yandex_metrika_callbacks2":"yandex_metrika_callbacks"},isMetrikaScriptLoaded:function(){return BEM.blocks["i-global"].getFlag("enable_webvisor2")?Boolean(window.Ya&&Ya.Metrika2):Boolean(window.Ya&&Ya.Metrika)},processMetrikaFn:function(t){var e=this.getMetrikaCallbacksPropName();this.isMetrikaScriptLoaded()?t():(window[e]||(window[e]=[]),window[e].push(t))},createYaCounter:function(t){try{BEM.blocks["i-global"].getFlag("enable_webvisor2")?window["yaCounter"+t.id]=new Ya.Metrika2(t):window["yaCounter"+t.id]=new Ya.Metrika(t)}catch(t){}}}),BEM.DOM.decl({block:"fade",modName:"region",modVal:"main"},{onSetMod:{progress:function(t,e){var i=BEM.blocks["vital-incut"],n=i&&i.isVitalQuery(),o=i&&i.getInstance(),s="",r="";i&&n&&(o&&(s=o.domElem[0].getBoundingClientRect().bottom+"px"),r="absolute"),this.domElem.css("top",s),this.domElem.css("position",r),this.__base.apply(this,arguments)}}}),BEM.decl("atom",{},{initStripe:function(t){return this._initAtomInstance(t).then(this._bindStripeEvents)},_bindStripeEvents:function(t){var e=BEM.channel("atom");t.on("will-show",function(t,i){e.trigger("stripe-will-show",i)}),t.on("show",function(t,i){e.trigger("stripe-show",i)}),t.on("will-hide",function(t,i){e.trigger("stripe-will-hide",i)}),t.on("hide",function(t,i){e.trigger("stripe-hide",i)})},initStripePad:function(t){return this._initAtomInstance("StripePad",t)},initSmartBanner:function(t){return this._initAtomInstance("SmartBanner",t)},_initAtomInstance:function(t,e){e=e||{},"object"==typeof(t=t||null)&&(e=t,t=null);var i=$.Deferred();return this._whenInited(function(){var n=new(t?Atom[t]:Atom)(e).init();i.resolve(n)}),i.promise()},_whenInited:function(t){window.Atom&&window.Atom.whenInited(t)}}),BEM.DOM.decl("i-device-info",{onSetMod:{js:{inited:function(){var t=this.params.forcedSzm;t?this.setSzmCookie(decodeURIComponent(t)):this.updateSzmCookie()}}},getScreenSize:function(){return this.validateScreenSize({w:screen.width,h:screen.height})},getViewportSize:function(){return{w:window.innerWidth,h:window.innerHeight}},getDevicePixelRatio:function(){return window.devicePixelRatio||1},getScreenParams:function(){return{screenSize:this.getScreenSize(),viewportSize:this.getViewportSize(),devicePixelRatio:this.getDevicePixelRatio()}},updateSzmCookie:function(){var t=this.getScreenParams(),e=this.parseSzmCookie(this.getSzmCookie());this.isSzmEqual(e,t)||this.setSzmCookie(this.stringifySzmCookie(t))},setSzmCookie:function(t){return BEM.blocks["i-cookie"].get().yp({name:"szm",value:t,encode:!1})},getSzmCookie:function(){return BEM.blocks["i-cookie"].get().yp("szm")},isSzmEqual:function(t,e){function i(t,e){return t.w===e.w&&t.h===e.h}return!(!t||!e)&&(t.devicePixelRatio===e.devicePixelRatio&&(!!i(t.screenSize,e.screenSize)&&!!i(t.viewportSize,e.viewportSize)))},validateScreenSize:function(t){return t},formatSzmSizeToString:function(t){if(t)return[t.w,t.h].join("x")},formatSzmSizeToObject:function(t){if(t)return t=t.split("x"),{w:Number(t[0]),h:Number(t[1])}},stringifySzmCookie:function(t){return[String(t.devicePixelRatio).replace(".","_"),this.formatSzmSizeToString(t.screenSize),this.formatSzmSizeToString(t.viewportSize)].join(":")},parseSzmCookie:function(t){if(t){var e=(t=t.split(":"))[0],i=t[1],n=t[2]||t[1];return{devicePixelRatio:Number(e.replace("_",".")),screenSize:this.formatSzmSizeToObject(i),viewportSize:this.formatSzmSizeToObject(n)}}}}),BEM.DOM.decl("page-layout",{},{getInstance:function(){return this._instance||(this._instance=$(this.buildSelector()).bem(this.getName())),this._instance}}),BEM.DOM.decl("page-layout",{_shouldTrigger:!0,onSetMod:{layout:function(t,e){this._shouldTrigger&&this.trigger(t,e),this._shouldTrigger=!0}},disableTrigger:function(){return this._shouldTrigger=!1,this}}),BEM.DOM.decl("page-layout",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._syncLayout()}},page:function(t,e){this.__base.apply(this,arguments);var i="index"===e;this._setScreenSizeMod(e),this.toggleMod("scalable",!0,"",i),this.toggleMod("preview-disabled",!0,"",i)}},_syncLayout:function(){this._setScreenSizeMod(),this.resizeRadioBtns()},_setScreenSizeMod:function(t){var e=t||BEM.blocks["i-global"].param("page"),i=window.innerWidth;"index"===e?(this.delMod("screen-size"),i<1250&&i>=900?this.setMod("screen-size","morda-m"):i<900&&this.setMod("screen-size","morda-s")):(this.delMod("screen-size"),i>=1300?this.setMod("screen-size","xl"):i>=1174&&i<1300?this.setMod("screen-size","x"):this.setMod("screen-size","m"))},_onLocationChange:function(t,e){this.afterCurrentEvent(function(){BEM.blocks.uri.parse(e.url).getParam("filmId")||this.hasMod("layout","view")&&this.setMod("layout","serp")})},resizeRadioBtns:function(){var t=this.elem("content").width();this.oldContentWidth=this.oldContentWidth||t,t!==this.oldContentWidth&&BEM.blocks["serp-controller"].trigger("layout"),this.oldContentWidth=t},_getTopIncutElem:function(){var t,e=this.findElem("top-incut"),i=this.findElem("base-content");return e.length?e:(t=BEMHTML.apply({block:"page-layout",elem:"top-incut"}),BEM.DOM.prepend(i,t),this.findElem("top-incut"))},updateTopIncutElem:function(t){var e=this._getTopIncutElem();t?BEM.DOM.update(e,t):BEM.DOM.destruct(e)}},{live:function(){this.__base();var t=window.screenfull;this.liveInitOnDomlessBlockEvent("location","change",function(t,e){this._onLocationChange(t,e)}).liveInitOnBlockOutsideEvent("resize","b-page",function(){this._syncLayout()}).liveInitOnChannelEvent("atom","stripe-will-show",function(t,e){this._onDaasWillShow(t,e)}).liveInitOnChannelEvent("atom","stripe-will-hide",function(t,e){this._onDaasWillHide(t,e)}),t&&t.raw&&this.liveBindToDoc(t.raw.fullscreenchange,function(){this.toggleMod("fullscreen",!0,"",t.isFullscreen)})}}),BEM.DOM.decl("categories",{onSetMod:{js:function(){this._location=BEM.blocks.location.getInstance(),this._radio=this.findBlockInside("radio-button"),this._radio.on("change",function(){this.afterCurrentEvent(this._onChange,this)}.bind(this)),this._radio.hasMod("adaptive","yes")&&BEM.blocks["serp-controller"].on("layout",this._onLayoutChange,this),this._select=this._radio.findBlockOn(this._radio.elem("more"),"select"),BEM.blocks["b-page"].on("scroll",this._hidePopup,this),this.bindToWin("orientchange",$.debounce(this._hidePopup,100,this))}},destruct:function(){this._radio.hasMod("adaptive","yes")&&BEM.blocks["serp-controller"].un("layout",this._onLayoutChange,this),BEM.blocks["b-page"].un("scroll",this._hidePopup,this),this.__base.apply(this,arguments)},_onLayoutChange:function(){this._radio&&this.afterCurrentEvent(this._radio.reflow.bind(this._radio))},_hidePopup:function(){this._select._popup&&this._select._popup.hide()},_onChange:function(){var t=this.elemParams(this.findElem(this._radio.getCurrent(),"item"));w({},t.counter),this.trigger("change",t)}}),BEM.DOM.decl("filter-controller",{onSetMod:{js:{inited:function(){var t=this._getAdvancedSearchBlock();this._page=this.findBlockOutside("b-page"),this._headerInput=this._page.findBlockInside("header").findBlockInside("input"),this.bindEvents(),BEM.blocks.history.getInstance().on("statechange",function(){t.params.activeFilters.length&&this.openAdvancedSearch()},this),this.params.filtersAutoopen&&this._headerInput.elem("settings").click()}}},bindEvents:function(){BEM.blocks["b-page"].on("change",this._onPageChanged,this),this._headerInput&&this._headerInput.on("settings-clicked",this._onSettingsClicked,this)},unbindEvents:function(){BEM.blocks["b-page"].un("change",this._onPageChanged,this),this._headerInput.un("settings-clicked",this._onSettingsClicked,this)},_getAdvancedSearchBlock:function(){return this._advSearch||(this._advSearch=this.findBlockInside("advanced-search"))},openAdvancedSearch:function(){this._getAdvancedSearchBlock().show(),this._page.scrollTo(0,this.__self.SCROLL_SPEED)},closeAdvancedSearch:function(){this.params.activeFilters=[],this._getAdvancedSearchBlock().hide()},destruct:function(){this.unbindEvents(),this.__base.apply(this,arguments)},_onSettingsClicked:function(t,e){e?this.closeAdvancedSearch():this.openAdvancedSearch(),this.trigger("visibility:change")},_onPageChanged:function(t,e){"search"!==e.type&&this._advSearch&&this.closeAdvancedSearch()}},{SCROLL_SPEED:100}),BEM.DOM.decl("filter-controller",{onSetMod:{js:{inited:function(){var t,e=this._getAdvancedSearchBlock();this._page=this.findBlockOutside("b-page"),t=this._page.findBlockInside("serp-header"),this._headerInput=t&&t.findBlockInside("input"),this.bindEvents(),BEM.blocks.history.getInstance().on("statechange",function(){e.params.activeFilters.length&&this.openAdvancedSearch()},this),this.params.filtersAutoopen&&this._headerInput&&this._headerInput.elem("settings").click()}}}}),BEM.DOM.decl("disconnect-popup",{onSetMod:{js:{inited:function(){this._timerId=null}}},getDefaultParams:function(){return{closePopupTimeout:5e3}},_getModal:function(){return this._modal||(this._modal=this.findBlockOn("modal")),this._modal},_showPopup:function(){this._clearTimer(),this._getModal().setMod("visible","yes"),this._timerId=setTimeout(function(){this._closePopup()}.bind(this),this.params.closePopupTimeout)},_closePopup:function(){this._clearTimer(),this._getModal().delMod("visible")},_clearTimer:function(){this._timerId&&(clearTimeout(this._timerId),this._timerId=null)},destruct:function(){BEM.blocks["serp-controller"].un("loadTimeout",this.show,this).un("loadError",this.close,this).un("loaded",this.close,this),this.__base.apply(this,arguments)}},{getInstance:function(){return this._instance||(this._instance=$(this.buildSelector()).bem(this.getName())),this._instance},show:function(){this.sendCounter(),this.getInstance()._showPopup()},sendCounter:function(){var t=BEM.blocks["i-global"].param("project").replace("/","."),e=BEM.blocks.location.getInstance().getState().path,i=window.navigator||{},n=i.connection||i.mozConnection||i.webkitConnection,o="-url="+e,s=n&&n.effectiveType||"unknown";BEM.blocks["i-global"].param("isYandexApp")&&(o+=",-app="+(BEM.blocks["i-global"].param("isYandexAppIos")?"ios":"android"));o+=",-connectionType="+s,c.hit({dtype:"stred",pid:40,path:t+".disconnect",vars:o})},close:function(){this.getInstance()._closePopup()},live:function(){BEM.DOM.blocks["serp-controller"].on("loadTimeout",this.show,this).on("loadError",this.close,this).on("loaded",this.close,this),this.liveBindTo("content","pointerclick",function(){this._closePopup()})}}),function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},e="undefined"!=typeof module&&module.exports,i="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,n=function(){for(var e,i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,o=i.length,s={};n<o;n++)if((e=i[n])&&e[1]in t){for(n=0;n<e.length;n++)s[i[0][n]]=e[n];return s}return!1}(),o={change:n.fullscreenchange,error:n.fullscreenerror},s={request:function(e){var o=n.requestFullscreen;e=e||t.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?e[o]():e[o](i?Element.ALLOW_KEYBOARD_INPUT:{})},exit:function(){this.isFullscreen&&t[n.exitFullscreen]()},toggle:function(t){this.isFullscreen?this.exit():this.request(t)},onchange:function(t){this.on("change",t)},onerror:function(t){this.on("error",t)},on:function(e,i){var n=o[e];n&&t.addEventListener(n,i,!1)},off:function(e,i){var n=o[e];n&&t.removeEventListener(n,i,!1)},raw:n};n?(Object.defineProperties(s,{isFullscreen:{get:function(){return Boolean(t[n.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[n.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(t[n.fullscreenEnabled])}}}),e?module.exports=s:window.screenfull=s):e?module.exports=!1:window.screenfull=!1}(),BEM.DOM.decl("serp-ajax-carousels",{onSetMod:{js:{inited:function(){var t,e=this._getSeeAlsoCarouselRequestParams();e&&(t=this._loadCarousel({container:this.findElem("seeAlso").get(0),carouselType:"see_also",carouselSourceType:"related-video",urlParams:e})),this._settle([t||Promise.reject()]).then(function(){this._showCarousels(),Ya.reactBus.emit("serp-ajax-carousels:done")}.bind(this))}}},_settle:function(t){var e=[],i=0;return new Promise(function(n){t.forEach(function(t){var o=function(t,i){e[t]=!0,e.every(function(t){return t})&&i()}.bind(null,i++,n);e.push(!1),t.then(o).catch(o)})})},_getSeeAlsoCarouselRequestParams:function(){var t=BEM.blocks["serp-item"].getFirstPlayable(),e=t?t.getVideoData():null;if(e)return BEM.blocks["related-video"].getReqParams(e).req},_loadCarousel:function(t){return new Promise(function(e,i){BEM.channel("i-react-ajax-adapter").trigger("render",{container:t.container,params:{type:"Carousels",adapterParams:{carousels:[{carouselType:t.carouselType,carouselSourceType:t.carouselSourceType}]},url:BEM.blocks.uri.setParams(BEM.blocks["i-global"].param("router").search,t.urlParams)},callback:function(t){t?i(t):e()}})})},_showCarousels:function(){this.delMod("hidden")}}),BEM.DOM.decl({block:"serp-list",modName:"sticky",modVal:!0},{_offsetFromHeader:111,onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._stickyPosition=this.domElem[0].getBoundingClientRect().top+window.pageYOffset,this._throttledOnScroll=$.throttle(this._onScroll,20,this),this._throttledOnScroll(),this.bindToWin("scroll",this._throttledOnScroll,this)}}},destruct:function(){this.unbindFromWin("scroll",this._throttledOnScroll),this.__base.apply(this,arguments)},_onScroll:function(){this.setMod("sticky-scroll",window.pageYOffset+this._offsetFromHeader>=this._stickyPosition)}}),BEM.DOM.decl("related-video",{isDirectAvailable:function(){return this.params.showDirect}},{_numDoc:20,hasData:function(){return!0},getData:function(t){return Object.assign(t.related||{},{numdoc:this._numDoc})},getReqParams:function(t){t=t||this._getSavedItemParams();var e=$.extend(this.getData(t),{page:BEM.blocks["i-global"].param("page")});return{req:BEM.blocks["i-url-controller"].mergePassedUrlParams(e),related:e}},_saveItemParams:function(t){this._dataSource=t},_getSavedItemParams:function(){return this._dataSource},load:function(t,e,i){BEM.blocks["i-global"].setParams({relatedRequestStartTime:Ya.Rum.getTime()}),this._saveItemParams(i);var n=this.getReqParams(i);BEM.create("i-request_type_bem",{url:BEM.blocks.uri.setParams(BEM.blocks["i-global"].param("router").search,n.req),ctx:this}).block("related-video",function(t){e.resolve(t)},null,{isNonStopEnabled:!i.isExternal&&BEM.blocks.player2.isPlayerEventsSupported(i.playerId)}).get(),t.trigger("request:related",{params:n.related})}}),BEM.DOM.decl({block:"serp-user",modName:"type",modVal:"enter"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=this.findBlockOn("login-popup","popup"),e=this.findBlockInside("promo-popup","popup2");t?this._initLoginPopup(t):e&&this._initPromoPopup(e),this.bindTo("login-link","pointerclick",this._updateLoginUrl),this.bindTo("registration-link","pointerclick",this._updateRegistrationUrl)}}},_initLoginPopup:function(t){var e=BEM.blocks["i-cookie"].get(),i=Math.round(new Date/1e3)+86400;e.yp("ln_pp")||(e.yp("ln_pp",!0,i),t.bindTo("close","click",function(){var t=(this.elemParams("login-popup").counters||{}).close;t&&window.Ya.counter.w(null,t),e.yp("ln_pp",!0,7*i)}.bind(this)),t.show({top:14,right:14}))},_initPromoPopup:$.noop,_updateRegistrationUrl:function(){var t=BEM.blocks.uri.parse(this._getPassportUrl()).path("/registration").build(),e=this.findBlockOn("registration-link","button2");e&&e.domElem.attr("href",t)},_updateLoginUrl:function(){var t=this.findBlockOn("login-link","button2");t&&t.setUrl(this._getPassportUrl())},_getPassportUrl:function(){var t=BEM.blocks.utils.getPassportUrl();return this.params.origin&&(t=BEM.blocks.uri.setParam(t,"origin",this.params.origin)),t}},{live:function(){return this.__base.apply(this,arguments),!1}}),BEM.DOM.decl({block:"popup",modName:"type",modVal:"modal"},{getDefaultParams:function(){var t=this.__base();return t.top="50%",t.left="50%",t},_isPercentVal:function(t){return"string"==typeof t&&t.indexOf("%")>0},show:function(t){return this._moveToContainer(),this.setMod("visibility","outside").setMod("adaptive","no"),this.repaint(t),this},repaint:function(t){this._moveToContainer(),t||(t={left:this.params.left,top:this.params.top});var e=this.getPopupSize();return this._isPercentVal(t.left)&&!t.marginLeft&&(t.marginLeft=e.width/(-100/parseInt(t.left,10))),this._isPercentVal(t.top)&&!t.marginTop&&(t.marginTop=e.height/(-100/parseInt(t.top,10))),this._show(t),this}}),BEM.DOM.decl({block:"serp-user",modName:"promo-popup",modVal:!0},{_initPromoPopup:function(t){var e=BEM.blocks["i-cookie"].get(),i=this.elemParams("promo-popup").counters||{},n=i.close,o=i.show,s=BEM.blocks["i-global"].param("isIntegrationTest")?0:600;t.bindTo("close-icon","click",function(){e.yp("ln_tp",!0,e.getExpirationDate(365)),n&&w(null,n),t.delMod("visible")}),setTimeout(function(){t.setAnchor(this.elem("login-link")).setMod("visible","yes"),o&&w(null,o),e.yp("ln_tp",!0,e.getExpirationDate(1))}.bind(this),s)}}),BEM.DOM.decl("user2",{onSetMod:{js:{inited:function(){if(this._retpath=this.params._retpath,this._isAuthorized=Boolean(this.params._uid),!this._isAuthorized)return!0;this._currentAccount=this.findBlockOn("current-account","user-account"),this._popup=this.findBlockInside("light-popup"),this._menu=this.findBlockInside("menu"),this._exitItem=this.elem("menu-item","action","exit"),this._plusItem=this.elem("menu-item","action","plus"),this._addItem=this.elem("add-account"),this._accountsContainer=this.findElem(this._menu.domElem,"accounts-container"),this._menuCounter=this.findElem("menu-counter"),this.bindTo("menu-item","pointerclick",this._onMenuItemClick),this.bindTo(this._exitItem,"pointerclick",this._onLogout),BEM.blocks["user-account"].on(this._accountsContainer,"click",this._onAccountClick,this),BEM.blocks["user-account"].on(this._accountsContainer,"logout",this._processLogout,this)}},opened:{yes:function(){this.domElem.attr("aria-expanded",!0),this._popup.setMod("visible","yes").on("beforeClose",this._onPopupClose,this),this._setMaxHeight(),this.bindToWin("resize orientchange",this._setMaxHeight),this._popup.on("beforeOpen",function(){this._onPopupOpen(),this._popup.un("beforeOpen",this._onPopupOpen,this)},this)},"":function(){var t=this.trigger("beforeClose");if(t.isDefaultPrevented&&t.isDefaultPrevented())return!1;this.unbindFromWin("resize orientchange",this._setMaxHeight),this.domElem.attr("aria-expanded",!1),this._popup.delMod("visible").un("beforeClose",this._onPopupClose,this)}}},destruct:function(){return this._isAuthorized&&(BEM.blocks["user-account"].un(this._accountsContainer,"click",this._onAccountClick,this),BEM.blocks["user-account"].un(this._accountsContainer,"logout",this._processLogout,this)),this.__base.apply(this,arguments)},setUnreadCount:function(t){var e=this._menu.findBlockInside("user-account");return this._currentAccount.setCounter(t),e&&e.hasMod("has-ticker")&&e.setCounter(t),this._menuCounter&&this._menuCounter.length&&(t>0?this.delMod(this._menuCounter,"state","empty"):this.setMod(this._menuCounter,"state","empty"),this._menuCounter[0].innerText=t),this},setRetpath:function(t){this._retpath=t;var e=encodeURIComponent(t);return $().add(this._menu&&this._menu.findElem("item")).add(this.findElem("current-account")).add(this.findElem("a11y-exit")).add(this.findElem("enter")).add(this._addItem).each(function(t,i){var n=$(i),o=n.attr("href");if(o){var s=o.replace(/([\&\?]retpath=)[^\&]*/,"$1"+e);s!==o&&n.attr("href",s)}}),this},getPopup:function(){return this._popup},getMenu:function(){return this._menu},getCurrentAccount:function(){return this._currentAccount},_changeUser:function(t){var e=this.params._passportHost+"/passport?mode=embeddedauth";$('<form method="POST" action="'+e+'"><input type="hidden" name="action"  value="change_default"><input type="hidden" name="uid"     value="'+t+'"><input type="hidden" name="retpath" value="'+this._retpath+'"><input type="hidden" name="yu"      value="'+this.params._yu+'"></form>').appendTo("body").submit()},_onCurrentAccountClick:function(t,e){t.block===this._currentAccount&&(e.domEvent.preventDefault(),this.toggleMod("opened","yes"),this.trigger("current-account-click"))},_onAccountClick:function(t,e){if(!e.isLogout){var i=this.elemParams(t.block.domElem).uid;this._changeUser(i)}},_onPopupClose:function(){this.delMod("opened")},_onPopupOpen:function(){this.trigger("beforeOpen")},_processLogout:function(t){var e=this.elemParams(t.target.domElem).uid;e&&this.trigger("logout-click",{uid:e,account:t.target})},_onMenuItemClick:function(){this.trigger("menu-item-click")},_onLogout:function(){this.trigger("logout")},_setMaxHeight:function(){var t=BEM.DOM.win,e=this.params.menuMaxHeight;e||(e=t.height()-this.domElem.offset().top+t.scrollTop()),this._menu.domElem.css("max-height",e)},getDefaultParams:function(){return{menuMaxHeight:0}}},{live:function(){this.liveInitOnBlockInsideEvent("init","user-account"),this.liveInitOnBlockInsideEvent("click","user-account",this.prototype._onCurrentAccountClick),this.liveBindTo("enter","pointerclick",function(){this.trigger("login")})}}),BEM.DOM.decl("user2",{onSetMod:{"hide-name":function(t,e){this._currentAccount.toggleMod("hide-name","yes",e)}},toggleCollapsed:function(t){this.toggleMod("hide-name","yes",t)}}),BEM.DOM.decl("user2",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._updateRetpath(this._getRetPath()),this._syncMenuCounterWithTicker(),BEM.channel("unread-letters-count").on("update",this._onUnreadLettersCountUpdate.bind(this))}}},_updateRetpath:function(t){this.setRetpath(t),BEM.blocks["i-global"].setParams({retpath:t})},_getRetPath:function(){return BEM.blocks.location.getInstance().getUri().replaceParam("ncrnd",Math.floor(1e4*Math.random())).toString()},_syncMenuCounterWithTicker:function(){this.setUnreadCount(this.findBlockInside("ticker").val())},_onUnreadLettersCountUpdate:function(t,e){this.setUnreadCount(e)}}),BEM.DOM.decl("user-account",{setCounter:function(t){var e=this.findBlockInside("ticker");e&&e.val(t)},_onClick:function(t){var e={domEvent:t};this.isLogoutClick&&(e.isLogout=!0,this.isLogoutClick=!1),this.trigger("click",e)},_onMouseOver:function(t){this.setMod("hovered","yes").bindTo("mouseleave",this._onMouseLeave)},_onMouseLeave:function(){this.delMod("hovered").unbindFrom("mouseleave")},_onFocusIn:function(t){this.trigger("focus").setMod("focused","yes").bindTo("focusout",this._onFocusOut)},_onFocusOut:function(){this.trigger("blur").delMod("focused").unbindFrom("focusout")},_onLogoutClick:function(){this.isLogoutClick=!0,this.trigger("logout")}},{live:function(){this.liveBindTo("pointerclick",this.prototype._onClick),this.liveBindTo("focusin",this.prototype._onFocusIn),this.liveBindTo("mouseover",this.prototype._onMouseOver),this.liveBindTo("logout","pointerclick",this.prototype._onLogoutClick)}}),BEM.DOM.decl("user-pic",{onSetMod:{js:{inited:function(){var t=this.elem("link")[0];t&&(t.href=this.params.cameraURL+"?retpath="+encodeURIComponent(window.location.href)+"&origin="+this.params.origin)}}},getDefaultParams:function(){return{origin:"userpic",cameraURL:"https://passport.yandex.ru/profile/public"}}}),BEM.DOM.decl({block:"user-account",modName:"has-ticker",modVal:"yes"},{getTicker:function(){return this.findBlockOn("ticker","ticker")}}),BEM.DOM.decl("ticker",{onSetMod:{js:{inited:function(){this._count=this.params.count}}},show:function(){return this.setMod("state","normal")},hide:function(){return this.setMod("state","empty")},val:function(t){if(!arguments.length)return this._count;var e=this.params.maxCount;return this._count=t,this.elem("value").attr("title",t).text(t>e?e:t),t?this.show():this.hide(),this}}),BEM.DOM.decl("ticker",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),BEM.channel("unread-letters-count").on("update",this._onUnreadLettersCountUpdate.bind(this))}}},_onUnreadLettersCountUpdate:function(t,e){e>=0&&this.val(e)}}),BEM.DOM.decl("light-popup",{onSetMod:{js:{inited:function(){this._moved=this.params.moved}},visible:{yes:function(){this.trigger("beforeOpen"),!this._moved&&this._moveToTarget()},"":function(){"yes"===this.getMod("animated")&&this.setMod("reverse-animation"),this.trigger("beforeClose")}}},_moveToTarget:function(){var t=this.findBlockOutside(this.params.target);this._owner=t.domElem||BEM.DOM.scope,this._owner.append(this.domElem),this._moved=!0},setContent:function(t){this._isUpdatedContent||(this._isUpdatedContent=!0,this.afterCurrentEvent(function(){delete this._isUpdatedContent}),BEM.DOM.update(this.domElem,t))},getDefaultParams:function(){return{moved:!1}}}),BEM.DOM.decl({block:"light-popup",modName:"autoclosable",modVal:"yes"},{onSetMod:{visible:{yes:function(){this.__self._visiblePopupsStack.unshift(this),this.afterCurrentEvent(function(){this.domElem&&this.hasMod("visible")&&this.bindToDoc("pointerdown",this._onDocClick)}),this.__base.apply(this,arguments)},"":function(){var t=this.__self._visiblePopupsStack;t.splice(t.indexOf(this),1),this.unbindFromDoc("pointerdown").__base.apply(this,arguments)}}},_onDocClick:function(t){this.hasMod("visible")&&!this.containsDomElem($(t.target))&&this.delMod("visible")}},{live:function(){return BEM.DOM.doc.on("keydown",this._onDocKeyPress.bind(this)),this.__base()},_visiblePopupsStack:[],_onDocKeyPress:function(t){BEM.blocks.keycodes.is(t.keyCode,"ESC")&&this._visiblePopupsStack.length&&this._visiblePopupsStack[0].delMod("visible")}}),BEM.DOM.decl("unread-letters-updater",{onSetMod:{js:{inited:function(){this._noticeRequest(this._noticeCheck.bind(this),function(){})}}},_noticeCheck:function(t){var e=t&&t.counters&&t.counters.unread,i=parseInt(e,10)||0;BEM.channel("unread-letters-count").trigger("update",i)},_disableNotice:function(){var t=BEM.blocks["i-ua"].ie;return Boolean(t)&&t<10||!this.params.hasMailBox},_noticeRequest:function(t,e){this._disableNotice()||BEM.create("i-request_type_ajax",{url:"https://mail.yandex."+BEM.blocks["i-global"].param("tld")+"/api/v2/serp/counters?silent",dataType:"json",xhrFields:{withCredentials:!0},paramsToSettings:["xhrFields"]}).get({},t,e)}}),BEM.DOM.decl({block:"user2",modName:"fetch-accounts",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._accountsElem=this.findElem(this._menu.domElem,"accounts"),this._accountsSpin=this.findBlockInside(this._accountsElem,"spin2"),this._accountsDataProvider=BEM.create(this.params.accountsDataProvider,{callbackCtx:this,accountsUrl:this.params.accountsUrl}),this._fetchAccounts()}}},onElemSetMod:{accounts:{loading:function(t,e,i){this._accountsSpin.setMod("progress",i)}}},_fetchAccounts:function(){this.setMod(this._accountsElem,"loading","yes"),this._accountsDataProvider.get({yu:this.params._yu},function(t){this._hasOrganizations=t.accounts&&t.accounts.some(function(t){return t.attributes.has_organization})||!1;var e=!0,i=this._popup.findBlockInside({block:"user-account",modName:"template",modVal:"yes"});if(i){if(t.accounts){var n=this.params.accountsMax;t.accounts.forEach(function(e,o){e.uid!==t.default_uid&&o<=n&&this._accountsContainer[0].appendChild(this._renderAccount(e,o,i))},this),e=Boolean(t["can-add-more"])}var o=i.domElem.parent();i.destruct(),o.remove()}this.updateCounters&&this.updateCounters(),this.toggleMod(this.findElem(this._accountsElem,"add-account"),"hidden","","yes",e),this.delMod(this._accountsElem,"loading")})},_renderAccount:function(t,e,i){var n=t.defaultEmail||t.displayName.social,o=this.params._avatarHost||"https://avatars.mds.yandex.net",s=t.displayName.default_avatar,r=i.domElem.clone().bem("user-account"),a=JSON.parse(r.domElem.attr("data-bem"));n="object"==typeof n?{fb:"Facebook",tw:"Twitter",mr:"Mail.ru",gg:"Google",ok:"Odnoklassniki",vk:"Vkontakte",dz:"Deezer",fs:"Foursquare",ig:"Instagram",lf:"Last.FM",lj:"LiveJournal",in:"LinkedIn",mt:"МТС-Россия",ms:"Microsoft",yh:"Yahoo",ya:"Yandex",vf:"Vodafone-Украина",tg:"Telegram"}[n.provider]:n,a.user2__account={uid:t.uid,pos:e},r.domElem.attr("data-bem",JSON.stringify(a)),r.delMod("template"),r.elem("name-text").text(t.displayName.name),n&&(r.setMod("has-subname","yes"),r.elem("subname").text(n));var c=r.findBlockInside("user-pic"),l=o+"/get-yapic/"+s+"/islands-middle",h=o+"/get-yapic/"+s+"/islands-retina-middle";c.elem("image").attr("src",l),c.elem("image").attr("srcSet",l+" 1x, "+h+" 2x");var u=document.createElement("div");return u.className="menu__item",u.appendChild(r.domElem[0]),u},getDefaultParams:function(){return $.extend(this.__base.apply(this,arguments),{accountsDataProvider:"user2__accounts-provider",accountsMax:this._params.accountsMax||5,maxLength:this._params.maxLength||16})}}),BEM.decl({block:"user2__accounts-provider",baseBlock:"i-request_type_ajax"},{getDefaultParams:function(){return $.extend(this.__base.apply(this,arguments),{url:this._params.accountsUrl,timeout:5e3,dataType:"json",xhrFields:{withCredentials:!0},cache:!1})}}),BEM.DOM.decl({block:"user2",modName:"fetch-unread",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._unreadDataProvider=BEM.create(this.params.unreadDataProvider,{callbackCtx:this,exportHost:this.params.exportHost}),this._fetchUnread()}}},_fetchUnread:function(){this._unreadDataProvider.get({key:this.params._yu},this._onFetchUnreadSuccess)},_onFetchUnreadSuccess:function(t){this.setUnreadCount(t.unread||0)},getDefaultParams:function(){return $.extend(this.__base.apply(this,arguments),{unreadDataProvider:"user2__unread-provider"})}}),BEM.decl({block:"user2__unread-provider",baseBlock:"i-request_type_ajax"},{getDefaultParams:function(){var t=this._params.exportHost||"https://export.yandex.ru";return $.extend(this.__base.apply(this,arguments),{url:t+"/for/unread.xml",cache:!1})}}),BEM.DOM.decl("i-keyrouter",{onSetMod:{js:{inited:function(){this.bindToDoc("keydown",function(t){if(this.__self.instance=this,!document.activeElement||!/(INPUT|TEXTAREA)/.test(document.activeElement.nodeName))return this._onKeydown(t)})}}},_onKeydown:function(t){switch(t.keyCode){case 37:case 65:case 72:this.__self.isSpecialKey(t)&&this._emitPress("left",t);break;case 39:case 68:case 76:this.__self.isSpecialKey(t)&&this._emitPress("right",t);break;case 32:this._emitPress("space",t);break;case 70:this._emitPress("f",t);break;case 79:this._emitPress("o",t);break;case 86:this._emitPress("v",t);break;case 34:this._emitPress("pagedown",t);break;case 33:this._emitPress("pageup",t);break;case 13:this._emitPress("enter",t);break;case 27:this._emitPress("esc",t),t.stopImmediatePropagation();break;case 8:this._emitPress("backspace",t);break;case 38:case 87:case 75:this.__self.isSpecialKey(t)&&this._emitPress("up",t);break;case 40:case 83:case 74:this.__self.isSpecialKey(t)&&this._emitPress("down",t)}return!t.isImmediatePropagationStopped()},_emitPress:function(t,e){this.trigger(t,e),BEM.channel("keyrouter").trigger(t,e)}},{get:function(){return this.instance},isSpecialKey:function(t){return!(t.ctrlKey||t.altKey||t.metaKey||t.shiftKey)}}),BEM.DOM.decl("i-keyrouter",{_onKeydown:function(t){return 27===t.keyCode?(this._emitPress("esc",t),!t.isImmediatePropagationStopped()):this.__base.apply(this,arguments)}}),BEM.DOM.decl("cookies",{onSetMod:{js:{inited:function(){this.__self.save(this.params.cookies)}}}},{save:function(t){t&&t.forEach(function(t){document.cookie=t})}}),BEM.DOM.decl("no-auth-popup",{show:function(t){this._getModal().setMod("visible","yes"),this._origin=t},hide:function(){this._getModal().delMod("visible")},_onClick:function(t){this.hasMod(t.block.domElem,"type","auth")?(w(this.domElem,this.params.counters.login),this._setPassportUrl(t.block)):(w(this.domElem,this.params.counters.cancel),this.hide())},_setPassportUrl:function(t){t.setUrl(BEM.blocks.utils.getPassportUrl({origin:this._origin}))},_getModal:function(){return this._modal||(this._modal=this.findBlockOn(this.domElem,"modal")),this._modal}},{live:function(){this.liveInitOnBlockInsideEvent("click","button2",function(t){this._onClick(t)})},getInstance:function(){var t;return this._instance?this._instance:(t=$(this.buildSelector())).length?(this._instance=t.bem(this.getName()),this._instance):null}}),BEM.DOM.decl("block-logger",{_sendBlockProperty:function(t){var e=t.domNode.getBoundingClientRect(),i=["-block="+t.block,"-width="+e.width,"-height="+e.height,"-top="+(e.top+pageYOffset),"-left="+(e.left+pageXOffset)];t.type&&i.push("-type="+t.type),c.hit({path:"2314.487",vars:i.join(","),dtype:"iweb",reqid:t.reqid},null,t.domNode)}},{live:function(){this.liveInitOnBlockInsideEvent("loaded","directblock",function(t,e){e&&e.domElem&&e.domElem[0]&&this._sendBlockProperty({block:"direct",reqid:e.reqid,type:e.domElem[0].getAttribute("data-logger-type"),domNode:e.domElem[0]})})}}),BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{addChild:function(t){this.__base.apply(this,arguments),t.setMod("watch-scroll","no")},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocusable.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._firstFocusable.focus())}}),BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{getOwnerPos:function(){var t=this.__base.apply(this,arguments);if(this._owner){var e=this._viewport;t.top-=e.scrollTop(),t.left-=e.scrollLeft()}return t}}),BEM.DOM.decl("feedback",{externalData:{},onSetMod:{js:{inited:function(){this.checkboxes=this.findBlocksInside("checkbox"),this.submit=this.findBlockInside({block:"button",modName:"type",modVal:"submit"}).on("press",this.submitFeedback,this),this.findBlockInside({block:"button",modName:"type",modVal:"close"}).on("press",function(){this.popup.hide()},this),this.popup=this.findBlockInside("popup").on("show",this.onShowPopup,this).on("hide",this.onHidePopup,this),this.popup.params.top=this.popup.params.top||"50%",this.setCheckboxEvent(),this._ajax=BEM.create("i-request_type_ajax",{url:this.params.abuseLink,cache:!1,dataType:"script",type:"POST"}),this.channel("feedback").on("show",this.showFeedback,this)}}},showFeedback:function(t,e){this.externalData=e,this.resetPopup(),this.popup.toggle()},resetPopup:function(){this.checkboxes.forEach(function(t){t.delMod("checked")}),this.popup.findBlockInside("radiobox").val("no"),this.popup.delMod("thanks"),this.popup.findElem("result").hide(),this.popup.findElem("complaint").show()},setCheckboxEvent:function(){var t=this.findBlocksInside("checkbox"),e=this;t&&t.map(function(t){t.on("change",e.checkboxChanged,e)})},checkboxChanged:function(){this.submit.setMod("disabled",this.hasCheckedItems()?"":"yes")},hasCheckedItems:function(){return this.checkboxes.filter(function(t){return t.isChecked()}).length>0},submitFeedback:function(){var t=this;this._ajax.params.url=this.externalData.abuseLink,this._ajax.get(t.getLogParams(),this.onSuccess),setTimeout(function(){t.popup.setMod("thanks","yes"),t.popup.findElem("result").show(),t.popup.findElem("complaint").hide()},200)},defaultParams:function(){var t=this.popup.findBlocksInside("checkbox").filter(function(t){return t.isChecked()}).map(function(t){return t.val()}).toString(),e=this.popup.findBlockInside("radiobox").val(),i=this.params&&this.params.request,n={"complaint-query":e,"reason-complaint":t};return i&&$.extend(n,i),n},getLogParams:function(){return this.defaultParams()},onShowPopup:function(){},onHidePopup:function(){var t=this.popup;t.setMod("modal","hide"),setTimeout(function(){t.delMod("visibility"),t.delMod("modal")},150)},onSuccess:function(){}}),BEM.DOM.decl("feedback",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._onKeyDown=this._onKeyDown.bind(this)}}},_onKeyDown:function(t){27===t.keyCode&&this.popup.hide()},onShowPopup:function(){this.__base.apply(this,arguments),window.addEventListener("keydown",this._onKeyDown,{capture:!0})},onHidePopup:function(){this.__base.apply(this,arguments),window.removeEventListener("keydown",this._onKeyDown,{capture:!0})}}),BEM.DOM.decl("feedback",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.findBlockInside({blockName:"button",modName:"type",modVal:"submit"}).domElem.attr("onmousedown",this.params.submitCounter)}},getLogParams:function(){return $.extend({},this.__base.apply(this,arguments),{query:BEM.blocks["i-global"].param("query"),lr:this.params.lr,service:[BEM.blocks["i-global"].param("id"),"yandex",BEM.blocks["i-global"].param("tld")].join("."),"url-complaint":this.externalData.url,reqid:BEM.blocks["i-global"].param("serpid")})}}),BEM.DOM.decl("feedback",{getLogParams:function(){return $.extend({},this.__base.apply(this,arguments),{"shows-urls":BEM.blocks["serp-list"].getUrls().join(";")})}});var engine=new bemhtml({production:!0});engine.compile(function(){block("top-serials").elem("extra-content").content()(function(){return[{elem:"controls",content:[{block:"select",name:"lang",js:this.ctx.isNativeSelect?"":{elemPopupMods:{theme:"normal",size:"s"}},mods:{size:"xs",native:this.ctx.isNativeSelect?"yes":""},content:[{block:"button",mods:{size:"xs",theme:this.ctx.theme||""},content:"default"},{elem:"control",content:this.ctx.letters.map(function(t){return{elem:"option",attrs:{value:t.lang,selected:this.ctx.defaultLang===t.lang?"selected":void 0},content:t.langText}},this)}]},this.ctx.letters.map(function(t){return{block:"radio-button-carousel",mods:{lang:t.lang,theme:this.ctx.theme,"fixed-size":"xs"},js:!0,mix:[{block:"top-serials",elem:"carousel-"+t.lang}],items:t.list.map(function(t){return{content:t.title,value:t.title,checked:this.ctx.curLetter===t.title}},this)}},this)]},{block:"top-serials",elem:"extra-list",itemsLists:this.ctx.itemsLists},{block:"fade",mods:{region:"block"},mix:{block:"top-serials",elem:"fade"},js:!0,content:{block:"spin2",js:!0,mods:{size:"m"}}},{elem:"footer",content:[{elem:"back-to-top",elemMods:{hidden:"yes"},content:{block:"link",mods:{theme:"normal"},mix:{block:"top-serials",elem:"back-to-top-link"},content:BEM.I18N("top-serials","К популярному")}},{elem:"show-more-btn",elemMods:{hidden:"yes"},content:{block:"button",mods:{theme:this.ctx.theme,border:"yes",size:"s",focus:"no"},js:!0,content:BEM.I18N("top-serials","Показать еще")}},{elem:"spacer",elemMods:{hidden:"yes"}}]}]}),block("spin2")(def()(function(){return void 0===this.mods.view&&(this.mods.view="default"),void 0===this.mods.tone&&(this.mods.tone="default"),applyNext()})),oninit(function(t){var e=t.BEMContext.prototype,i=t["i-global"]=e["i-global"]=e.extend({lang:"ru",tld:"ru","content-region":"ru","click-host":"//clck.yandex.ru","passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","social-host":"https://social.yandex.ru","export-host":"https://export.yandex.ru",login:"","lego-static-host":"https://yastatic.net/lego/2.10-142"},e["i-global"]);i._public={id:!0,lang:!0,tld:!0,"content-region":!0,"user-region":!0,login:!0,displayName:!0,index:!0,yandexuid:!0,"passport-host":!0,"pass-host":!0,"passport-msg":!0,"static-host":!0,"lego-static-host":!0,"social-host":!0,clck:!0,"click-host":!0,"export-host":!0,"i-host":!0,"social-retpath":!0,"lego-path":!0,sid:!0,retpath:!0,uid:!0},i.makePublic=function(t,n){"object"!=typeof t?(void 0===n&&(n=!0),i._public[t]=n):i._public=e.extend(i._public,t)},i.isPublic=function(t){return Boolean(i._public[t])},i.setTld=function(t){var e="tr"===t?"yandex.com.tr":"yandex."+t,n=-1!==["ua","by","kz"].indexOf(t)?"yandex.ru":e;i.tld=t,i["content-region"]=t,i["click-host"]="//clck."+n,i["passport-host"]="https://passport."+n,i["pass-host"]="https://pass."+e,i["social-host"]="https://social."+e,i["export-host"]="https://export."+e},e._iGlobalBackup={_backup:null,exists:function(){return Boolean(this._backup)},save:function(){this._backup=e.extend({},i)},restore:function(){var t;for(t in i)delete i[t];for(t in this._backup)i[t]=this._backup[t]}}}),block("i-global")(tag()(""),def()(function(){var t=this.ctx.params||{},e=this["i-global"];for(var i in this._iGlobalBackup.exists()?!1!==this.ctx.reset&&this._iGlobalBackup.restore():this._iGlobalBackup.save(),t.tld&&t.tld!==e.tld&&e.setTld(t.tld),t)e[i]=t[i];return""})),oninit(function(t){var e=t["i-global"];["serpid","reqid","query","searchInputText","project","page","pageCounterPath","mobile","isYandexApp","isYandexAppIos","isYandexAppAndroid","isYandexAppIosWebview","isYandexAppAndroidWebview","hasYandexAppsAPI","isYandexLauncher","isHeaderDisabled","tablet","counterDebug","counterParams","seo","router","isOldBrowser","showRelevance","uid","ncrnd","isYandexNet","enableSamesiteSc","isPumpkin","isSpok","testId","serviceName","isUzkubr","expFlags","clck","abuseLink","pushBundleAsyncOnInit","pushBundleAsyncUrls","source","nonce","isPornoQuery","isIntegrationTest","filterIsForced","uuid","iCookieEncrypted","sk","headerServicesOrdering","commRegion","platform","isCbirEnabled","lags","isPornoQuery","perfOpt","incutPosition","resizer","lr","tld","lang","loginNorm","metaReferrerContent","isCommercialEnabled","isCommercialQuery","isThumbsCommercialSnippetEnabled","reactInitOnPageLoad","isSPASRequest"].forEach(function(t){e.makePublic(t)})}),block("i-ua")(bem()(!1),tag()("script"),("undefined"!=typeof addAttrs?addAttrs:attrs)()(function(){return{nonce:this.ctx.nonce||this["i-global"].nonce}}),content()(function(){return[{html:[";(function(d,e,c,r){","e=d.documentElement;",'c="className";','r="replace";','e[c]=e[c][r]("i-ua_js_no","i-ua_js_yes");','if(d.compatMode!="CSS1Compat")','e[c]=e[c][r]("i-ua_css_standart","i-ua_css_quirks")',"})(document);"].join("")}]})),block("i-ua").mod("no-wrap",!0)(tag()(!1)),block("i-ua").content()(function(){var t=[";(function(w,e,s,c,x,l,p,d){",'c="className";','x="deviceXDPI";','l="logicalXDPI";','p="devicePixelRatio";',"d=x in s&&l in s&&s[x]/s[l]||p in w&&w[p];",'d>1&&(e[c]+=" i-ua_retina_yes")',"})(window,document.documentElement,screen);"].join("");return[].concat(applyNext(),{html:t})}),block("top-serials").elem("extra-list")(content()(function(){return{elem:"extra-list-section",content:this.ctx.itemsLists.map(function(t){return{elem:"extra-item",item:t}})}}),elem("extra-item").replace()(function(){return{block:"link",mods:{theme:"normal",ajax:"yes"},mix:[{block:"top-serials",elem:"extra-item"}],url:this.ctx.item.url,content:this.ctx.item.title,"data-counter":this.ctx.item["data-counter"],counter:this.ctx.item.counter}})),block("select")(def()(function(){var t=this.ctx,e=t.id||this.generateId();return applyNext({_controlAttrs:{id:e,name:t.name},_formSelect:{block:this.block,mods:this.mods,tabindex:t.tabindex}})}),("undefined"!=typeof addJs?addJs:js)()(function(){return this.extend({live:!1},this.ctx.js)}),tag()("span"),elem("option").tag()("option"),elem("option-group").tag()("optgroup"),elem("text").tag()("span")),block("select").def()(function(){var t=this.ctx;if((apply("js")||{}).live){var e=t.content.filter(function(t){return"control"===t.elem})[0].content;if(e.length){var i=function(t){for(var e,n,o=0;o<t.length&&("option"===(e=t[o]).elem&&Object(e.attrs).selected?n=e:"option-group"===e.elem&&(n=i(e.content)),!n);o++);return n},n=i(e);return n||"option-group"===(n=e[0]).elem&&(n=n.content[0]),applyNext({_initValue:n.attrs.value,_initText:n.content})}}return applyNext()}),block("select").elem("item")["undefined"!=typeof addAttrs?"addAttrs":"attrs"]()(function(){return{id:this.generateId()}}),block("select").elem("item").match(function(){return this.elemMods.label}).attrs()(function(){var t=applyNext()||{};return this._labelId&&(t.id=this._labelId),t["aria-hidden"]="true",t}),block("button")(def()(function(){this.mods;return applyNext()}),tag()("button"),match(function(){return this.ctx.url}).tag()("a"),("undefined"!=typeof addJs?addJs:js)()(!0),attrs()(match(function(){return void 0!==this.ctx.tabindex})(function(){return this.extend({tabindex:this.ctx.tabindex},applyNext())}),match(function(){return this.ctx.url})(function(){var t=this.ctx,e=t.attrs,i={href:t.url,target:t.target},n=void 0!==Object(e).rel?String(e.rel):"";return"_blank"===i.target&&(i.rel="noopener",n&&-1===n.indexOf("noopener")&&(e.rel=n+" noopener")),this.extend(i,applyNext())}),match(function(){return!this.ctx.url})(function(){var t=this.ctx,e={type:t.type||"button",autocomplete:"off",name:t.name,value:t.value};return this.extend(e,applyNext())})),content()(function(){return{elem:"text",tag:"span",content:this.ctx.content}})),block("button").mod("disabled","yes").attrs()(function(){var t={};return this.ctx.url?t["aria-disabled"]="true":t.disabled=!0,this.extend(applyNext(),t)}),block("button").match(function(){return this._formSelect})(attrs()(function(){var t=applyNext()||{};t.role="listbox",t.type="button",t["aria-haspopup"]="true",t["aria-expanded"]="false";var e=this._formSelect.tabindex;return void 0!==e&&(t.tabindex=e),t}),def()(function(){var t=this.ctx,e=this._formSelect.mods,i=this.mods;return i.arrow="down",e.theme&&(i.theme=e.theme),e.size&&(i.size=e.size),e.disabled&&(i.disabled="yes"),this._initText&&(t.content=this._initText),applyNext({"ctx._theme":!0})}),("undefined"!=typeof addJs?addMix:mix)()(function(){return[{block:this._formSelect.block,elem:"button"}]})),block("select").elem("group")(("undefined"!=typeof addAttrs?addAttrs:attrs)()(function(){return{role:"group","aria-labelledby":this._labelId}}),("undefined"!=typeof addJs?addMix:mix)()(function(){return{elemMods:{position:this.isFirst()?this.isLast()?"both":"first":this.isLast()?"last":"middle"}}}),def()(function(){return applyNext({_labelId:this.generateId()})})),block("select").elem("control")(match(function(){return this._initValue}).def()(function(){var t=this.ctx;return t.attrs=this.extend(t.attrs,{value:this._initValue}),applyNext()}),tag()("select"),("undefined"!=typeof addAttrs?addAttrs:attrs)()(function(){var t={};return["id","name","tabindex"].forEach(function(e){this._controlAttrs[e]&&(t[e]=this._controlAttrs[e])}.bind(this)),t.disabled=Boolean(this.mods.disabled),t.tabindex=-1,t["aria-hidden"]="true",this.ctx.controlAttrs||t})),block("popup")(def().match(function(){return!this._popupDefaults})(function(){var t=this.ctx,e=this.mods;if(e.hasOwnProperty("theme")||(e.theme="ffffff"),e.hasOwnProperty("autoclosable")||(e.autoclosable="yes"),e.hasOwnProperty("adaptive")||(e.adaptive="yes"),e.hasOwnProperty("animate")||(e.animate="yes"),t.zIndex){var i=t.attrs||(t.attrs={});i.style=(i.style||"")+";z-index:"+t.zIndex+";"}return apply("default",{_popupDefaults:!0})}),content()(function(){return delete this._popupDefaults,[{elem:"under",elemMods:this.ctx.underMods},this.ctx.content]})),block("radio-button-carousel").content()(function(){return{block:"carousel",js:{step:this.ctx.step||"205"},mods:{controls:!0},mix:{block:"radio-button-carousel",elem:"carousel"},replaceContent:!0,content:[{elem:"control",elemMods:apply("left-control-mods")},{elem:"wrap",mix:[{block:this.block,elem:"wrap"}],content:{elem:"list",content:{block:"radio-button-carousel",elem:"items",theme:apply("items-theme"),radioBtnMods:this.mods,radioBtnMix:this.ctx.radioBtnMix,radioMix:this.ctx.radioMix,items:this.ctx.items}}},{elem:"control",elemMods:apply("right-control-mods")}]}}),block("radio-button-carousel").elem("items").replace()(function(){var t=[{block:"radio-button-carousel",elem:"content"}],e=[{block:"carousel",elem:"item"}];return this.ctx.radioBtnMix&&t.push(this.ctx.radioBtnMix),this.ctx.radioMix&&e.push(this.ctx.radioMix),{block:"radio-button",mods:{theme:this.ctx.theme,size:this.ctx.radioBtnMods["fixed-size"],"fixed-size":this.ctx.radioBtnMods["non-fixed-radio-button"]?void 0:this.ctx.radioBtnMods["fixed-size"],short:this.ctx.radioBtnMods.short,"btn-size":this.ctx.radioBtnMods["btn-size"]},mix:t,content:this.ctx.items.map(function(t){return{elem:"radio",elemMods:{checked:t.checked?"yes":"",inactive:t.inactive?"yes":"",visited:t.visited?"yes":""},mix:e,controlAttrs:{value:t.value,autocomplete:"off"},counter:t.counter,dataCounter:t.dataCounter,content:t.content}})}}),block("radiobox")(def()(function(){var t=this.ctx,e=this.mods;return void 0===this.mods.view&&(this.mods.view="classic"),applyNext({_disabled:e.disabled,_name:t.name,_value:t.value})}),tag()("span"),("undefined"!=typeof addJs?addJs:js)()(function(){return this.extend({live:!1},this.ctx.js)})),block("radiobox").elem("radio")(def()(function(){var t=this.ctx,e=this.elemMods,i=this.extend({id:this.generateId(),type:"radio",name:this._name,value:t.value},t.controlAttrs),n=void 0!==i.value&&i.value===this._value;return e.disabled||(e.disabled=this._disabled),e.checked||(e.checked=n?"yes":""),e.disabled&&(i.disabled=!0,i.tabindex=-1),e.checked&&(i.checked=!0),applyNext({_controlAttrs:i})}),tag()("label"),("undefined"!=typeof addAttrs?addAttrs:attrs)()(function(){return{for:this._controlAttrs.id}}),content()(function(){return[{elem:"box",tag:"span",content:{elem:"control"}},{elem:"text",tag:"span",content:applyNext()}]})),block("radiobox").elem("control")(tag()("input"),("undefined"!=typeof addAttrs?addAttrs:attrs)()(function(){return this._controlAttrs})),block("radio-button")(def()(function(){var t=this.ctx,e=this.mods;return void 0===this.mods.view&&(this.mods.view="classic"),applyNext({_radioButton:{name:t.name,value:t.value,disabled:Boolean(e.disabled)}})}),tag()("span"),("undefined"!=typeof addJs?addJs:js)()(function(){return this.extend({live:!1},this.ctx.js)}),content()(function(){var t=this.ctx.content;return Array.isArray(t)?t.filter(function(t){return!this.isSimple(t)&&t},this):t})),block("radio-button").elem("radio")(def()(function(){var t=this.elemMods,e=this._radioButton,i=e.disabled,n=this.extend({},this.ctx.controlAttrs);return void 0!==n.value&&n.value===e.value&&(t.checked="yes"),i&&(t.disabled="yes"),"default"===this.mods.view||t.side||(t.side=["","right","left","both"][2*this.isFirst()+this.isLast()]),n.checked=Boolean(t.checked),n.disabled=Boolean(t.disabled),n.id||(n.id=this.generateId()),applyNext({_controlAttrs:n})}),tag()("label"),("undefined"!=typeof addAttrs?addAttrs:attrs)()(function(){return{for:this._controlAttrs.id}}),content()(function(){return[{elem:"control"},{elem:"text",tag:"span",content:this.ctx.content}]})),block("radio-button").elem("radio")(attrs()(function(){var t=applyNext()||{};return t["data-counter"]=this.ctx.dataCounter,t})),block("radio-button").elem("control")(tag()("input"),("undefined"!=typeof addAttrs?addAttrs:attrs)()(function(){var t=this._controlAttrs;return t.checked=Boolean(t.checked),t.disabled=Boolean(t.disabled),t.disabled&&(t.tabindex="-1"),t.type="radio",t.name=this._radioButton.name,t})),block("radio-button").mod("adaptive","yes")(js()(function(){var t=applyNext();return!0!==t&&t||(t={}),t.moreLabel=this.ctx.moreLabel,t}),content()(function(){var t=applyNext();return t.push({block:"select",mods:{size:this.mods.size,theme:"normal"},mix:[{block:"radio-button",elem:"more"}],js:{elemPopupMods:{adaptive:"yes",type:this.ctx.popupType},popupParams:{directions:"bottom-right"}},content:[{block:"button",mods:{size:"s",theme:"normal"},attrs:{"data-counter":this.ctx.moreDataCounter},content:this.ctx.moreLabel},{elem:"control",content:{elem:"option",content:this.ctx.moreLabel}}]}),t})),block("radio-button-carousel").mod("theme","dark")(mode("left-control-mods")(function(){return{side:"left","always-visible":"yes"}}),mode("right-control-mods")(function(){return{side:"right","always-visible":"yes"}}),mode("items-theme")(function(){return"dark"})),block("dropdown")(js()(!0),("undefined"!=typeof addJs?addMix:mix)()(function(){return[{mods:{action:"closed"}}]}),elem("popup").replace()(function(){var t=this.ctx,e=[{block:"dropdown",elem:"popup"}];return t.mix&&(e=e.concat(t.mix)),{block:"popup",mix:e,mods:this.elemMods,underMods:t.underMods,attrs:t.attrs,js:t.js,content:[{elem:"tail"},{elem:"content",content:t.content}]}})),block("dropdown")(elem("text").tag()("span"),elem("switcher-text").tag()("span")),block("popup").elem("tail").tag()("i"),block("dropdown").mod("advanced","yes")(elem("hidden-value")(tag()("input"),attrs()(function(){return{type:"hidden",name:this.ctx.name,value:this.ctx.value||""}})),elem("title-text")(tag()("span")))}),window.BEMHTML={},engine.exportApply(window.BEMHTML),function(t){if("function"==typeof t.I18N&&t.I18N._proto)return t.I18N;"undefined"==typeof i18n&&(i18n={}),BEM=t;var e="_",i="__",n={ru:{},en:{}},o=[],s="",r="en",a="lego",c="",l="",h=!1,u="undefined"!=typeof console&&"function"==typeof console.log;function d(t){h&&u&&console.log(t,"keyset: "+c+" key: "+l+" (lang: "+s+")")}function p(t){return"string"==typeof t?t:t.block+(t.elem?i+t.elem:"")+(t.modName?e+t.modName+e+t.modVal:"")}function f(t){var o=function(t){var n={};return t.split(i).forEach(function(t,i){var o=[i?"elem":"block","mod","val"];t.split(e).forEach(function(t,e){n[o[e]]=t})}),n}(c),r="i-tanker"===o.block?"tanker":a,h=o.elem||c;(h=(r=i18n[r]||(i18n[r]={}))[h]||(r[h]={}))[l]="function"==typeof t?t:function(){return t};var u=n[s]||(n[s]={});(u[c]||(u[c]={}))[l]=t}function m(t){var e=t[l];return{value:e,valtype:typeof e}}var _=function(t,e,i){return _.keyset(t).key(e,i)};_._proto=!0,_.project=function(t){return a=t,this},_.keyset=function(t){return c&&o.push(c),c=p(t),this},_.key=function(t,e){s=this._lang,r=this._defLang,l=t;var i=function(t,e){var i=n[s]&&n[s][c],o=n[r][c]||n.ru[c];if(!i&&(d("[I18N_NO_KEYSET] %s"),!o))return"";var a=m(i||o);return"undefined"===a.valtype&&(d("[I18N_NO_VALUE] %s"),o&&o!==i&&(a=m(o)),"undefined"===a.valtype)?"":"string"===a.valtype?a.value:a.value.call(e||this,t)}(e,_),a=o.length&&o.pop();return a&&(c=p(a)),i},_.decl=function(t,e,i){for(var n in i&&i.lang&&(s=i.lang,r=this.getDefLang(s)),c=p(t),e)e.hasOwnProperty(n)&&(l=n,f(e[n]));return this},_.lang=function(t){return void 0!==t&&(this._lang=t,this._defLang=this.getDefLang(t)),this._lang},_.getDefLang=function(t){switch(t){case"et":case"fi":case"id":case"lt":case"lv":case"pl":case"tr":return"en";default:return"ru"}},_.debug=function(t){h=Boolean(t)},_.lang("ru"),t.I18N=_}("undefined"==typeof BEM?{}:BEM),"undefined"!=typeof BEM&&BEM.I18N&&(BEM.I18N.decl("b-page_spok_yes",{"Яндекс.Видео":"Яндекс.Видео"},{lang:"ru"}),BEM.I18N.decl("b-statcounter__metrika",{JSERR_incorrectID:"Incorrect ID has been passed."},{lang:"ru"}),BEM.I18N.decl("competitors",{"Посмотреть «{query}» в других поисковых системах:":function(t){return"Посмотреть «"+t.query+"» в других поисковых системах:"},"Ссылки на поисковые системы скрыты, так как включен семейный фильтр":"Ссылки на поисковые системы скрыты, так как включен семейный фильтр"},{lang:"ru"}),BEM.I18N.decl("copyright",{link:function(t){return"ООО «"+t.content+"»"},yandex:"ЯНДЕКС"},{lang:"ru"}),BEM.I18N.decl("fact",{"{episode} серия {season} сезона выйдет {date}":function(t){return t.episode+" серия "+t.season+" сезона выйдет "+t.date},"{episode} серия {season} сезона ещё <b>не вышла</b>":function(t){return t.episode+" серия "+t.season+" сезона ещё <b>не вышла</b>"},"{episode} серия выйдет {date}":function(t){return t.episode+" серия выйдет "+t.date},"{episode} серия ещё <b>не вышла</b>":function(t){return t.episode+" серия ещё <b>не вышла</b>"}},{lang:"ru"}),BEM.I18N.decl("feedback_spok_yes",{"Ваш отзыв будет использован алгоритмами Поиска.":"Ваш отзыв будет использован алгоритмами Поиска.","Вернуться на Яндекс":"Вернуться на Яндекс","На всю страницу":"На всю страницу","На этот результат":"На этот результат","Несоответствие запросу":"Несоответствие запросу","Пожаловаться":"Пожаловаться","Порнография":"Порнография","Причина жалобы":"Причина жалобы","Спасибо, что помогаете делать Яндекс лучше!":"Спасибо, что помогаете делать Яндекс лучше!","Шокирующая или неприятная информация":"Шокирующая или неприятная информация"},{lang:"ru"}),BEM.I18N.decl("footer",{about:"О компании","about-url":"//company.yandex.ru",advert:"Реклама","advert-url":"//advertising.yandex.ru/kupislova.xml?advertising",apps:"Мобильные приложения","apps-url":"//mobile.yandex.ru",stat:"Статистика",termsofuse:"Лицензия на поиск","termsofuse-url":"//legal.yandex.ru/termsofuse/"},{lang:"ru"}),BEM.I18N.decl("fresh-badge",{"{count} мин":function(t){return this.keyset("i-tanker__dynamic").key("plural",{count:t.count,one:t.count+" мин",some:t.count+" мин",many:t.count+" мин",none:t.count+" мин"})},"{count} сек":function(t){return this.keyset("i-tanker__dynamic").key("plural",{count:t.count,one:t.count+" сек",some:t.count+" сек",many:t.count+" сек",none:t.count+" сек"})},"{count} час":function(t){return this.keyset("i-tanker__dynamic").key("plural",{count:t.count,one:t.count+" час",some:t.count+" часа",many:t.count+" часов",none:t.count+" часов"})},"вчера":"вчера"},{lang:"ru"}),BEM.I18N.decl("i-services",{404:"404",adresa:"Адреса",advertising:"Реклама",afisha:"Афиша",all:"Все сервисы",api:"API",appmetrica:"AppMetrica",appsearch:"Приложения",audience:"Аудитории",auto:"Авто",autoru:"Авто.ру",avia:"Авиабилеты",aziada:"Азиада",ba:"Баян",backapv:"Партнер Я.Карт",balance:"Баланс",bar:"Бар","bar-ie":"Бар для ИЕ","bar-ie9":"Бар для ИЕ9",bayan:"Баннеры Яндекса",blogs:"Блоги",books:"Книги",browser:"Браузер",calendar:"Календарь",captcha:"ой...",catalogwdgt:"Каталог виджетов",chrome:"Хром с поиском Яндекса",city:"Города",cityday:"День города",clickhouse:"ClickHouse",collection:"Коллекция",company:"Компания",contest:"Contest",delivery:"Доставка",desktop:"Персональный поиск",direct:"Директ","direct.market":"Маркет",disk:"Диск",display:"Дисплей",ege:"ЕГЭ",ether:"Эфир",expert:"Эксперт",favorites:"Избранное",feedback:"Обратная связь",feedback2:"Обратная связь",ff:"ФФ с поиском Яндекса",fotki:"Фотки",fresh:"Свежее",games:"Игрушки",geocontext:"Геоконтекст",goroda:"Города",help:"Помощь",i:"Мои сервисы",ie:"ИЕ с поиском Яндекса",images:"Картинки","images-com":"Картинки",interests:"Интересы",internet:"Интернет",kassa:"Касса",keyboard:"Клавиатура",kraski:"Краски",kuda:"Куда все идут",large:"Яндекс для слабовидящих",legal:"Правовые документы",lenta:"Лента",libra:"Библиотека",literacy:"Неделя борьбы за грамотность",local:"Локальная сеть",lost:"Незабудки",love:"День взаимного тяготения — 13 августа",mail:"Почта",maps:"Карты","maps-wiki":"Народная карта",market:"Маркет","market.advertising":"Маркет",master:"Мастер",metrika:"Метрика",metro:"Метро",mirror:"Зеркало",mobile:"Мобильный",moikrug:"Мой Круг",money:"Деньги",museums:"Дни исторического и культурного наследия",music:"Музыка","music-partner":"Музыка: статистика",nahodki:"Мои находки",nano:"Нано",newhire:"Наниматор",news:"Новости",notifications:"Нотификационная панель",oauth:"Авторизация",online:"Онлайн",openid:"OpenID",opera:"Opera Software",opinion:"Цитаты",partners:"Рекламная сеть",partnersearch:"Поиск для партнеров",passport:"Паспорт",pdd:"Почта для домена",peoplesearch:"Люди",perevod:"Переводчик",plus:"Плюс",probki:"Пробки",products:"Товары",pulse:"блоги: пульс",punto:"Punto switcher",pvo:"Ответы",rabota:"Работа",radar:"Радар",ramazan:"",rasp:"Расписания",realty:"Недвижимость",referats:"Рефераты",rk:"Есть вопросы?",root:"Яндекс.Олимпиада для Unix администраторов",school:"Школа",search:"Поиск",server:"Сервер",shtrafi:"Штрафы",site:"Поиск для сайта",slovari:"Словари",so:"Самооборона",social:"Социализм",soft:"Программы",sport:"Спорт",sprav:"Справочник",start:"Стартовая страница",stat:"Статистика",subs:"Подписки",taxi:"Такси",telephony:"Телефония",terms:"Разговорник",tests:"Тесты и опросы",tickets:"Билеты",time:"Яндекс.Время",toloka:"Яндекс.Толока",toster:"Тосты",translate:"Переводчик",tune:"Настройки",tv:"ТВ",ugc:"Отзывы",uslugi:"Услуги",video:"Видео","video-com":"Видео",vno:"ВНО",wdgt:"Виджеты",weather:"Погода",webmaster:"Вебмастер","webmaster-api":"API Вебмастера",widgets:"Виджеты",wordstat:"Статистика",wow:"Я.ру",www:"Поиск",xmlsearch:"XML",yabs:"",yaca:"Каталог",yamb:"Медийные баннеры",zakladki:"Закладки"},{lang:"ru"}),BEM.I18N.decl("i-tanker__dynamic",{gender:function(t){return function(t){return t[t.gender]}.call(this,t)},plural:function(t){return function(t){var e=isNaN(parseInt(t.count))?0:t.count,i=e%10,n=e%100;return 1==i&&11!=n?t.one:i>1&&i<5&&(n<10||n>20)?t.some:t.many}.call(this,t)},plural_adv:function(t){return function(t){return 0===(isNaN(parseInt(t.count))?0:t.count)?t.none:this.keyset("i-tanker__dynamic").key("plural",{count:t.count,one:t.one,some:t.some,many:t.many})}.call(this,t)},toggle:function(t){return function(t){return Boolean(t.condition)?t.true:t.false}.call(this,t)}},{lang:"ru"}),BEM.I18N.decl("input",{"Очистить":"Очистить","Расширенный поиск":"Расширенный поиск"},{lang:"ru"}),BEM.I18N.decl("input_spok_yes",{"Расширенный поиск":"Расширенный поиск"},{lang:"ru"}),BEM.I18N.decl("lang-switcher",{all:"Ещё"},{lang:"ru"}),BEM.I18N.decl("logo_type_link",{yandex:"Яндекс"},{lang:"ru"}),BEM.I18N.decl("meta-badge",{"Прямой эфир":"Прямой эфир"},{lang:"ru"}),BEM.I18N.decl("misspell",{"Дополнительная информация о запросе":"Дополнительная информация о запросе"},{lang:"ru"}),BEM.I18N.decl("my-video-button",{"Видео добавлено":"Видео добавлено","Видео удалено":"Видео удалено"},{lang:"ru"}),BEM.I18N.decl("no-auth-popup",{"Войти":"Войти","Добавленные видеоролики будут храниться на странице «Мои видео», и их можно будет посмотреть на любом вашем устройстве.":"Добавленные видеоролики будут храниться на странице «Мои видео», и их можно будет посмотреть на любом вашем устройстве.","Отмена":"Отмена","Чтобы добавлять видео, нужно войти с аккаунтом в Яндексе":"Чтобы добавлять видео, нужно войти с аккаунтом в Яндексе","Для этого войдите в свой аккаунт":"Для этого войдите в свой аккаунт","Необходима авторизация":"Необходима авторизация","Регистрация":"Регистрация"},{lang:"ru"}),BEM.I18N.decl("quasar-control",{"Отправить":"Отправить","Отправить на устройство":"Отправить на устройство"},{lang:"ru"}),BEM.I18N.decl("rating",{"{value} из {max}":function(t){return t.value+" из "+t.max}},{lang:"ru"}),BEM.I18N.decl("related-serp",{"следующая серия":"следующая серия"},{lang:"ru"}),BEM.I18N.decl("restore-item-panel_spok_yes",{"Восстановить":"Восстановить"},{lang:"ru"}),BEM.I18N.decl("safety-filter_spok_yes",{"Режим поиска":"Режим поиска"},{lang:"ru"}),BEM.I18N.decl("search2",{"search-button-text":"Найти","search-input-label":"Запрос","search-service-label":"Поиск по сервису","search-web-label":"Поиск в интернете"},{lang:"ru"}),BEM.I18N.decl("serp-controller_spok_yes",{"Результаты поиска":"Результаты поиска"},{lang:"ru"}),BEM.I18N.decl("serp-item",{"Невозможно проиграть видео, попробуйте найти и добавить его снова.":"Невозможно проиграть видео, попробуйте найти и добавить его снова.","Следующее":"Следующее"},{lang:"ru"}),BEM.I18N.decl("serp-item_spok_yes",{"новое":"новое","Видео удалено из списка":"Видео удалено из списка","Восстановить":"Восстановить"},{lang:"ru"}),BEM.I18N.decl("serp-user_spok_yes",{"{login}, это вы?":function(t){return t.login+", это вы?"},"Войти":"Войти","Вы сможете сохранять интересные видео":"Вы сможете сохранять интересные видео","Да, войти":"Да, войти","Другой аккаунт":"Другой аккаунт","Регистрация":"Регистрация"},{lang:"ru"}),BEM.I18N.decl("ticker__text",{notifications:"Уведомлений"},{lang:"ru"}),BEM.I18N.decl("top-serials",{"К популярному":"К популярному","Показать еще":"Показать еще"},{lang:"ru"}),BEM.I18N.decl("unrelevant-label",{"Здесь только самые точные результаты, остальные мы скрыли.":"Здесь только самые точные результаты, остальные мы скрыли.","Показать все":"Показать все"},{lang:"ru"}),BEM.I18N.decl("user2",{"add-account":"Добавить аккаунт","add-organization":"Создать организацию","add-organization2":"Добавить организацию","edit-accounts":"Редактировать список",enter:"Войти",exit:"Выйти",exit_title:"Выйти из аккаунта",help:"Справка",mail:function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:"новое письмо",some:"новых письма",many:"новых писем",none:"Нет новых писем"})},mail_compose:"Написать письмо","modal-close":"Закрыть",organization:"Организация",passport:"Управление аккаунтом","pin-code":"PIN-код","pin-code-info":"Для обращения в поддержку","pin-code-description":"Сообщите PIN-код сотруднику службы поддержки для доступа к вашему аккаунту","pin-code-error1":"Ошибка генерации PIN-кода.","pin-code-error2":"Попробуйте сгенерировать код позднее.","pin-code-gen":"Получить PIN-код",settings:"Настройки",upload_files:"Мой диск",ya_plus:"Получить Плюс",ya_plus_on:"активен",ya_plus_on_title:"Плюс активен",badge_lang:"ru"},{lang:"ru"}),BEM.I18N.decl("utils",{"Десятичный разделитель":",","Разделитель групп разрядов":" ","Число десятичных знаков":"2","млн":"млн","млрд":"млрд","тыс.":"тыс."},{lang:"ru"}),BEM.I18N.decl("yaplus",{be_plus:"Будьте в Плюсе",btn_left:"Не сейчас",btn_right:"Интересно",btn_right_enabled:"Подробнее",enable:"Включить",tooltip_descr:"Скидки в Такси, полный доступ к Музыке и многое другое",tooltip_descr_enabled:"Теперь у вас есть скидки в Такси, полный доступ к Музыке и многое другое",tooltip_header:"Подписка Яндекс.Плюс"},{lang:"ru"}),BEM.I18N.lang("ru"))}